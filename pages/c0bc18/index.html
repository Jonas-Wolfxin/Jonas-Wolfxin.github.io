<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Playbook | Jonas Wolfxin Blog</title>
    <meta name="generator" content="VuePress 1.8.0">
    <link rel="shortcut icon" href="/img/favicon.ico">
    <link rel="stylesheet" href="//at.alicdn.com/t/font_3114978_qe0b39no76.css">
    <noscript><meta http-equiv="refresh" content="0; url=https://www.youngkbt.cn/noscript/"><style>.theme-vdoing-content { display:none }</noscript>
    <script>var _hmt = _hmt || [];
          (function() {
            var hm = document.createElement("script");
            hm.src = "https://hm.baidu.com/hm.js?267c5680c2ffb468ca29c45ffe6801da"; 
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
          })();
          </script>
    <meta name="description" content="Jonas Wolfxin个人博客, VuePress搭建, 使用了 Vdoing 主题, 学习Java, Web, 框架, 微服务, 工具, 前端等相关知识, 记录生活和技术路程, 同时分享编程技巧。">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <meta name="keywords" content="Jonas Wolfxin个人博客, VuePress搭建, 学习Java、Web、框架、微服务、工具、前端等相关知识, 记录生活和技术路程。">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/assets/css/0.styles.7d3fc896.css" as="style"><link rel="preload" href="/assets/js/app.d858ddbb.js" as="script"><link rel="preload" href="/assets/js/2.309e711a.js" as="script"><link rel="preload" href="/assets/js/175.50c5731b.js" as="script"><link rel="preload" href="/assets/js/16.acd3428d.js" as="script"><link rel="preload" href="/assets/js/8.5b4b6c67.js" as="script"><link rel="preload" href="/assets/js/10.58f97cc7.js" as="script"><link rel="preload" href="/assets/js/17.0b7a5267.js" as="script"><link rel="prefetch" href="/assets/js/100.a245150c.js"><link rel="prefetch" href="/assets/js/101.dc21b366.js"><link rel="prefetch" href="/assets/js/102.d5a6dfd2.js"><link rel="prefetch" href="/assets/js/103.7675e438.js"><link rel="prefetch" href="/assets/js/104.08bff44e.js"><link rel="prefetch" href="/assets/js/105.8bf552ad.js"><link rel="prefetch" href="/assets/js/106.b3388dcc.js"><link rel="prefetch" href="/assets/js/107.708d16a8.js"><link rel="prefetch" href="/assets/js/108.8d67c3a1.js"><link rel="prefetch" href="/assets/js/109.adb072ef.js"><link rel="prefetch" href="/assets/js/11.1cff9f55.js"><link rel="prefetch" href="/assets/js/110.6a33e945.js"><link rel="prefetch" href="/assets/js/111.5b6daef7.js"><link rel="prefetch" href="/assets/js/112.30fa856b.js"><link rel="prefetch" href="/assets/js/113.2bea19a6.js"><link rel="prefetch" href="/assets/js/114.78693b98.js"><link rel="prefetch" href="/assets/js/115.24b2f36f.js"><link rel="prefetch" href="/assets/js/116.121c60d7.js"><link rel="prefetch" href="/assets/js/117.c2a343f1.js"><link rel="prefetch" href="/assets/js/118.4f472067.js"><link rel="prefetch" href="/assets/js/119.24255046.js"><link rel="prefetch" href="/assets/js/12.bca3c221.js"><link rel="prefetch" href="/assets/js/120.c049d4ee.js"><link rel="prefetch" href="/assets/js/121.27c7097d.js"><link rel="prefetch" href="/assets/js/122.89ae0c7e.js"><link rel="prefetch" href="/assets/js/123.92ff168d.js"><link rel="prefetch" href="/assets/js/124.42567e10.js"><link rel="prefetch" href="/assets/js/125.3bd92459.js"><link rel="prefetch" href="/assets/js/126.ce3b5ff1.js"><link rel="prefetch" href="/assets/js/127.62073e16.js"><link rel="prefetch" href="/assets/js/128.1e61e62d.js"><link rel="prefetch" href="/assets/js/129.1abfd9a0.js"><link rel="prefetch" href="/assets/js/13.fd509ce7.js"><link rel="prefetch" href="/assets/js/130.fd10656f.js"><link rel="prefetch" href="/assets/js/131.739a70c7.js"><link rel="prefetch" href="/assets/js/132.aead2e49.js"><link rel="prefetch" href="/assets/js/133.c996494c.js"><link rel="prefetch" href="/assets/js/134.3f032f05.js"><link rel="prefetch" href="/assets/js/135.c35c5612.js"><link rel="prefetch" href="/assets/js/136.b1a52d43.js"><link rel="prefetch" href="/assets/js/137.f6c998f0.js"><link rel="prefetch" href="/assets/js/138.5165a511.js"><link rel="prefetch" href="/assets/js/139.84e0898b.js"><link rel="prefetch" href="/assets/js/14.9a0c9450.js"><link rel="prefetch" href="/assets/js/140.f85c3c58.js"><link rel="prefetch" href="/assets/js/141.1b18b352.js"><link rel="prefetch" href="/assets/js/142.61b694c2.js"><link rel="prefetch" href="/assets/js/143.ca56fc45.js"><link rel="prefetch" href="/assets/js/144.634fc96a.js"><link rel="prefetch" href="/assets/js/145.7db28ded.js"><link rel="prefetch" href="/assets/js/146.0e801c74.js"><link rel="prefetch" href="/assets/js/147.26faa263.js"><link rel="prefetch" href="/assets/js/148.927832d5.js"><link rel="prefetch" href="/assets/js/149.8755eb42.js"><link rel="prefetch" href="/assets/js/15.d3755cc5.js"><link rel="prefetch" href="/assets/js/150.906609e5.js"><link rel="prefetch" href="/assets/js/151.7a52439b.js"><link rel="prefetch" href="/assets/js/152.c822b1fb.js"><link rel="prefetch" href="/assets/js/153.593575cc.js"><link rel="prefetch" href="/assets/js/154.2a16d8e7.js"><link rel="prefetch" href="/assets/js/155.6a18c733.js"><link rel="prefetch" href="/assets/js/156.bb65d909.js"><link rel="prefetch" href="/assets/js/157.862f6419.js"><link rel="prefetch" href="/assets/js/158.db76ed26.js"><link rel="prefetch" href="/assets/js/159.0f0b1ee8.js"><link rel="prefetch" href="/assets/js/160.8f421d08.js"><link rel="prefetch" href="/assets/js/161.4a521888.js"><link rel="prefetch" href="/assets/js/162.601dbfca.js"><link rel="prefetch" href="/assets/js/163.d76b166d.js"><link rel="prefetch" href="/assets/js/164.99b00d17.js"><link rel="prefetch" href="/assets/js/165.7809f82c.js"><link rel="prefetch" href="/assets/js/166.b29e508c.js"><link rel="prefetch" href="/assets/js/167.71af6bb1.js"><link rel="prefetch" href="/assets/js/168.aad10cfc.js"><link rel="prefetch" href="/assets/js/169.d807fd76.js"><link rel="prefetch" href="/assets/js/170.8cd1462a.js"><link rel="prefetch" href="/assets/js/171.ecbf63cf.js"><link rel="prefetch" href="/assets/js/172.e75cd345.js"><link rel="prefetch" href="/assets/js/173.1ab612d0.js"><link rel="prefetch" href="/assets/js/174.2366c5d2.js"><link rel="prefetch" href="/assets/js/176.ac8ad112.js"><link rel="prefetch" href="/assets/js/177.1abcf5d4.js"><link rel="prefetch" href="/assets/js/178.b937dacc.js"><link rel="prefetch" href="/assets/js/179.b6fa0b6d.js"><link rel="prefetch" href="/assets/js/18.64b7e666.js"><link rel="prefetch" href="/assets/js/180.e4a8bc36.js"><link rel="prefetch" href="/assets/js/181.b916da57.js"><link rel="prefetch" href="/assets/js/182.27a2bdb4.js"><link rel="prefetch" href="/assets/js/183.dcb4d635.js"><link rel="prefetch" href="/assets/js/184.820c8f5f.js"><link rel="prefetch" href="/assets/js/185.6654f558.js"><link rel="prefetch" href="/assets/js/186.2749179c.js"><link rel="prefetch" href="/assets/js/187.a301fd95.js"><link rel="prefetch" href="/assets/js/188.3a9e3226.js"><link rel="prefetch" href="/assets/js/189.5f2b0e83.js"><link rel="prefetch" href="/assets/js/19.7a102d25.js"><link rel="prefetch" href="/assets/js/190.76dc6e42.js"><link rel="prefetch" href="/assets/js/191.b6c01ef6.js"><link rel="prefetch" href="/assets/js/192.bd87e976.js"><link rel="prefetch" href="/assets/js/193.e3b20021.js"><link rel="prefetch" href="/assets/js/194.d83d205c.js"><link rel="prefetch" href="/assets/js/195.e53e330d.js"><link rel="prefetch" href="/assets/js/196.1fd35397.js"><link rel="prefetch" href="/assets/js/197.cb0858f8.js"><link rel="prefetch" href="/assets/js/198.651004c0.js"><link rel="prefetch" href="/assets/js/199.4a4a16ae.js"><link rel="prefetch" href="/assets/js/20.2e6fe8d4.js"><link rel="prefetch" href="/assets/js/200.0347a232.js"><link rel="prefetch" href="/assets/js/201.77c9f572.js"><link rel="prefetch" href="/assets/js/202.6f66fc82.js"><link rel="prefetch" href="/assets/js/203.c12f2fd1.js"><link rel="prefetch" href="/assets/js/204.0b74eb4e.js"><link rel="prefetch" href="/assets/js/205.82129b16.js"><link rel="prefetch" href="/assets/js/206.0240cea0.js"><link rel="prefetch" href="/assets/js/207.d2d2dd99.js"><link rel="prefetch" href="/assets/js/208.f1073a08.js"><link rel="prefetch" href="/assets/js/209.3b1e4cbe.js"><link rel="prefetch" href="/assets/js/21.179bedf0.js"><link rel="prefetch" href="/assets/js/210.b8b67413.js"><link rel="prefetch" href="/assets/js/211.455c8e40.js"><link rel="prefetch" href="/assets/js/212.8735e669.js"><link rel="prefetch" href="/assets/js/213.f77fefc5.js"><link rel="prefetch" href="/assets/js/214.97d827be.js"><link rel="prefetch" href="/assets/js/215.bc08fe35.js"><link rel="prefetch" href="/assets/js/216.fa811698.js"><link rel="prefetch" href="/assets/js/217.b965b7c6.js"><link rel="prefetch" href="/assets/js/218.6a91db8b.js"><link rel="prefetch" href="/assets/js/219.fb3d8166.js"><link rel="prefetch" href="/assets/js/22.8268ce6e.js"><link rel="prefetch" href="/assets/js/220.1577cda2.js"><link rel="prefetch" href="/assets/js/221.ceea7cea.js"><link rel="prefetch" href="/assets/js/222.3985b121.js"><link rel="prefetch" href="/assets/js/223.40f0edd0.js"><link rel="prefetch" href="/assets/js/224.bcdfffa8.js"><link rel="prefetch" href="/assets/js/225.13252b88.js"><link rel="prefetch" href="/assets/js/226.2afd6de5.js"><link rel="prefetch" href="/assets/js/227.39e5b8f1.js"><link rel="prefetch" href="/assets/js/228.f24cb5b5.js"><link rel="prefetch" href="/assets/js/229.582f76a9.js"><link rel="prefetch" href="/assets/js/23.3b76f2ef.js"><link rel="prefetch" href="/assets/js/230.50a93474.js"><link rel="prefetch" href="/assets/js/231.063e02af.js"><link rel="prefetch" href="/assets/js/232.08153e5d.js"><link rel="prefetch" href="/assets/js/233.e8a2f480.js"><link rel="prefetch" href="/assets/js/234.4e784ee0.js"><link rel="prefetch" href="/assets/js/235.fe1262b2.js"><link rel="prefetch" href="/assets/js/236.5b6a52cf.js"><link rel="prefetch" href="/assets/js/237.36fae37d.js"><link rel="prefetch" href="/assets/js/238.7369ac7a.js"><link rel="prefetch" href="/assets/js/239.7fff287f.js"><link rel="prefetch" href="/assets/js/24.7c6b119c.js"><link rel="prefetch" href="/assets/js/240.96b67d8a.js"><link rel="prefetch" href="/assets/js/241.6cca43be.js"><link rel="prefetch" href="/assets/js/242.063840f3.js"><link rel="prefetch" href="/assets/js/243.e25e2acc.js"><link rel="prefetch" href="/assets/js/244.6058b76a.js"><link rel="prefetch" href="/assets/js/245.cab0cb5f.js"><link rel="prefetch" href="/assets/js/246.38dba8a1.js"><link rel="prefetch" href="/assets/js/247.58a45597.js"><link rel="prefetch" href="/assets/js/248.5cf1ad4c.js"><link rel="prefetch" href="/assets/js/249.691356bb.js"><link rel="prefetch" href="/assets/js/25.02fab98f.js"><link rel="prefetch" href="/assets/js/250.e2c83a35.js"><link rel="prefetch" href="/assets/js/251.80aa06df.js"><link rel="prefetch" href="/assets/js/252.a3e269d1.js"><link rel="prefetch" href="/assets/js/253.d11f6725.js"><link rel="prefetch" href="/assets/js/26.76ffb425.js"><link rel="prefetch" href="/assets/js/27.ce24313c.js"><link rel="prefetch" href="/assets/js/28.d8dbc96b.js"><link rel="prefetch" href="/assets/js/29.2b3bed04.js"><link rel="prefetch" href="/assets/js/3.d6952836.js"><link rel="prefetch" href="/assets/js/30.26988c7b.js"><link rel="prefetch" href="/assets/js/31.cc5781e4.js"><link rel="prefetch" href="/assets/js/32.80d8b83b.js"><link rel="prefetch" href="/assets/js/33.d97c7068.js"><link rel="prefetch" href="/assets/js/34.962f9100.js"><link rel="prefetch" href="/assets/js/35.23d8a044.js"><link rel="prefetch" href="/assets/js/36.6d349d82.js"><link rel="prefetch" href="/assets/js/37.b08f29c8.js"><link rel="prefetch" href="/assets/js/38.8b2bd27d.js"><link rel="prefetch" href="/assets/js/39.45a0b016.js"><link rel="prefetch" href="/assets/js/4.8b22777d.js"><link rel="prefetch" href="/assets/js/40.e6f6cb43.js"><link rel="prefetch" href="/assets/js/41.c756e119.js"><link rel="prefetch" href="/assets/js/42.bbc17b0f.js"><link rel="prefetch" href="/assets/js/43.8e0ce4ca.js"><link rel="prefetch" href="/assets/js/44.b91517af.js"><link rel="prefetch" href="/assets/js/45.416dfe4d.js"><link rel="prefetch" href="/assets/js/46.c00eeb87.js"><link rel="prefetch" href="/assets/js/47.29d200b3.js"><link rel="prefetch" href="/assets/js/48.7f066ab6.js"><link rel="prefetch" href="/assets/js/49.0e010fee.js"><link rel="prefetch" href="/assets/js/5.e6781b57.js"><link rel="prefetch" href="/assets/js/50.1bb477d0.js"><link rel="prefetch" href="/assets/js/51.66468406.js"><link rel="prefetch" href="/assets/js/52.5cf7fbd0.js"><link rel="prefetch" href="/assets/js/53.d6f04354.js"><link rel="prefetch" href="/assets/js/54.59ca865c.js"><link rel="prefetch" href="/assets/js/55.fb0ad69c.js"><link rel="prefetch" href="/assets/js/56.c47a2d12.js"><link rel="prefetch" href="/assets/js/57.f5d65bb3.js"><link rel="prefetch" href="/assets/js/58.c5761ef2.js"><link rel="prefetch" href="/assets/js/59.9fe56073.js"><link rel="prefetch" href="/assets/js/6.9b07e200.js"><link rel="prefetch" href="/assets/js/60.ee1a5c93.js"><link rel="prefetch" href="/assets/js/61.ed5a91fd.js"><link rel="prefetch" href="/assets/js/62.4c69d23d.js"><link rel="prefetch" href="/assets/js/63.a396c29b.js"><link rel="prefetch" href="/assets/js/64.6f39dd9c.js"><link rel="prefetch" href="/assets/js/65.4cb24e13.js"><link rel="prefetch" href="/assets/js/66.aad4aa20.js"><link rel="prefetch" href="/assets/js/67.36e86f95.js"><link rel="prefetch" href="/assets/js/68.cbcfb2e0.js"><link rel="prefetch" href="/assets/js/69.8f5b0c08.js"><link rel="prefetch" href="/assets/js/7.4d64b8e6.js"><link rel="prefetch" href="/assets/js/70.1e7d144f.js"><link rel="prefetch" href="/assets/js/71.77fb0b43.js"><link rel="prefetch" href="/assets/js/72.bf3bb5b9.js"><link rel="prefetch" href="/assets/js/73.e059a41d.js"><link rel="prefetch" href="/assets/js/74.cae09eb3.js"><link rel="prefetch" href="/assets/js/75.f89a6d2e.js"><link rel="prefetch" href="/assets/js/76.cfb3df08.js"><link rel="prefetch" href="/assets/js/77.f4fa62e6.js"><link rel="prefetch" href="/assets/js/78.464e83f6.js"><link rel="prefetch" href="/assets/js/79.71895252.js"><link rel="prefetch" href="/assets/js/80.58d501fe.js"><link rel="prefetch" href="/assets/js/81.948adca1.js"><link rel="prefetch" href="/assets/js/82.bfd7ff16.js"><link rel="prefetch" href="/assets/js/83.3920a558.js"><link rel="prefetch" href="/assets/js/84.d5b9372a.js"><link rel="prefetch" href="/assets/js/85.3be0afac.js"><link rel="prefetch" href="/assets/js/86.29f7272d.js"><link rel="prefetch" href="/assets/js/87.93a0bc8e.js"><link rel="prefetch" href="/assets/js/88.5be81cc2.js"><link rel="prefetch" href="/assets/js/89.bc9cad5d.js"><link rel="prefetch" href="/assets/js/9.dc7a3982.js"><link rel="prefetch" href="/assets/js/90.5ba7972c.js"><link rel="prefetch" href="/assets/js/91.6ca92166.js"><link rel="prefetch" href="/assets/js/92.cb997f9f.js"><link rel="prefetch" href="/assets/js/93.941f52c6.js"><link rel="prefetch" href="/assets/js/94.c34116e0.js"><link rel="prefetch" href="/assets/js/95.0aa6895c.js"><link rel="prefetch" href="/assets/js/96.fd230ec0.js"><link rel="prefetch" href="/assets/js/97.375c63c2.js"><link rel="prefetch" href="/assets/js/98.5f4889ea.js"><link rel="prefetch" href="/assets/js/99.476bd54f.js">
    <link rel="stylesheet" href="/assets/css/0.styles.7d3fc896.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu have-body-img"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/index/logo.png" alt="Jonas Wolfxin Blog" class="logo"> <span class="site-name can-hide">Jonas Wolfxin Blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">Home🏠</a></div><div class="nav-item"><a href="/navigation/" class="nav-link">Navigation🧭</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Front End" class="dropdown-title"><a href="/front/" class="link-title">Front End</a> <span class="title" style="display:none;">Front End</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Basics</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/html/" class="nav-link">HTML</a></li><li class="dropdown-subitem"><a href="/css/" class="nav-link">CSS</a></li><li class="dropdown-subitem"><a href="/javascript/" class="nav-link">JavaScript</a></li></ul></li><li class="dropdown-item"><h4>Frame</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/react/" class="nav-link">React</a></li><li class="dropdown-subitem"><a href="/vue2/" class="nav-link">Vue2</a></li><li class="dropdown-subitem"><a href="/vue3/" class="nav-link">Vue3</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Database" class="dropdown-title"><a href="/database/" class="link-title">Database</a> <span class="title" style="display:none;">Database</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>SQL 数据库</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/mysql/" class="nav-link">MySQL</a></li><li class="dropdown-subitem"><a href="/postgresql/" class="nav-link">PostgreSQL</a></li></ul></li><li class="dropdown-item"><h4>NoSQL 数据库</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/redis/" class="nav-link">Redis</a></li><li class="dropdown-subitem"><a href="/es/" class="nav-link">ElasticSearch</a></li><li class="dropdown-subitem"><a href="/mongodb/" class="nav-link">MongoDB</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Python" class="dropdown-title"><a href="/pythonstrdy/" class="link-title">Python</a> <span class="title" style="display:none;">Python</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/python_basics/" class="nav-link">Python Basics</a></li><li class="dropdown-item"><!----> <a href="/python_advanced/" class="nav-link">Python Advanced</a></li><li class="dropdown-item"><!----> <a href="/python_projects/" class="nav-link">Python Projects</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="网络运维" class="dropdown-title"><a href="/tool/" class="link-title">网络运维</a> <span class="title" style="display:none;">网络运维</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>CCNA</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/91ab17/" class="nav-link">CCNA知识</a></li><li class="dropdown-subitem"><a href="/pages/55766c/" class="nav-link">CCNA题库</a></li><li class="dropdown-subitem"><a href="/pages/f61749/" class="nav-link">Cisco NetAca</a></li></ul></li><li class="dropdown-item"><!----> <a href="/pages/4f0673/" class="nav-link">Ansible</a></li><li class="dropdown-item"><h4>版本管理</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/maven/" class="nav-link">Maven</a></li><li class="dropdown-subitem"><a href="/git/" class="nav-link">Git</a></li></ul></li><li class="dropdown-item"><h4>部署</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/linux/" class="nav-link">Linux</a></li><li class="dropdown-subitem"><a href="/docker/" class="nav-link">Docker</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="About" class="dropdown-title"><a href="/archives/" class="link-title">About</a> <span class="title" style="display:none;">About</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>This Blog</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/categories/" class="nav-link">Categories</a></li><li class="dropdown-subitem"><a href="/tags/" class="nav-link">Tags</a></li><li class="dropdown-subitem"><a href="/archives/" class="nav-link">Archives</a></li></ul></li><li class="dropdown-item"><h4>About Me</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/whell/web/" class="nav-link">Collection</a></li><li class="dropdown-subitem"><a href="/about/website/introduce/" class="nav-link">Introduction</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="星河万里" class="dropdown-title"><a href="/inGermany/" class="link-title">星河万里</a> <span class="title" style="display:none;">星河万里</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>德国驾照B级</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/8a9dd0/" class="nav-link">理论准备</a></li><li class="dropdown-subitem"><a href="/pages/b79ef5/" class="nav-link">实践准备</a></li></ul></li><li class="dropdown-item"><h4>星河万里</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/bcf060/" class="nav-link">Vim操作</a></li><li class="dropdown-subitem"><a href="/pages/c11fcf/" class="nav-link">Gitemoji</a></li><li class="dropdown-subitem"><a href="/pages/055f2e/" class="nav-link">无妄经</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/message-board/" class="nav-link">MessageBoard📋</a></div> <a href="https://github.com/Jonas-Wolfxin/Jonas-Wolfxin.github.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="https://cdn.jsdelivr.net/gh/Wolfxin/MyPicGo/img/202206092309359.png"> <div class="blogger-info"><h3>Jonas 林风</h3> <span>吾志所向，万夫不当；披荆斩棘，奋而继往。</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">Home🏠</a></div><div class="nav-item"><a href="/navigation/" class="nav-link">Navigation🧭</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Front End" class="dropdown-title"><a href="/front/" class="link-title">Front End</a> <span class="title" style="display:none;">Front End</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Basics</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/html/" class="nav-link">HTML</a></li><li class="dropdown-subitem"><a href="/css/" class="nav-link">CSS</a></li><li class="dropdown-subitem"><a href="/javascript/" class="nav-link">JavaScript</a></li></ul></li><li class="dropdown-item"><h4>Frame</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/react/" class="nav-link">React</a></li><li class="dropdown-subitem"><a href="/vue2/" class="nav-link">Vue2</a></li><li class="dropdown-subitem"><a href="/vue3/" class="nav-link">Vue3</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Database" class="dropdown-title"><a href="/database/" class="link-title">Database</a> <span class="title" style="display:none;">Database</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>SQL 数据库</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/mysql/" class="nav-link">MySQL</a></li><li class="dropdown-subitem"><a href="/postgresql/" class="nav-link">PostgreSQL</a></li></ul></li><li class="dropdown-item"><h4>NoSQL 数据库</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/redis/" class="nav-link">Redis</a></li><li class="dropdown-subitem"><a href="/es/" class="nav-link">ElasticSearch</a></li><li class="dropdown-subitem"><a href="/mongodb/" class="nav-link">MongoDB</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Python" class="dropdown-title"><a href="/pythonstrdy/" class="link-title">Python</a> <span class="title" style="display:none;">Python</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/python_basics/" class="nav-link">Python Basics</a></li><li class="dropdown-item"><!----> <a href="/python_advanced/" class="nav-link">Python Advanced</a></li><li class="dropdown-item"><!----> <a href="/python_projects/" class="nav-link">Python Projects</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="网络运维" class="dropdown-title"><a href="/tool/" class="link-title">网络运维</a> <span class="title" style="display:none;">网络运维</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>CCNA</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/91ab17/" class="nav-link">CCNA知识</a></li><li class="dropdown-subitem"><a href="/pages/55766c/" class="nav-link">CCNA题库</a></li><li class="dropdown-subitem"><a href="/pages/f61749/" class="nav-link">Cisco NetAca</a></li></ul></li><li class="dropdown-item"><!----> <a href="/pages/4f0673/" class="nav-link">Ansible</a></li><li class="dropdown-item"><h4>版本管理</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/maven/" class="nav-link">Maven</a></li><li class="dropdown-subitem"><a href="/git/" class="nav-link">Git</a></li></ul></li><li class="dropdown-item"><h4>部署</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/linux/" class="nav-link">Linux</a></li><li class="dropdown-subitem"><a href="/docker/" class="nav-link">Docker</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="About" class="dropdown-title"><a href="/archives/" class="link-title">About</a> <span class="title" style="display:none;">About</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>This Blog</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/categories/" class="nav-link">Categories</a></li><li class="dropdown-subitem"><a href="/tags/" class="nav-link">Tags</a></li><li class="dropdown-subitem"><a href="/archives/" class="nav-link">Archives</a></li></ul></li><li class="dropdown-item"><h4>About Me</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/whell/web/" class="nav-link">Collection</a></li><li class="dropdown-subitem"><a href="/about/website/introduce/" class="nav-link">Introduction</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="星河万里" class="dropdown-title"><a href="/inGermany/" class="link-title">星河万里</a> <span class="title" style="display:none;">星河万里</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>德国驾照B级</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/8a9dd0/" class="nav-link">理论准备</a></li><li class="dropdown-subitem"><a href="/pages/b79ef5/" class="nav-link">实践准备</a></li></ul></li><li class="dropdown-item"><h4>星河万里</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/bcf060/" class="nav-link">Vim操作</a></li><li class="dropdown-subitem"><a href="/pages/c11fcf/" class="nav-link">Gitemoji</a></li><li class="dropdown-subitem"><a href="/pages/055f2e/" class="nav-link">无妄经</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/message-board/" class="nav-link">MessageBoard📋</a></div> <a href="https://github.com/Jonas-Wolfxin/Jonas-Wolfxin.github.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>CCNA</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Ansible</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/21317e/" class="sidebar-link">自动化运维</a></li><li><a href="/pages/4f0673/" class="sidebar-link">Ansible</a></li><li><a href="/pages/167cd7/" class="sidebar-link">常用模块</a></li><li><a href="/pages/c0bc18/" aria-current="page" class="active sidebar-link">Playbook</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/pages/c0bc18/#playbook" class="sidebar-link">playbook</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/c0bc18/#playbook执行过程图解" class="sidebar-link">playbook执行过程图解</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/c0bc18/#yaml介绍" class="sidebar-link">YAML介绍</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level4"><a href="/pages/c0bc18/#特性" class="sidebar-link">特性</a></li><li class="sidebar-sub-header level3"><a href="/pages/c0bc18/#yaml语法简介" class="sidebar-link">YAML语法简介</a></li><li class="sidebar-sub-header level4"><a href="/pages/c0bc18/#列表" class="sidebar-link">列表</a></li><li class="sidebar-sub-header level4"><a href="/pages/c0bc18/#字典" class="sidebar-link">字典</a></li><li class="sidebar-sub-header level4"><a href="/pages/c0bc18/#注释" class="sidebar-link">注释</a></li><li class="sidebar-sub-header level4"><a href="/pages/c0bc18/#多行字符串" class="sidebar-link">多行字符串</a></li><li class="sidebar-sub-header level4"><a href="/pages/c0bc18/#yaml示例" class="sidebar-link">YAML示例</a></li><li class="sidebar-sub-header level3"><a href="/pages/c0bc18/#三种常见的数据交换格式" class="sidebar-link">三种常见的数据交换格式</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/c0bc18/#playbook核心元素" class="sidebar-link">Playbook核心元素</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/c0bc18/#playbook基础组件" class="sidebar-link">playbook基础组件</a></li><li class="sidebar-sub-header level4"><a href="/pages/c0bc18/#hosts" class="sidebar-link">hosts</a></li><li class="sidebar-sub-header level4"><a href="/pages/c0bc18/#remote-user" class="sidebar-link">remote_user</a></li><li class="sidebar-sub-header level4"><a href="/pages/c0bc18/#tasks" class="sidebar-link">tasks</a></li><li class="sidebar-sub-header level3"><a href="/pages/c0bc18/#运行playbook" class="sidebar-link">运行playbook</a></li><li class="sidebar-sub-header level4"><a href="/pages/c0bc18/#playbook-vs-shell-scripts" class="sidebar-link">Playbook VS Shell Scripts</a></li><li class="sidebar-sub-header level4"><a href="/pages/c0bc18/#示例-playbook-创建用户" class="sidebar-link">示例:Playbook 创建用户</a></li><li class="sidebar-sub-header level3"><a href="/pages/c0bc18/#handlers和notify结合使用触发条件" class="sidebar-link">handlers和notify结合使用触发条件</a></li><li class="sidebar-sub-header level4"><a href="/pages/c0bc18/#playbook中handlers使用" class="sidebar-link">Playbook中handlers使用</a></li><li class="sidebar-sub-header level4"><a href="/pages/c0bc18/#在notify中定义一个notify并触发多个handler" class="sidebar-link">在notify中定义一个notify并触发多个handler</a></li><li class="sidebar-sub-header level4"><a href="/pages/c0bc18/#多个相同的notify对应一个handler" class="sidebar-link">多个相同的notify对应一个handler</a></li><li class="sidebar-sub-header level3"><a href="/pages/c0bc18/#playbook中tags使用" class="sidebar-link">Playbook中tags使用</a></li><li class="sidebar-sub-header level4"><a href="/pages/c0bc18/#对整个playbook添加tags" class="sidebar-link">对整个playbook添加tags</a></li><li class="sidebar-sub-header level3"><a href="/pages/c0bc18/#playbook中变量的使用" class="sidebar-link">Playbook中变量的使用</a></li><li class="sidebar-sub-header level4"><a href="/pages/c0bc18/#使用系统变量" class="sidebar-link">使用系统变量</a></li><li class="sidebar-sub-header level4"><a href="/pages/c0bc18/#在playbook中定义变量" class="sidebar-link">在playbook中定义变量</a></li><li class="sidebar-sub-header level4"><a href="/pages/c0bc18/#inventory中定义变量" class="sidebar-link">Inventory中定义变量</a></li><li class="sidebar-sub-header level4"><a href="/pages/c0bc18/#invertory参数" class="sidebar-link">invertory参数</a></li><li class="sidebar-sub-header level4"><a href="/pages/c0bc18/#独立的变量文件-yml" class="sidebar-link">独立的变量文件.yml</a></li></ul></li></ul></li><li><a href="/pages/c0c5f0/" class="sidebar-link">Template</a></li><li><a href="/pages/bc0fd9/" class="sidebar-link">Jinja2</a></li><li><a href="/pages/1d2d6a/" class="sidebar-link">Roles</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>版本管理 - Maven</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>开发管理 - Git</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>操作系统 - Linux</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>容器部署 - Docker</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><a href="/categories/?category=%E7%BD%91%E7%BB%9C%E8%BF%90%E7%BB%B4" title="分类" data-v-06225672>网络运维</a></li><li data-v-06225672><a href="/categories/?category=Ansible" title="分类" data-v-06225672>Ansible</a></li></ul> <div class="info" data-v-06225672><div title="作者" class="author iconfont icon-touxiang" data-v-06225672><a href="https://github.com/Jonas-Wolfxin" target="_blank" title="作者" class="beLink" data-v-06225672>Jonas Wolfxin</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2023-03-28</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABGpJREFUSA3tVVtoXFUU3fvOI53UlmCaKIFmwEhsE7QK0ipFEdHEKpXaZGrp15SINsXUWvBDpBgQRKi0+KKoFeJHfZA+ED9KKoIU2gYD9UejTW4rVIzm0VSTziPzuNu1z507dibTTjL4U/DAzLn3nL3X2o91ziX6f9wMFdh6Jvbm9nNSV0msViVO6tN1Rm7NMu2OpeJ9lWBUTDxrJbYTS0hInuwciu9eLHlFxCLCZEk3MegsJmZ5K/JD6t7FkFdEvGUo1g7qJoG3MHImqRIn8/nzY1K9UPKKiJmtnUqHVE3Gbuay6vJE/N2FEmuxFjW2nUuE0yQXRRxLiTUAzs36zhZvOXJPdX850EVnnLZkB8prodQoM5JGj7Xk2mvC7JB8tG04Ef5PiXtG0UtxupRQSfTnBoCy554x18yJHI6I+G5Eru4LHmPJZEQsrvPUbMiA8G/WgMK7w7I+ez7++o2ANfbrjvaOl1tFMs+htG3IrZH9/hDX1Pr8Tc0UvH8tcX29KzAgIGcEkINyW5BF9x891hw6VYqgJHEk0huccS7vh3C6gTiODL+26huuBtbct8eZnqLML8PkxGYpuPZBqtqwkSjgc4mB5gbgig5i+y0UDK35LMxXisn9xQtK+nd26gTIHsHe/oblK/b29fUmN/8Y+9jAQrnBp56m1LcDlDp9irKTExSKduXJVWSqdBMA08pEJnEIOB3FPPMybu/oeV8zFeYN3xx576Q6RH+VmplE4ncQV5v+5rzSoyOU7PuEAg8g803PwBJ0CExno/jcMbN8tONYeOmHiuUNryvm3fRUy4tMPVLdAGkUhNWuggGrJcXPv+ouCjz0MKUHz1J2/E8IC9nqTabcxgaBYM0hPhD5Y65FsbxRQKxCQrDjDctW7PUM3HuZunFyifSAqEfuzCp48Il24luWUWZoyJCaPR82jE0+kFA643wRFVni4RYSq3ohJO2pZ7B5dO4xkDWbEpossJPLSrPjYID8rS2UHTlvyNxqIGsg674XJJ7vnh5L7PNwC4hh2sjCI96mzszOTpxLF0T7l88Yz7lAuK6OnL8gXLOnTvpzSb22YG8W7us3jSebFHeeqnXRG1vt+MoUM84LQIBmMsCTAcOauTh0T0l0neQK7m2bLMt2mGxU3HYssS0J2cdv5wljlPsrIuZLAG/2DOZIXgCYT8uMGZN+e2kSirfxZOPCsC0f24nTZzspnVn9VePS1Z5vubmAGGXG8ZFno9Hel0yfA5ZPhF7Dh972BQJ2qCpgH67lmWtBYbvk6sz02wjky2vXyz0XErP/kFB619js1BtwfOV4OPRqOQBjy3Qbk18vigUPPSD5ceHnwck7W9bhAqZdd7SuG7w4/P2F/GaJh8c7e9qgow+Q7cGBo+98WsLkuktFqiZabtXuQTu/Y5ETbR0v7tNSFnvrmu6pjdoan2KjMu8q/Hmj1EfCO2ZGfEIbIXKUlw8qaX9/b2oeSJmFksSeT/Fn0V3nSypChh4Gjh74ybO9aeZ/AN2dwciu2/MhAAAAAElFTkSuQmCC">Playbook<!----></h1> <!----> <div class="theme-vdoing-content content__default"><h2 id="playbook"><a href="#playbook" class="header-anchor">#</a> playbook</h2> <blockquote><ul><li>Playbook采用YAML语言编写</li> <li>playbook是由一个或多个&quot;play&quot;组成的列表</li> <li>play的主要功能在于将事先归为一组的主机，装扮成事先通过ansible中的task定义好的角色。</li> <li>Task实际是调用ansible的一个module，将多个play组织在一个playbook中，即可以让它们联合起来，按事先编排的机制执行预定义的动作</li></ul></blockquote> <blockquote><h5 id="playbook的语法规则"><a href="#playbook的语法规则" class="header-anchor">#</a> Playbook的语法规则</h5> <ul><li>用连续三个连字号(——)区分多个档案。另外，还有选择性的连续三个点号( ... )用来表示档案结尾</li> <li>次行开始正常写Playbook的内容，一般建议写明该Playbook的功能</li> <li>一个完整的代码块功能需最少元素需包括 name 和 task</li> <li>一个name只能包括一个task</li> <li>YAML文件扩展名通常为<code>.yml</code>或<code>yaml</code>;</li></ul></blockquote> <h3 id="playbook执行过程图解"><a href="#playbook执行过程图解" class="header-anchor">#</a> playbook执行过程图解</h3> <p><img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202303270343435.png" alt="image-20230327034325126"></p> <ol><li>用户通过ansible命令直接调用yml语言写好的playbook;</li> <li>playbook由多条play组成, 每条play都有一个任务(task)相对应的操作;</li> <li>然后调用模块modules，应用在主机清单上;</li> <li>通过ssh远程连接, 从而控制远程主机或者网络设备</li></ol> <hr> <h2 id="yaml介绍"><a href="#yaml介绍" class="header-anchor">#</a> YAML介绍</h2> <blockquote><ul><li><p>YAML (Yet Another Markup Language）是一种轻量级的数据序列化格式，通常用于配置文件、数据交换和应用程序间的通信。它被设计为易于人类阅读和编写，并且可以轻松地被机器解析和生成。</p></li> <li><p>YAML 使用空格缩进表示层级关系，而不是像 XML 或 JSON 那样使用标记或符号。它还支持注释、多行字符串和包含其它文件的引用，这些特性使得 YAML 文件更加易于维护和阅读。</p></li> <li><p>YAML 可以用于许多不同的编程语言和平台，并且已被广泛采用，比如在各种开源项目、配置文件和持续集成/部署工具中使用。）</p></li> <li><p>在YAML中，数据通常以键值对的形式表示，并使用缩进来表示嵌套关系。它还支持数组、列表、映射、多行字符串等数据结构。</p></li></ul> <h4 id="特性"><a href="#特性" class="header-anchor">#</a> 特性</h4> <ol><li>易读性：YAML使用缩进来表示嵌套关系，同时也支持多种数据结构，这些特性使得YAML易读且易于理解。</li> <li>易于编写：YAML使用简洁的语法结构，不需要繁琐的标记或语法，使得编写YAML文件非常方便。</li> <li>可扩展性：YAML支持通过引用和锚点来引用其他部分的数据，这使得YAML文件可以被轻松地扩展和重用。</li> <li>易于与多种编程语言集成：由于YAML的简洁性和可读性，许多编程语言都有相应的YAML解析库和工具，可以方便地将YAML与多种编程语言集成。</li> <li>支持注释：YAML支持注释，开发者可以在文件中添加注释以提高可读性和可维护性。</li> <li>支持多种数据类型：YAML支持多种数据类型，包括字符串、整数、浮点数、布尔值、数组、映射等。</li> <li>可移植性：YAML文件可以在不同的操作系统和平台上使用，并且不会因为平台或操作系统的不同而出现问题。</li></ol> <p>总的来说，YAML是一种灵活、易读、易写、可扩展、易于集成和可移植的数据序列化格式。</p> <p>更多的内容及规范参见：<a href="http://www.yaml.org" target="_blank" rel="noopener noreferrer">http://www.yaml.org<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <h3 id="yaml语法简介"><a href="#yaml语法简介" class="header-anchor">#</a> YAML语法简介</h3> <p>YAML（Yet Another Markup Language）是一种简单易读的数据序列化语言。以下是YAML的语法：</p> <blockquote><h5 id="yaml的基本语法"><a href="#yaml的基本语法" class="header-anchor">#</a> YAML的基本语法：</h5> <ol><li><p>键值对：YAML中的键值对使用冒号“:”来分隔，键值对应用<code>键: 值</code>的格式表示。YAML文件内容是区别大小写的，<code>key: value</code> 的值均需大小写敏感; 多个<code>key: value</code>可同行写也可换行写.</p> <ul><li><p>Key：使用冒号<code>:</code>表示键值对，键必须是<strong>字符串</strong>类型。</p></li> <li><p>Value：YAML中的值可以是标量值、序列或映射。</p> <ul><li><p>标量值：字符串、整数、浮点数、布尔值、Null等</p> <ul><li>字符串：字符串可以使用<strong>单引号</strong>或<strong>双引号</strong>包裹，<em>单引号表示纯量字符串，双引号表示含有转义字符的字符串</em>。</li> <li>整数：十进制、八进制、十六进制等整数。</li> <li>浮点数：包括小数、指数等。</li> <li>布尔值：true或false。</li> <li>空值：null。</li></ul></li> <li><p>序列：用短横线<code>-</code>表示，表示列表或数组</p></li> <li><p>映射：使用冒号<code>:</code>表示键值对，键值对之间使用换行符表示</p></li></ul></li></ul></li> <li><p>注释：使用 hashtag<code>#</code>表示，可以在一行的任何位置添加注释，以#号开头。</p></li> <li><p>缩进：缩进是YAML的一个重要概念。它表示了数据的层次结构和嵌套关系。</p> <ul><li>缩进必须是统一的，不能空格和tab混用; 一般使用空格表示，每个层次结构缩进两个空格。</li> <li>缩进的级别也必须是一致的，同样的缩进代表同样的级别，程序判别配置的级别是通过缩进结合换行来实现的</li></ul></li> <li><p>引用：使用<code>&amp;</code>符号表示引用，使用<code>*</code>符号表示引用的位置。</p></li> <li><p>YAML使用空格来表示缩进，缩进的空格数目必须一致。</p></li></ol></blockquote> <h4 id="列表"><a href="#列表" class="header-anchor">#</a> 列表</h4> <p>List：列表，是一个有序的集合，每个元素以短横线“-”开头，可以包含任意数据类型，例如:</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token comment"># A list of tasty fruits</span>
<span class="token punctuation">-</span> Apple
<span class="token punctuation">-</span> Orange
<span class="token punctuation">-</span> Strawberry
<span class="token punctuation">-</span> Mango
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="字典"><a href="#字典" class="header-anchor">#</a> 字典</h4> <p>字典是一个无序的集合，每个元素包含一个键值对，以冒号“:”分隔，例如：</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">name</span><span class="token punctuation">:</span> John Doe  <span class="token comment"># 字典</span>
<span class="token key atrule">age</span><span class="token punctuation">:</span> <span class="token number">30</span>
<span class="token key atrule">address</span><span class="token punctuation">:</span>  <span class="token comment"># 值是另一个字典</span>
  <span class="token key atrule">city</span><span class="token punctuation">:</span> New York
  <span class="token key atrule">state</span><span class="token punctuation">:</span> NY
  
<span class="token comment"># 也可以将key:value放置于{}中进行表示，用,分隔多个key:value; 示例：</span>
<span class="token punctuation">{</span><span class="token key atrule">name</span><span class="token punctuation">:</span> Jonas Wolfxin<span class="token punctuation">,</span> <span class="token key atrule">job</span><span class="token punctuation">:</span> DevOps Engineer<span class="token punctuation">,</span> <span class="token key atrule">skill</span><span class="token punctuation">:</span> Java<span class="token punctuation">}</span>  <span class="token comment"># 冒号后有空格</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="注释"><a href="#注释" class="header-anchor">#</a> 注释</h4> <p>注释以井号“#”开头，可以出现在任意位置。</p> <h4 id="多行字符串"><a href="#多行字符串" class="header-anchor">#</a> 多行字符串</h4> <p>YAML支持多行字符串，用竖线“|”表示，例如：</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">vbnetCopy codedescription</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token scalar string">
  This is a
  multiline
  string.</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>使用大于号<code>&gt;</code>表示折叠式多行文本块，将换行符替换为空格，但保留文本块末尾的一个换行符。</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">vbnetCopy codedescription</span><span class="token punctuation">:</span> <span class="token punctuation">&gt;</span><span class="token scalar string">
  This is a
  multiline
  string.</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="yaml示例"><a href="#yaml示例" class="header-anchor">#</a> YAML示例</h4> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token comment"># YAML的语法和其他高阶语言类似，并且可以简单表达清单、散列表、标量等数据结构。其结构（Structure）通过空格来展示，序列（Sequence）里的项用&quot;-&quot;来代表，Map里的键值对用&quot;:&quot;分隔. 示例</span>
<span class="token key atrule">name</span><span class="token punctuation">:</span> John Smith
<span class="token key atrule">age</span><span class="token punctuation">:</span> <span class="token number">41</span>
<span class="token key atrule">gender</span><span class="token punctuation">:</span> Male
<span class="token key atrule">spouse</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> Jane Smith
  <span class="token key atrule">age</span><span class="token punctuation">:</span> <span class="token number">37</span>
  <span class="token key atrule">gender</span><span class="token punctuation">:</span> Female
<span class="token key atrule">children</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Jimmy Smith
    <span class="token key atrule">age</span><span class="token punctuation">:</span> <span class="token number">17</span>
    <span class="token key atrule">gender</span><span class="token punctuation">:</span> Male
    
  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Jenny Smith
    <span class="token key atrule">age</span><span class="token punctuation">:</span> <span class="token number">13</span>
    <span class="token key atrule">gender</span><span class="token punctuation">:</span> Female
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h3 id="三种常见的数据交换格式"><a href="#三种常见的数据交换格式" class="header-anchor">#</a> 三种常见的数据交换格式</h3> <p><img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202303270431817.png" alt="よく見るデータ形式(xlsx, csv, xml, json, yaml) の違いについて - Qiita"></p> <blockquote><h5 id="区别"><a href="#区别" class="header-anchor">#</a> 区别</h5> <ul><li>XML使用标记语言，使用开始和结束标签表示元素;</li> <li>JSON使用键值对的方式表示数据;</li> <li>YAML使用缩进来表示层次结构;</li></ul> <h5 id="相似"><a href="#相似" class="header-anchor">#</a> 相似</h5> <p>这些数据格式都支持各种数据类型，如字符串、数字、布尔值、数组和对象等。对于更复杂的数据结构，XML和YAML通常更适合，因为它们支持更复杂的嵌套和结构。对于简单的数据结构，JSON通常更为常用，因为它的语法比较简洁。</p></blockquote> <h2 id="playbook核心元素"><a href="#playbook核心元素" class="header-anchor">#</a> Playbook核心元素</h2> <blockquote><ul><li>Hosts          执行的远程主机列表(应用在哪些主机上)</li> <li>Tasks          任务集</li> <li>Variables      内置变量或自定义变量在playbook中调用</li> <li>Templates模板  可替换模板文件中的变量并实现一些简单逻辑的文件</li> <li>Handlers和notify结合使用，由特定条件触发的操作，满足条件方才执行，否则不执行</li> <li>tags标签       指定某条任务执行，用于选择运行playbook中的部分代码。
ansible具有幂等性，因此会自动跳过没有变化的部分，
即便如此，有些代码为测试其确实没有发生变化的时间依然会非常地长。
此时，如果确信其没有变化，就可以通过tags跳过此些代码片断
ansible-playbook -t tagsname useradd.yml</li></ul></blockquote> <h3 id="playbook基础组件"><a href="#playbook基础组件" class="header-anchor">#</a> playbook基础组件</h3> <blockquote><h4 id="hosts"><a href="#hosts" class="header-anchor">#</a> hosts</h4> <ul><li><p>playbook中的每一个play的目的都是为了让特定主机以某个指定的用户身份执行任务。hosts用于指定要执行指定任务的主机，须事先定义在inventory中; 可以是如下形式：</p> <div class="language- extra-class"><pre><code>```yaml
one.example.com
one.example.com:two.example.com
192.168.1.50
192.168.1.*
Websrvs:dbsrvs       或者，两个组的并集
Websrvs:&amp;dbsrvs      与，两个组的交集
webservers:!phoenix  在websrvs组，但不在dbsrvs组
            
# 示例: 
- hosts: websrvs:dbsrvs
```
</code></pre></div></li></ul> <h4 id="remote-user"><a href="#remote-user" class="header-anchor">#</a> remote_user</h4> <p>​    可用于Host和task中。
​    也可以通过指定其通过sudo的方式在远程主机上执行任务，其可用于play全局或某任务；
​    此外，甚至可以在sudo时使用sudo_user指定sudo时切换的用户</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token punctuation">-</span> <span class="token key atrule">hosts</span><span class="token punctuation">:</span> websrvs
  <span class="token key atrule">remote_user</span><span class="token punctuation">:</span> root   (可省略<span class="token punctuation">,</span>默认为root)  以root身份连接
  
  <span class="token key atrule">tasks</span><span class="token punctuation">:</span>    指定任务
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> test connection
      <span class="token key atrule">ping</span><span class="token punctuation">:</span>
      <span class="token key atrule">remote_user</span><span class="token punctuation">:</span> magedu
      <span class="token key atrule">sudo</span><span class="token punctuation">:</span> yes          <span class="token comment"># 默认sudo为root</span>
      sudo_user<span class="token punctuation">:</span>wang     <span class="token comment"># sudo为wang</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h4 id="tasks"><a href="#tasks" class="header-anchor">#</a> tasks</h4> <p>任务列表task:由多个动作,多个任务组合起来的,每个任务都调用了模块,一个模块一个模块执行</p> <ul><li><p>play的主体部分是task list，task list中的各任务按次序逐个在hosts中指定的所有主机上执行， 即在所有主机上完成第一个任务后，再开始第二个任务;</p></li> <li><p>task的目的是使用指定的参数执行模块，而在模块参数中可以使用变量。模块执行是幂等的，这意味着多次执行是安全的，因为其结果均一致</p></li> <li><p>每个task都应该有其name，用于playbook的执行结果输出，建议其内容能清晰地描述任务执行步骤。如果未提供name，则action的结果将用于输出.</p></li> <li><p>tasks：任务列表
两种格式：
(1) action: module arguments
(2) module: arguments     # 更加简单, 建议使用
注意：shell和command模块后面跟命令，而非key=value</p></li> <li><p>某任务的状态在运行后为changed时，可通过&quot;notify&quot;通知给相应的handlers.</p> <div class="language- extra-class"><pre><code>任务可以通过&quot;tags&quot;打标签，可在ansible-playbook命令上使用-t指定进行调用
示例：
     
```yaml
tasks:
  - name: disable selinux   # 描述
    command: /sbin/setenforce 0   # 模块名: 模块对应的参数
```
</code></pre></div></li></ul></blockquote> <blockquote><p>如果命令或脚本的退出码不为零，可以使用如下方式忽略过程中出现的错误, 继续将.yml文件执行下去</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">tasks</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> run this command and ignore the result
    <span class="token key atrule">shell</span><span class="token punctuation">:</span> /usr/bin/somecommand <span class="token punctuation">|</span><span class="token punctuation">|</span> /bin/true  <span class="token comment"># 如果||之前的命令失败, 则执行 true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>或者使用ignore_errors来忽略错误信息</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">tasks</span><span class="token punctuation">:</span>

  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> run this command and ignore the result
    <span class="token key atrule">shell</span><span class="token punctuation">:</span> /usr/bin/somecommand
    <span class="token key atrule">ignore_errors</span><span class="token punctuation">:</span> <span class="token boolean important">True</span>  <span class="token comment"># 忽略错误</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></blockquote> <p>example.yaml</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token punctuation">---</span>
<span class="token punctuation">-</span> <span class="token key atrule">hosts</span><span class="token punctuation">:</span> netnodes
  <span class="token key atrule">remote_user</span><span class="token punctuation">:</span> root

  <span class="token key atrule">tasks</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> create new file
      <span class="token key atrule">file</span><span class="token punctuation">:</span> name=/root/newfile state=touch
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Create new user
      <span class="token key atrule">user</span><span class="token punctuation">:</span> name=user2 shell=/sbin/nologin
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> install package
      <span class="token key atrule">yum</span><span class="token punctuation">:</span> name=httpd
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> copy httpd index.html
      <span class="token key atrule">copy</span><span class="token punctuation">:</span> src=/var/www/html/index.html dest=/var/www/html/index.html
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> start httpd service
      <span class="token key atrule">service</span><span class="token punctuation">:</span> name=httpd state=started enabled=true
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> allow http access
      <span class="token key atrule">shell</span><span class="token punctuation">:</span> firewall<span class="token punctuation">-</span>cmd <span class="token punctuation">-</span><span class="token punctuation">-</span>add<span class="token punctuation">-</span>service=http <span class="token punctuation">-</span><span class="token punctuation">-</span>permanent
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> reload firewall<span class="token punctuation">-</span>cmd
      <span class="token key atrule">shell</span><span class="token punctuation">:</span> firewall<span class="token punctuation">-</span>cmd <span class="token punctuation">-</span><span class="token punctuation">-</span>reload
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h3 id="运行playbook"><a href="#运行playbook" class="header-anchor">#</a> 运行playbook</h3> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>ansible-playbook <span class="token operator">&lt;</span>filename.yml<span class="token operator">&gt;</span> <span class="token punctuation">..</span>. <span class="token punctuation">[</span>options<span class="token punctuation">]</span>

常见选项
    -C --check       只检测可能会发生的改变，但不真正执行操作 
                     <span class="token punctuation">(</span>只检查语法,如果执行过程中出现问题,-C无法检测出来<span class="token punctuation">)</span>
                     <span class="token punctuation">(</span>执行playbook生成的文件不存在,后面的程序如果依赖这些文件,也会导致检测失败<span class="token punctuation">)</span>
    --list-hosts     列出运行任务的主机
    --list-tags      列出tag  <span class="token punctuation">(</span>列出标签<span class="token punctuation">)</span>
    --list-tasks     列出task <span class="token punctuation">(</span>列出任务<span class="token punctuation">)</span>
    --limit  主机列表 只针对主机列表中的主机执行
    -v -vv -vvv      显示过程

示例
    ansible-playbook hello.yml --check 只检测
    ansible-playbook hello.yml --list-hosts  显示运行任务的主机
    ansible-playbook hello.yml --limit websrvs  限制主机
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token punctuation">[</span>root@Ansible ~<span class="token punctuation">]</span><span class="token comment"># ansible-playbook -C example.yml  # 检查.yml文件是否存在语法错误</span>
<span class="token punctuation">[</span>root@Ansible ~<span class="token punctuation">]</span><span class="token comment"># ansible-playbook example.yml   # 执行 .yml 文件</span>

<span class="token punctuation">[</span>root@Ansible ~<span class="token punctuation">]</span><span class="token comment"># ansible-playbook example.yml --list-hosts</span>
playbook: example.yml
  play <span class="token comment">#1 (netnodes): netnodes  TAGS: []</span>
    pattern: <span class="token punctuation">[</span>u<span class="token string">'netnodes'</span><span class="token punctuation">]</span>
    hosts <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>:
      <span class="token number">192.168</span>.30.101
      <span class="token number">192.168</span>.30.103
<span class="token punctuation">[</span>root@Ansible ~<span class="token punctuation">]</span><span class="token comment"># ansible-playbook example.yml --limit *.101</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h4 id="playbook-vs-shell-scripts"><a href="#playbook-vs-shell-scripts" class="header-anchor">#</a> Playbook VS Shell Scripts</h4> <p>安装httpd</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token comment"># SHELL脚本</span>

<span class="token comment"># 安装Apache</span>
yum <span class="token function">install</span> --quiet -y httpd
<span class="token comment"># 复制配置文件</span>
<span class="token function">cp</span> /tmp/httpd.conf /etc/httpd/conf/httpd.conf
cp/tmp/vhosts.conf /etc/httpd/conf.d/
<span class="token comment"># 启动Apache，并设置开机启动</span>
<span class="token function">service</span> httpd start
<span class="token function">chkconfig</span> httpd on
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><div class="language-sh line-numbers-mode"><pre class="language-sh"><code>---
<span class="token comment"># Playbook定义</span>

- hosts: all
  remote_user: root
  
  tasks:   <span class="token comment"># 一个name对应着一个 action, 不可以一对多</span>
    - name: <span class="token string">&quot;安装Apache&quot;</span>
      yum: <span class="token assign-left variable">name</span><span class="token operator">=</span>httpd       yum模块:安装httpd
    - name: <span class="token string">&quot;复制配置文件&quot;</span>
      copy: <span class="token assign-left variable">src</span><span class="token operator">=</span>/tmp/httpd.conf <span class="token assign-left variable">dest</span><span class="token operator">=</span>/etc/httpd/conf/  copy模块: 拷贝文件
  <span class="token comment">#  - name: &quot;复制配置文件&quot;   # 注释后, 此处语法错误</span>
      copy: <span class="token assign-left variable">src</span><span class="token operator">=</span>/tmp/vhosts.conf <span class="token assign-left variable">dest</span><span class="token operator">=</span>/etc/httpd/conf.d/  
    - name: <span class="token string">&quot;启动Apache，并设置开机启动&quot;</span>
      service: <span class="token assign-left variable">name</span><span class="token operator">=</span>httpd <span class="token assign-left variable">state</span><span class="token operator">=</span>started <span class="token assign-left variable">enabled</span><span class="token operator">=</span>yes   service模块: 启动服务 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h4 id="示例-playbook-创建用户"><a href="#示例-playbook-创建用户" class="header-anchor">#</a> 示例:Playbook 创建用户</h4> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code>示例：sysuser.yml
<span class="token punctuation">---</span>
<span class="token punctuation">-</span> <span class="token key atrule">hosts</span><span class="token punctuation">:</span> all
  <span class="token key atrule">remote_user</span><span class="token punctuation">:</span> root

  <span class="token key atrule">tasks</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> create mysql user
      <span class="token key atrule">user</span><span class="token punctuation">:</span> name=mysql system=yes uid=36
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> create a group
      <span class="token key atrule">group</span><span class="token punctuation">:</span> name=httpd system=yes
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="handlers和notify结合使用触发条件"><a href="#handlers和notify结合使用触发条件" class="header-anchor">#</a> handlers和notify结合使用触发条件</h3> <blockquote><ul><li><p>Handlers 实际上就是一个触发器, 是task列表，这些task与前述的task并没有本质上的不同,用于当关注的资源发生变化时，才会采取一定的操作</p></li> <li><p>Notify此action可用于在每个play的最后被触发，这样可避免多次有改变发生时每次都执行指定的操作，仅在所有的变化发生完成后一次性地执行指定操作。</p></li> <li><p>在notify中列出的操作称为handler，也即notify中调用handler中定义的操作</p></li></ul></blockquote> <h4 id="playbook中handlers使用"><a href="#playbook中handlers使用" class="header-anchor">#</a> Playbook中handlers使用</h4> <p>默认情况下, 对于未更改的操作, ansible-playbook 会跳过执行; 所以需要notify和handler结合使用, 触发action.</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token punctuation">---</span>
<span class="token punctuation">-</span> <span class="token key atrule">hosts</span><span class="token punctuation">:</span> netnodes
  <span class="token key atrule">remote_user</span><span class="token punctuation">:</span> root

  <span class="token key atrule">tasks</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> create new file
      <span class="token key atrule">file</span><span class="token punctuation">:</span> name=/root/newfile state=touch
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Create new user
      <span class="token key atrule">user</span><span class="token punctuation">:</span> name=user2 shell=/sbin/nologin
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> install package
      <span class="token key atrule">yum</span><span class="token punctuation">:</span> name=httpd
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> copy httpd index.html
      <span class="token key atrule">copy</span><span class="token punctuation">:</span> src=/var/www/html/index.html dest=/var/www/html/index.html
      <span class="token key atrule">notify</span><span class="token punctuation">:</span> restart httpd   <span class="token comment"># 触发对应的 handler</span>
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> start httpd service
      <span class="token key atrule">service</span><span class="token punctuation">:</span> name=httpd state=started enabled=true
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> allow http access
      <span class="token key atrule">shell</span><span class="token punctuation">:</span> firewall<span class="token punctuation">-</span>cmd <span class="token punctuation">-</span><span class="token punctuation">-</span>add<span class="token punctuation">-</span>service=http <span class="token punctuation">-</span><span class="token punctuation">-</span>permanent
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> reload firewall<span class="token punctuation">-</span>cmd
      <span class="token key atrule">shell</span><span class="token punctuation">:</span> firewall<span class="token punctuation">-</span>cmd <span class="token punctuation">-</span><span class="token punctuation">-</span>reload
      
  <span class="token key atrule">handlers</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> restart httpd
      <span class="token key atrule">service</span><span class="token punctuation">:</span> name=httpd state=restarted
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h4 id="在notify中定义一个notify并触发多个handler"><a href="#在notify中定义一个notify并触发多个handler" class="header-anchor">#</a> 在notify中定义一个notify并触发多个handler</h4> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token punctuation">---</span>
<span class="token punctuation">-</span> <span class="token key atrule">hosts</span><span class="token punctuation">:</span> websrvs
  <span class="token key atrule">remote_user</span><span class="token punctuation">:</span> root
  
  <span class="token key atrule">tasks</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> add group nginx
      <span class="token key atrule">tags</span><span class="token punctuation">:</span> user
      <span class="token key atrule">user</span><span class="token punctuation">:</span> name=nginx state=present
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> add user nginx
      <span class="token key atrule">user</span><span class="token punctuation">:</span> name=nginx state=present group=nginx
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Install Nginx
      <span class="token key atrule">yum</span><span class="token punctuation">:</span> name=nginx state=present
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> config
      <span class="token key atrule">copy</span><span class="token punctuation">:</span> src=/root/config.txt dest=/etc/nginx/nginx.conf
      <span class="token key atrule">notify</span><span class="token punctuation">:</span>   <span class="token comment"># 在notify中定义并触发多个handler</span>
        <span class="token punctuation">-</span> Restart Nginx
        <span class="token punctuation">-</span> Check Nginx Process
  
  <span class="token key atrule">handlers</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Restart Nginx
      <span class="token key atrule">service</span><span class="token punctuation">:</span> name=nginx state=restarted enabled=yes
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Check Nginx process
      <span class="token key atrule">shell</span><span class="token punctuation">:</span> killall <span class="token punctuation">-</span>0 nginx <span class="token punctuation">&gt;</span> /tmp/nginx.log
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h4 id="多个相同的notify对应一个handler"><a href="#多个相同的notify对应一个handler" class="header-anchor">#</a> 多个相同的notify对应一个handler</h4> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token punctuation">---</span>
<span class="token comment"># heartbeat.yaml</span>
<span class="token punctuation">-</span> <span class="token key atrule">hosts</span><span class="token punctuation">:</span> hbhosts
  <span class="token key atrule">remote_user</span><span class="token punctuation">:</span> root
  
  <span class="token key atrule">tasks</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> ensure heartbeat latest version
      <span class="token key atrule">yum</span><span class="token punctuation">:</span> name=heartbeat state=present
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> authkeys configure file
      <span class="token key atrule">copy</span><span class="token punctuation">:</span> src=/root/hb_conf/authkeys dest=/etc/ha.d/authkeys
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> authkeys mode 600
      <span class="token key atrule">file</span><span class="token punctuation">:</span> path=/etc/ha.d/authkeys mode=600
      <span class="token key atrule">notify</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> restart heartbeat
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> ha.cf configure file
      <span class="token key atrule">copy</span><span class="token punctuation">:</span> src=/root/hb_conf/ha.cf dest=/etc/ha.d/ha.cf
      <span class="token key atrule">notify</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> restart heartbeat
        
  <span class="token key atrule">handlers</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> restart heartbeat
      <span class="token key atrule">service</span><span class="token punctuation">:</span> name=heartbeat state=restarted
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h3 id="playbook中tags使用"><a href="#playbook中tags使用" class="header-anchor">#</a> Playbook中tags使用</h3> <p>tags: 添加标签</p> <ul><li>可以指定某一个任务添加一个标签,添加标签以后,想执行某个动作可以做出挑选来执行</li> <li>多个任务可以使用同一个标签</li></ul> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token punctuation">---</span>
<span class="token comment"># 示例：httpd.yml</span>
<span class="token punctuation">-</span> <span class="token key atrule">hosts</span><span class="token punctuation">:</span> websrvs
  <span class="token key atrule">remote_user</span><span class="token punctuation">:</span> root
  
  <span class="token key atrule">tasks</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Install httpd
      <span class="token key atrule">yum</span><span class="token punctuation">:</span> name=httpd state=present
      <span class="token key atrule">tags</span><span class="token punctuation">:</span> install_conf <span class="token comment"># 添加tag键值对</span>
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Install configure file
      <span class="token key atrule">copy</span><span class="token punctuation">:</span> src=files/httpd.conf dest=/etc/httpd/conf/
      <span class="token key atrule">tags</span><span class="token punctuation">:</span> install_conf <span class="token comment"># 添加tag键值对</span>
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> start httpd service
      <span class="token key atrule">tags</span><span class="token punctuation">:</span> start_service  <span class="token comment"># 添加tag键值对</span>
      <span class="token key atrule">service</span><span class="token punctuation">:</span> name=httpd state=started enabled=yes
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><div class="language-sh line-numbers-mode"><pre class="language-sh"><code>ansible-playbook –t install_conf,start_service httpd.yml   <span class="token comment"># 指定执行install,conf 两个标签对应的task</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="对整个playbook添加tags"><a href="#对整个playbook添加tags" class="header-anchor">#</a> 对整个playbook添加tags</h4> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token punctuation">---</span>
<span class="token punctuation">-</span> <span class="token key atrule">hosts</span><span class="token punctuation">:</span> testsrv
  <span class="token key atrule">remote_user</span><span class="token punctuation">:</span> root
  <span class="token key atrule">tags</span><span class="token punctuation">:</span> inshttpd   <span class="token comment"># 对整个playbook添加tags</span>
  <span class="token key atrule">tasks</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Install httpd
      <span class="token key atrule">yum</span><span class="token punctuation">:</span> name=httpd state=present
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Install configure file
      <span class="token key atrule">copy</span><span class="token punctuation">:</span> src=files/httpd.conf dest=/etc/httpd/conf/
      <span class="token key atrule">tags</span><span class="token punctuation">:</span> rshttpd
      <span class="token key atrule">notify</span><span class="token punctuation">:</span> restart httpd
  <span class="token key atrule">handlers</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> restart httpd
      <span class="token key atrule">service</span><span class="token punctuation">:</span> name=httpd status=restarted
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><div class="language-sh line-numbers-mode"><pre class="language-sh"><code>ansible-playbook –t inshttpd httpd2.yml
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="playbook中变量的使用"><a href="#playbook中变量的使用" class="header-anchor">#</a> Playbook中变量的使用</h3> <p>变量名：仅能由字母、数字和下划线组成，且只能以字母开头
变量来源：</p> <ul><li><p><strong>Setup</strong> module 远程主机的所有变量都可直接调用 (系统自带变量), setup模块可以实现系统中很多系统信息的显示, 可以返回每个主机的系统信息包括:版本、主机名、cpu、内存</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token comment"># 查看所有的系统变量</span>
ansible *.102 -m setup <span class="token operator">|</span> <span class="token function">less</span> <span class="token comment"># 显示全部系统变量</span>

ansible all -m setup -a <span class="token string">'filter=ansible_nodename'</span>     <span class="token comment"># 查询主机名</span>
ansible all -m setup -a <span class="token string">'filter=ansible_fqdn'</span>     <span class="token comment"># 查询主机名</span>

ansible all -m setup -a <span class="token string">'filter=ansible_memtotal_mb'</span>  <span class="token comment"># 查询主机内存大小</span>
ansible all -m setup -a <span class="token string">'filter=ansible_distribution_major_version'</span>  
ansible all -m setup -a <span class="token string">'filter=ansible_processor_vcpus'</span> <span class="token comment"># 查询主机cpu个数</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></li> <li><p>在playbook中引用变量: <code></code> , 以及变量定义</p></li> <li><p>在/etc/ansible/hosts(主机清单)中定义变量:</p> <ul><li>单主机变量：主机组中主机单独定义，优先级高于主机组变量;</li> <li>主机组变量：针对主机组中所有主机定义统一变量(一组主机的同一类别);</li></ul></li> <li><p>通过命令行指定进行变量赋值，优先级最高
ansible-playbook –e varname=value</p></li> <li><p>在独立的变量YAML文件中定义</p></li> <li><p>在role中定义</p></li></ul> <h4 id="使用系统变量"><a href="#使用系统变量" class="header-anchor">#</a> 使用系统变量</h4> <blockquote><p>Facts：是由正在通信的远程目标主机发回的信息，这些信息被保存在ansible变量中。要获取指定的远程主机所支持的所有facts，可使用如下命令进行 <code>ansible all -m setup</code>;</p></blockquote> <p>var.yml</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token punctuation">---</span>
<span class="token punctuation">-</span> <span class="token key atrule">hosts</span><span class="token punctuation">:</span> appsrvs
  <span class="token key atrule">remote_user</span><span class="token punctuation">:</span> root
  
  <span class="token key atrule">tasks</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Create ansible_log folder
      <span class="token key atrule">file</span><span class="token punctuation">:</span>
        <span class="token key atrule">path</span><span class="token punctuation">:</span> /var/log/ansible_log/
        <span class="token key atrule">state</span><span class="token punctuation">:</span> directory
        <span class="token key atrule">mode</span><span class="token punctuation">:</span> <span class="token string">&quot;0775&quot;</span>
        <span class="token key atrule">recurse</span><span class="token punctuation">:</span> yes
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> create log file
      <span class="token key atrule">file</span><span class="token punctuation">:</span> name=/var/log/<span class="token punctuation">{</span><span class="token punctuation">{</span> ansible_fqdn <span class="token punctuation">}</span><span class="token punctuation">}</span>.log state=touch
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token punctuation">[</span>root@Ansible ~<span class="token punctuation">]</span><span class="token comment"># ansible-playbook var.yml -C</span>
<span class="token punctuation">[</span>root@Ansible ~<span class="token punctuation">]</span><span class="token comment"># ansible appsrvs -a 'ls /var/log/*.log</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="在playbook中定义变量"><a href="#在playbook中定义变量" class="header-anchor">#</a> 在playbook中定义变量</h4> <h5 id="方式一"><a href="#方式一" class="header-anchor">#</a> 方式一</h5> <p>app.yml</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token punctuation">---</span>
<span class="token punctuation">-</span> <span class="token key atrule">hosts</span><span class="token punctuation">:</span> netnodes
  <span class="token key atrule">remote_user</span><span class="token punctuation">:</span> root
  
  <span class="token key atrule">tasks</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> install package
      <span class="token key atrule">yum</span><span class="token punctuation">:</span> name=<span class="token punctuation">{</span><span class="token punctuation">{</span> pkg_name <span class="token punctuation">}</span><span class="token punctuation">}</span>
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> start service
      <span class="token key atrule">service</span><span class="token punctuation">:</span> name=<span class="token punctuation">{</span><span class="token punctuation">{</span> pkg_name <span class="token punctuation">}</span><span class="token punctuation">}</span> state=started enabled=yes
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>变量赋值: <code>ansible-playbook -e 'Vari_Name=Value' ...</code></p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token punctuation">[</span>root@Ansible ~<span class="token punctuation">]</span><span class="token comment"># ansible-playbook app.yml -e 'pkg_name=vsftpd' -C </span>
<span class="token punctuation">[</span>root@Ansible ~<span class="token punctuation">]</span><span class="token comment"># ansible-playbook app.yml -e 'pkg_name=vsftpd'</span>

<span class="token comment"># 查看是否安装成功</span>
<span class="token punctuation">[</span>root@Ansible ~<span class="token punctuation">]</span><span class="token comment"># ansible all -a 'rpm -q vsftpd'   # 查看是否安装 vsftpd</span>

<span class="token comment"># 查看vsftpd 服务端口是否开启</span>
<span class="token punctuation">[</span>root@Ansible ~<span class="token punctuation">]</span><span class="token comment"># ansible netnodes -a 'ss -ntl' | grep 21</span>

<span class="token comment"># 卸载 vsftpd</span>
<span class="token punctuation">[</span>root@Ansible ~<span class="token punctuation">]</span><span class="token comment"># ansible all -m yum -a 'name=vsftpd state=removed'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h5 id="方式二-直接在-playbook-中赋值"><a href="#方式二-直接在-playbook-中赋值" class="header-anchor">#</a> 方式二: 直接在 Playbook 中赋值</h5> <p>示例：creat_user.yml</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token punctuation">---</span>
<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Create user and add to group
  <span class="token key atrule">hosts</span><span class="token punctuation">:</span> all
  <span class="token key atrule">become</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
  <span class="token key atrule">vars</span><span class="token punctuation">:</span>
    <span class="token key atrule">username</span><span class="token punctuation">:</span> user1
    <span class="token key atrule">groupname</span><span class="token punctuation">:</span> group1
  <span class="token key atrule">tasks</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Create group
      <span class="token key atrule">group</span><span class="token punctuation">:</span>
        <span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token string">&quot;{{ groupname }}&quot;</span>
        <span class="token key atrule">state</span><span class="token punctuation">:</span> present
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Create user
      <span class="token key atrule">user</span><span class="token punctuation">:</span>
        <span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token string">&quot;{{ username }}&quot;</span>
        <span class="token key atrule">group</span><span class="token punctuation">:</span> <span class="token string">&quot;{{ groupname }}&quot;</span>
        <span class="token key atrule">createhome</span><span class="token punctuation">:</span> yes
        <span class="token key atrule">shell</span><span class="token punctuation">:</span> /bin/bash
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Set user password
      <span class="token key atrule">user</span><span class="token punctuation">:</span>
        <span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token string">&quot;{{ username }}&quot;</span>
        <span class="token key atrule">password</span><span class="token punctuation">:</span> <span class="token string">&quot;{{ 'mypassword' | password_hash('sha512') }}&quot;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><div class="language-sh line-numbers-mode"><pre class="language-sh"><code>ansible-playbook creat_user.yml

ansible all -a <span class="token string">'id user1'</span>     <span class="token comment"># 查看指定用户是否存在</span>
ansible all -a <span class="token string">'getent group group1'</span>  <span class="token comment"># 查看指定用户组是否存在</span>

<span class="token punctuation">[</span>root@Ansible ~<span class="token punctuation">]</span><span class="token comment"># ssh 'user1@192.168.30.103'</span>
user1@192.168.30.103<span class="token string">'s password:

ansible all -a '</span><span class="token function">userdel</span> -r user1<span class="token string">'  # 删除指定用户, -r 同时删除其家目录和邮箱
ansible all -a '</span><span class="token function">groupdel</span> group1'
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><div class="language-sh line-numbers-mode"><pre class="language-sh"><code>ansible-playbook -e <span class="token string">'username=user2 groupname=group2'</span> creat_user.yml
ansible -a <span class="token string">'id user1'</span> all    <span class="token comment"># 查看指定用户是否存在</span>
ansible -a <span class="token string">'id user2'</span> all    <span class="token comment"># 查看指定用户是否存在</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><blockquote><p><strong>说明:</strong> 通过命令行赋值变量, 覆盖了Playbook中的变量赋值, 具有更高的优先级</p></blockquote> <h4 id="inventory中定义变量"><a href="#inventory中定义变量" class="header-anchor">#</a> Inventory中定义变量</h4> <blockquote><p>Inventory中定义的变量, 优先级比 Playbook 中的优先级更低</p></blockquote> <h5 id="单主机变量"><a href="#单主机变量" class="header-anchor">#</a> 单主机变量</h5> <blockquote><p>单主机变量 的优先级比 主机组变量 更高</p></blockquote> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token comment"># vim /etc/ansible/hosts</span>
<span class="token punctuation">[</span>appsrvs<span class="token punctuation">]</span>
<span class="token number">192.168</span>.30.101 <span class="token assign-left variable">http_port</span><span class="token operator">=</span><span class="token number">81</span> <span class="token assign-left variable">node_name</span><span class="token operator">=</span>www
<span class="token number">192.168</span>.30.102 <span class="token assign-left variable">http_port</span><span class="token operator">=</span><span class="token number">82</span> <span class="token assign-left variable">node_name</span><span class="token operator">=</span>web
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>appsrvs.yml</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token punctuation">---</span>
<span class="token punctuation">-</span> <span class="token key atrule">hosts</span><span class="token punctuation">:</span> appsrvs
  <span class="token key atrule">remote_user</span><span class="token punctuation">:</span> root
  
  <span class="token key atrule">tasks</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Change Hostname
      <span class="token key atrule">hostname</span><span class="token punctuation">:</span> name=<span class="token punctuation">{</span><span class="token punctuation">{</span> node_name <span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token comment"># 直接使用 hostname 模块, 调用inventory的主机变量</span>
ansible appsrvs -m <span class="token function">hostname</span> -a <span class="token string">'name={{ node_name }}{{ http_port }}'</span>  <span class="token comment"># 更改主机名为各自被定义的变量 </span>

<span class="token comment"># 执行yml文件中的hostname模块, 调用inventory的主机变量</span>
<span class="token punctuation">[</span>root@Ansible ~<span class="token punctuation">]</span><span class="token comment"># ansible-playbook appsrvs.yml</span>

<span class="token punctuation">[</span>root@Ansible ~<span class="token punctuation">]</span><span class="token comment"># ansible appsrvs -a 'hostname'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h5 id="主机组变量"><a href="#主机组变量" class="header-anchor">#</a> 主机组变量</h5> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token comment">#  vim /etc/ansible/hosts</span>
<span class="token punctuation">[</span>appsrvs<span class="token punctuation">]</span>  <span class="token comment"># 单主机变量(优先级比 主机组变量更高)</span>
<span class="token number">192.168</span>.30.101 <span class="token assign-left variable">http_port</span><span class="token operator">=</span><span class="token number">81</span> <span class="token assign-left variable">node_name</span><span class="token operator">=</span>www
<span class="token number">192.168</span>.30.102 <span class="token assign-left variable">http_port</span><span class="token operator">=</span><span class="token number">82</span> <span class="token assign-left variable">node_name</span><span class="token operator">=</span>web

<span class="token punctuation">[</span>appsrvs:vars<span class="token punctuation">]</span>   <span class="token comment"># 主机组变量</span>
<span class="token assign-left variable">domain_name</span><span class="token operator">=</span>magedu.com
<span class="token assign-left variable">http_port</span><span class="token operator">=</span><span class="token number">80</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>appsrvs.yml</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token punctuation">---</span>
<span class="token punctuation">-</span> <span class="token key atrule">hosts</span><span class="token punctuation">:</span> appsrvs
  <span class="token key atrule">remote_user</span><span class="token punctuation">:</span> root
  
  <span class="token key atrule">tasks</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Change Hostname
      <span class="token key atrule">hostname</span><span class="token punctuation">:</span> name=<span class="token punctuation">{</span><span class="token punctuation">{</span> node_name <span class="token punctuation">}</span><span class="token punctuation">}</span>.<span class="token punctuation">{</span><span class="token punctuation">{</span> domain_name <span class="token punctuation">}</span><span class="token punctuation">}</span>.<span class="token punctuation">{</span><span class="token punctuation">{</span> http_port <span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token punctuation">[</span>root@Ansible ~<span class="token punctuation">]</span><span class="token comment"># ansible-playbook appsrvs.yml</span>
<span class="token punctuation">[</span>root@Ansible ~<span class="token punctuation">]</span><span class="token comment"># ansible appsrvs -a 'hostname</span>
<span class="token number">192.168</span>.30.102 <span class="token operator">|</span> CHANGED <span class="token operator">|</span> <span class="token assign-left variable">rc</span><span class="token operator">=</span><span class="token number">0</span> <span class="token operator">&gt;&gt;</span>
web.magedu.com.82
<span class="token number">192.168</span>.30.101 <span class="token operator">|</span> CHANGED <span class="token operator">|</span> <span class="token assign-left variable">rc</span><span class="token operator">=</span><span class="token number">0</span> <span class="token operator">&gt;&gt;</span>
www.magedu.com.81
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h5 id="主机组嵌套"><a href="#主机组嵌套" class="header-anchor">#</a> 主机组嵌套</h5> <p>inventory中，组还可以包含其它的组，并且也可以向组中的主机指定变量。这些变量只能在ansible-playbook中使用，而ansible命令不支持</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token comment">#  vim /etc/ansible/hosts</span>
<span class="token punctuation">[</span>apache<span class="token punctuation">]</span>
httpd1.magedu.com
httpd2.magedu.com

<span class="token punctuation">[</span>nginx<span class="token punctuation">]</span>
ngx1.magedu.com
ngx2.magedu.com

<span class="token punctuation">[</span>websrvs:children<span class="token punctuation">]</span>   <span class="token comment"># 包含 子组</span>
apache
nginx

<span class="token punctuation">[</span>webservers:vars<span class="token punctuation">]</span>
<span class="token assign-left variable">ntp_server</span><span class="token operator">=</span>ntp.magedu.com
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h4 id="invertory参数"><a href="#invertory参数" class="header-anchor">#</a> invertory参数</h4> <p>inventory参数:</p> <ul><li>ansible基于ssh连接inventory中指定的远程主机时，还可以通过参数指定其交互方式；</li> <li>用于定义ansible远程连接目标主机时使用的参数，而非传递给playbook的变量</li></ul> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token comment"># vim /etc/ansible/hosts</span>
<span class="token punctuation">[</span>websrvs<span class="token punctuation">]</span>
<span class="token number">192.168</span>.0.1 <span class="token assign-left variable">ansible_ssh_user</span><span class="token operator">=</span>root <span class="token assign-left variable">ansible_ssh_pass</span><span class="token operator">=</span>magedu
<span class="token number">192.168</span>.0.2 <span class="token assign-left variable">ansible_ssh_user</span><span class="token operator">=</span>root <span class="token assign-left variable">ansible_ssh_pass</span><span class="token operator">=</span>magedu
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token comment"># 这些参数如下所示：</span>
ansible_ssh_host  <span class="token comment"># The name of the host to connect to, if different from the alias you wishto give to it.</span>

ansible_ssh_port  <span class="token comment"># The ssh port number, if not 22</span>

ansible_ssh_user
The default <span class="token function">ssh</span> user name to use.

ansible_ssh_pass  <span class="token comment"># The ssh password to use (this is insecure, we strongly recommendusing --ask-pass or SSH keys)</span>

ansible_sudo_pass  <span class="token comment"># The sudo password to use (this is insecure, we strongly recommendusing --ask-sudo-pass)</span>

ansible_connection  <span class="token comment"># Connection type of the host. Candidates are local, ssh or paramiko. The default is paramiko before Ansible 1.2, and 'smart' afterwards which detects whether usage of 'ssh' would be feasible based on whether ControlPersist is supported.</span>

ansible_ssh_private_key_file  <span class="token comment"># Private key file used by ssh. Useful if using multiple keys and you don't want to use SSH agent.</span>

ansible_shell_type  <span class="token comment"># The shell type of the target system. By default commands are formatted using 'sh'-style syntax by default. Setting this to 'csh' or 'fish' will cause commands executed on target systems to follow those shell's syntax instead.</span>

ansible_python_interpreter  <span class="token comment"># The target host python path. This is useful for systems with more than one Python or not located at &quot;/usr/bin/python&quot; such as \*BSD, or where /usr/bin/python is not a 2.X series Python. We do not use the &quot;/usr/bin/env&quot; mechanism as that requires the remote user's path to be set right and also assumes the &quot;python&quot; executable is named python,where the executable might be named something like &quot;python26&quot;.</span>

ansible<span class="token punctuation">\</span>_<span class="token punctuation">\</span>*<span class="token punctuation">\</span>_interpreter   <span class="token comment"># Works for anything such as ruby or perl and works just like ansible_python_interpreter. This replaces shebang of modules which will run on that host.</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h4 id="独立的变量文件-yml"><a href="#独立的变量文件-yml" class="header-anchor">#</a> 独立的变量文件.yml</h4> <blockquote><ul><li>将变量写进单独的YAML文件后, 被Playbook引用</li></ul></blockquote> <p>vars.yml</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>var1: httpd
var2: vsftpd    
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>appinstal.yml</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token punctuation">---</span>
<span class="token punctuation">-</span> <span class="token key atrule">hosts</span><span class="token punctuation">:</span> appsrvs
  <span class="token key atrule">remote_user</span><span class="token punctuation">:</span> root
  <span class="token key atrule">vars_files</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> /root/vars.yml

  <span class="token key atrule">tasks</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Install package
    <span class="token key atrule">yum</span><span class="token punctuation">:</span> name=<span class="token punctuation">{</span><span class="token punctuation">{</span> var1 <span class="token punctuation">}</span><span class="token punctuation">}</span>

  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Create File
    <span class="token key atrule">file</span><span class="token punctuation">:</span> name=/root/<span class="token punctuation">{</span><span class="token punctuation">{</span> var2 <span class="token punctuation">}</span><span class="token punctuation">}</span>.log state=touch
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token punctuation">[</span>root@Ansible ~<span class="token punctuation">]</span><span class="token comment"># ansible-playbook appinstal.yml -C</span>
<span class="token punctuation">[</span>root@Ansible ~<span class="token punctuation">]</span><span class="token comment"># ansible-playbook appinstal.yml</span>

<span class="token comment"># 验证</span>
<span class="token punctuation">[</span>root@Ansible ~<span class="token punctuation">]</span><span class="token comment"># ansible appsrvs -a 'ls /root/*.log'</span>
<span class="token punctuation">[</span>root@Ansible ~<span class="token punctuation">]</span><span class="token comment"># ansible appsrvs -a 'rpm -q httpd'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></div></div> <!----> <div class="page-edit"><div class="edit-link"><a href="https://github.com/Jonas-Wolfxin/Jonas-Wolfxin.github.io/edit/main/docs/40.网络运维/15.Ansible/07.Playbook.md" target="_blank" rel="noopener noreferrer">编辑此页</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----> <div class="last-updated"><span class="prefix">last Updated:</span> <span class="time">2023/03/31, 05:14:22</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/167cd7/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">常用模块</div></a> <a href="/pages/c0c5f0/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">Template</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/pages/167cd7/" class="prev">常用模块</a></span> <span class="next"><a href="/pages/c0c5f0/">Template</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/pages/32db2d/"><div>
            Layer 3 Forwarding
            <!----></div></a> <span class="date">06-07</span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/6b8f16/"><div>
            Layer 2 Forwarding
            <!----></div></a> <span class="date">06-06</span></dt></dl><dl><dd>03</dd> <dt><a href="/pages/fe5ceb/"><div>
            Virtual Routing and Forwarding
            <!----></div></a> <span class="date">05-16</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="https://github.com/Jonas-Wolfxin" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://gitee.com/Jonas-Wolfxin" title="Gitee" target="_blank" class="iconfont icon-gitee"></a><a href="https://cdn.jsdelivr.net/gh/Wolfxin/MyPicGo/img/202206100005451.jpg" title="Wechat: @Jonas_Wolfxin" target="_blank" class="iconfont icon-weixin"></a><a href="http://wpa.qq.com/msgrd?v=3&amp;uin=1914303043&amp;site=qq&amp;menu=yes" title="QQ: 1914303043" target="_blank" class="iconfont icon-QQ"></a><a href="mailto:wolfxin@outlook.com" title="联系我" target="_blank" class="iconfont icon-youjian"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2021-2023
    <span>Jonas Wolfxin's Blog</span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <div class="body-bg" style="background:url() center center / cover no-repeat;opacity:0.5;"></div> <!----> <!----></div><div class="global-ui"><div></div><div></div><div></div><div></div><!----><!----><APlayer audio="" fixed="true" mini="true" theme="#b7daff" loop="loop" order="list" preload="auto" volume="0.7" mutex="true" lrc-type="0" list-max-height="250" storage-name="vuepress-plugin-meting" id="aplayer-fixed"></APlayer><div></div></div></div>
    <script src="/assets/js/app.d858ddbb.js" defer></script><script src="/assets/js/2.309e711a.js" defer></script><script src="/assets/js/175.50c5731b.js" defer></script><script src="/assets/js/16.acd3428d.js" defer></script><script src="/assets/js/8.5b4b6c67.js" defer></script><script src="/assets/js/10.58f97cc7.js" defer></script><script src="/assets/js/17.0b7a5267.js" defer></script>
  </body>
</html>
