<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Dynamic Routing P2 OSPF | Jonas Wolfxin Blog</title>
    <meta name="generator" content="VuePress 1.8.0">
    <link rel="shortcut icon" href="/img/favicon.ico">
    <link rel="stylesheet" href="//at.alicdn.com/t/font_3114978_qe0b39no76.css">
    <noscript><meta http-equiv="refresh" content="0; url=https://www.youngkbt.cn/noscript/"><style>.theme-vdoing-content { display:none }</noscript>
    <script>var _hmt = _hmt || [];
          (function() {
            var hm = document.createElement("script");
            hm.src = "https://hm.baidu.com/hm.js?267c5680c2ffb468ca29c45ffe6801da"; 
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
          })();
          </script>
    <meta name="description" content="Jonas Wolfxin个人博客, VuePress搭建, 使用了 Vdoing 主题, 学习Java, Web, 框架, 微服务, 工具, 前端等相关知识, 记录生活和技术路程, 同时分享编程技巧。">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <meta name="keywords" content="Jonas Wolfxin个人博客, VuePress搭建, 学习Java、Web、框架、微服务、工具、前端等相关知识, 记录生活和技术路程。">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/assets/css/0.styles.7d3fc896.css" as="style"><link rel="preload" href="/assets/js/app.d858ddbb.js" as="script"><link rel="preload" href="/assets/js/2.309e711a.js" as="script"><link rel="preload" href="/assets/js/140.f85c3c58.js" as="script"><link rel="preload" href="/assets/js/16.acd3428d.js" as="script"><link rel="preload" href="/assets/js/8.5b4b6c67.js" as="script"><link rel="preload" href="/assets/js/10.58f97cc7.js" as="script"><link rel="preload" href="/assets/js/17.0b7a5267.js" as="script"><link rel="prefetch" href="/assets/js/100.a245150c.js"><link rel="prefetch" href="/assets/js/101.dc21b366.js"><link rel="prefetch" href="/assets/js/102.d5a6dfd2.js"><link rel="prefetch" href="/assets/js/103.7675e438.js"><link rel="prefetch" href="/assets/js/104.08bff44e.js"><link rel="prefetch" href="/assets/js/105.8bf552ad.js"><link rel="prefetch" href="/assets/js/106.b3388dcc.js"><link rel="prefetch" href="/assets/js/107.708d16a8.js"><link rel="prefetch" href="/assets/js/108.8d67c3a1.js"><link rel="prefetch" href="/assets/js/109.adb072ef.js"><link rel="prefetch" href="/assets/js/11.1cff9f55.js"><link rel="prefetch" href="/assets/js/110.6a33e945.js"><link rel="prefetch" href="/assets/js/111.5b6daef7.js"><link rel="prefetch" href="/assets/js/112.30fa856b.js"><link rel="prefetch" href="/assets/js/113.2bea19a6.js"><link rel="prefetch" href="/assets/js/114.78693b98.js"><link rel="prefetch" href="/assets/js/115.24b2f36f.js"><link rel="prefetch" href="/assets/js/116.121c60d7.js"><link rel="prefetch" href="/assets/js/117.c2a343f1.js"><link rel="prefetch" href="/assets/js/118.4f472067.js"><link rel="prefetch" href="/assets/js/119.24255046.js"><link rel="prefetch" href="/assets/js/12.bca3c221.js"><link rel="prefetch" href="/assets/js/120.c049d4ee.js"><link rel="prefetch" href="/assets/js/121.27c7097d.js"><link rel="prefetch" href="/assets/js/122.89ae0c7e.js"><link rel="prefetch" href="/assets/js/123.92ff168d.js"><link rel="prefetch" href="/assets/js/124.42567e10.js"><link rel="prefetch" href="/assets/js/125.3bd92459.js"><link rel="prefetch" href="/assets/js/126.ce3b5ff1.js"><link rel="prefetch" href="/assets/js/127.62073e16.js"><link rel="prefetch" href="/assets/js/128.1e61e62d.js"><link rel="prefetch" href="/assets/js/129.1abfd9a0.js"><link rel="prefetch" href="/assets/js/13.fd509ce7.js"><link rel="prefetch" href="/assets/js/130.fd10656f.js"><link rel="prefetch" href="/assets/js/131.739a70c7.js"><link rel="prefetch" href="/assets/js/132.aead2e49.js"><link rel="prefetch" href="/assets/js/133.c996494c.js"><link rel="prefetch" href="/assets/js/134.3f032f05.js"><link rel="prefetch" href="/assets/js/135.c35c5612.js"><link rel="prefetch" href="/assets/js/136.b1a52d43.js"><link rel="prefetch" href="/assets/js/137.f6c998f0.js"><link rel="prefetch" href="/assets/js/138.5165a511.js"><link rel="prefetch" href="/assets/js/139.84e0898b.js"><link rel="prefetch" href="/assets/js/14.9a0c9450.js"><link rel="prefetch" href="/assets/js/141.1b18b352.js"><link rel="prefetch" href="/assets/js/142.61b694c2.js"><link rel="prefetch" href="/assets/js/143.ca56fc45.js"><link rel="prefetch" href="/assets/js/144.634fc96a.js"><link rel="prefetch" href="/assets/js/145.7db28ded.js"><link rel="prefetch" href="/assets/js/146.0e801c74.js"><link rel="prefetch" href="/assets/js/147.26faa263.js"><link rel="prefetch" href="/assets/js/148.927832d5.js"><link rel="prefetch" href="/assets/js/149.8755eb42.js"><link rel="prefetch" href="/assets/js/15.d3755cc5.js"><link rel="prefetch" href="/assets/js/150.906609e5.js"><link rel="prefetch" href="/assets/js/151.7a52439b.js"><link rel="prefetch" href="/assets/js/152.c822b1fb.js"><link rel="prefetch" href="/assets/js/153.593575cc.js"><link rel="prefetch" href="/assets/js/154.2a16d8e7.js"><link rel="prefetch" href="/assets/js/155.6a18c733.js"><link rel="prefetch" href="/assets/js/156.bb65d909.js"><link rel="prefetch" href="/assets/js/157.862f6419.js"><link rel="prefetch" href="/assets/js/158.db76ed26.js"><link rel="prefetch" href="/assets/js/159.0f0b1ee8.js"><link rel="prefetch" href="/assets/js/160.8f421d08.js"><link rel="prefetch" href="/assets/js/161.4a521888.js"><link rel="prefetch" href="/assets/js/162.601dbfca.js"><link rel="prefetch" href="/assets/js/163.d76b166d.js"><link rel="prefetch" href="/assets/js/164.99b00d17.js"><link rel="prefetch" href="/assets/js/165.7809f82c.js"><link rel="prefetch" href="/assets/js/166.b29e508c.js"><link rel="prefetch" href="/assets/js/167.71af6bb1.js"><link rel="prefetch" href="/assets/js/168.aad10cfc.js"><link rel="prefetch" href="/assets/js/169.d807fd76.js"><link rel="prefetch" href="/assets/js/170.8cd1462a.js"><link rel="prefetch" href="/assets/js/171.ecbf63cf.js"><link rel="prefetch" href="/assets/js/172.e75cd345.js"><link rel="prefetch" href="/assets/js/173.1ab612d0.js"><link rel="prefetch" href="/assets/js/174.2366c5d2.js"><link rel="prefetch" href="/assets/js/175.50c5731b.js"><link rel="prefetch" href="/assets/js/176.ac8ad112.js"><link rel="prefetch" href="/assets/js/177.1abcf5d4.js"><link rel="prefetch" href="/assets/js/178.b937dacc.js"><link rel="prefetch" href="/assets/js/179.b6fa0b6d.js"><link rel="prefetch" href="/assets/js/18.64b7e666.js"><link rel="prefetch" href="/assets/js/180.e4a8bc36.js"><link rel="prefetch" href="/assets/js/181.b916da57.js"><link rel="prefetch" href="/assets/js/182.27a2bdb4.js"><link rel="prefetch" href="/assets/js/183.dcb4d635.js"><link rel="prefetch" href="/assets/js/184.820c8f5f.js"><link rel="prefetch" href="/assets/js/185.6654f558.js"><link rel="prefetch" href="/assets/js/186.2749179c.js"><link rel="prefetch" href="/assets/js/187.a301fd95.js"><link rel="prefetch" href="/assets/js/188.3a9e3226.js"><link rel="prefetch" href="/assets/js/189.5f2b0e83.js"><link rel="prefetch" href="/assets/js/19.7a102d25.js"><link rel="prefetch" href="/assets/js/190.76dc6e42.js"><link rel="prefetch" href="/assets/js/191.b6c01ef6.js"><link rel="prefetch" href="/assets/js/192.bd87e976.js"><link rel="prefetch" href="/assets/js/193.e3b20021.js"><link rel="prefetch" href="/assets/js/194.d83d205c.js"><link rel="prefetch" href="/assets/js/195.e53e330d.js"><link rel="prefetch" href="/assets/js/196.1fd35397.js"><link rel="prefetch" href="/assets/js/197.cb0858f8.js"><link rel="prefetch" href="/assets/js/198.651004c0.js"><link rel="prefetch" href="/assets/js/199.4a4a16ae.js"><link rel="prefetch" href="/assets/js/20.2e6fe8d4.js"><link rel="prefetch" href="/assets/js/200.0347a232.js"><link rel="prefetch" href="/assets/js/201.77c9f572.js"><link rel="prefetch" href="/assets/js/202.6f66fc82.js"><link rel="prefetch" href="/assets/js/203.c12f2fd1.js"><link rel="prefetch" href="/assets/js/204.0b74eb4e.js"><link rel="prefetch" href="/assets/js/205.82129b16.js"><link rel="prefetch" href="/assets/js/206.0240cea0.js"><link rel="prefetch" href="/assets/js/207.d2d2dd99.js"><link rel="prefetch" href="/assets/js/208.f1073a08.js"><link rel="prefetch" href="/assets/js/209.3b1e4cbe.js"><link rel="prefetch" href="/assets/js/21.179bedf0.js"><link rel="prefetch" href="/assets/js/210.b8b67413.js"><link rel="prefetch" href="/assets/js/211.455c8e40.js"><link rel="prefetch" href="/assets/js/212.8735e669.js"><link rel="prefetch" href="/assets/js/213.f77fefc5.js"><link rel="prefetch" href="/assets/js/214.97d827be.js"><link rel="prefetch" href="/assets/js/215.bc08fe35.js"><link rel="prefetch" href="/assets/js/216.fa811698.js"><link rel="prefetch" href="/assets/js/217.b965b7c6.js"><link rel="prefetch" href="/assets/js/218.6a91db8b.js"><link rel="prefetch" href="/assets/js/219.fb3d8166.js"><link rel="prefetch" href="/assets/js/22.8268ce6e.js"><link rel="prefetch" href="/assets/js/220.1577cda2.js"><link rel="prefetch" href="/assets/js/221.ceea7cea.js"><link rel="prefetch" href="/assets/js/222.3985b121.js"><link rel="prefetch" href="/assets/js/223.40f0edd0.js"><link rel="prefetch" href="/assets/js/224.bcdfffa8.js"><link rel="prefetch" href="/assets/js/225.13252b88.js"><link rel="prefetch" href="/assets/js/226.2afd6de5.js"><link rel="prefetch" href="/assets/js/227.39e5b8f1.js"><link rel="prefetch" href="/assets/js/228.f24cb5b5.js"><link rel="prefetch" href="/assets/js/229.582f76a9.js"><link rel="prefetch" href="/assets/js/23.3b76f2ef.js"><link rel="prefetch" href="/assets/js/230.50a93474.js"><link rel="prefetch" href="/assets/js/231.063e02af.js"><link rel="prefetch" href="/assets/js/232.08153e5d.js"><link rel="prefetch" href="/assets/js/233.e8a2f480.js"><link rel="prefetch" href="/assets/js/234.4e784ee0.js"><link rel="prefetch" href="/assets/js/235.fe1262b2.js"><link rel="prefetch" href="/assets/js/236.5b6a52cf.js"><link rel="prefetch" href="/assets/js/237.36fae37d.js"><link rel="prefetch" href="/assets/js/238.7369ac7a.js"><link rel="prefetch" href="/assets/js/239.7fff287f.js"><link rel="prefetch" href="/assets/js/24.7c6b119c.js"><link rel="prefetch" href="/assets/js/240.96b67d8a.js"><link rel="prefetch" href="/assets/js/241.6cca43be.js"><link rel="prefetch" href="/assets/js/242.063840f3.js"><link rel="prefetch" href="/assets/js/243.e25e2acc.js"><link rel="prefetch" href="/assets/js/244.6058b76a.js"><link rel="prefetch" href="/assets/js/245.cab0cb5f.js"><link rel="prefetch" href="/assets/js/246.38dba8a1.js"><link rel="prefetch" href="/assets/js/247.58a45597.js"><link rel="prefetch" href="/assets/js/248.5cf1ad4c.js"><link rel="prefetch" href="/assets/js/249.691356bb.js"><link rel="prefetch" href="/assets/js/25.02fab98f.js"><link rel="prefetch" href="/assets/js/250.e2c83a35.js"><link rel="prefetch" href="/assets/js/251.80aa06df.js"><link rel="prefetch" href="/assets/js/252.a3e269d1.js"><link rel="prefetch" href="/assets/js/253.d11f6725.js"><link rel="prefetch" href="/assets/js/26.76ffb425.js"><link rel="prefetch" href="/assets/js/27.ce24313c.js"><link rel="prefetch" href="/assets/js/28.d8dbc96b.js"><link rel="prefetch" href="/assets/js/29.2b3bed04.js"><link rel="prefetch" href="/assets/js/3.d6952836.js"><link rel="prefetch" href="/assets/js/30.26988c7b.js"><link rel="prefetch" href="/assets/js/31.cc5781e4.js"><link rel="prefetch" href="/assets/js/32.80d8b83b.js"><link rel="prefetch" href="/assets/js/33.d97c7068.js"><link rel="prefetch" href="/assets/js/34.962f9100.js"><link rel="prefetch" href="/assets/js/35.23d8a044.js"><link rel="prefetch" href="/assets/js/36.6d349d82.js"><link rel="prefetch" href="/assets/js/37.b08f29c8.js"><link rel="prefetch" href="/assets/js/38.8b2bd27d.js"><link rel="prefetch" href="/assets/js/39.45a0b016.js"><link rel="prefetch" href="/assets/js/4.8b22777d.js"><link rel="prefetch" href="/assets/js/40.e6f6cb43.js"><link rel="prefetch" href="/assets/js/41.c756e119.js"><link rel="prefetch" href="/assets/js/42.bbc17b0f.js"><link rel="prefetch" href="/assets/js/43.8e0ce4ca.js"><link rel="prefetch" href="/assets/js/44.b91517af.js"><link rel="prefetch" href="/assets/js/45.416dfe4d.js"><link rel="prefetch" href="/assets/js/46.c00eeb87.js"><link rel="prefetch" href="/assets/js/47.29d200b3.js"><link rel="prefetch" href="/assets/js/48.7f066ab6.js"><link rel="prefetch" href="/assets/js/49.0e010fee.js"><link rel="prefetch" href="/assets/js/5.e6781b57.js"><link rel="prefetch" href="/assets/js/50.1bb477d0.js"><link rel="prefetch" href="/assets/js/51.66468406.js"><link rel="prefetch" href="/assets/js/52.5cf7fbd0.js"><link rel="prefetch" href="/assets/js/53.d6f04354.js"><link rel="prefetch" href="/assets/js/54.59ca865c.js"><link rel="prefetch" href="/assets/js/55.fb0ad69c.js"><link rel="prefetch" href="/assets/js/56.c47a2d12.js"><link rel="prefetch" href="/assets/js/57.f5d65bb3.js"><link rel="prefetch" href="/assets/js/58.c5761ef2.js"><link rel="prefetch" href="/assets/js/59.9fe56073.js"><link rel="prefetch" href="/assets/js/6.9b07e200.js"><link rel="prefetch" href="/assets/js/60.ee1a5c93.js"><link rel="prefetch" href="/assets/js/61.ed5a91fd.js"><link rel="prefetch" href="/assets/js/62.4c69d23d.js"><link rel="prefetch" href="/assets/js/63.a396c29b.js"><link rel="prefetch" href="/assets/js/64.6f39dd9c.js"><link rel="prefetch" href="/assets/js/65.4cb24e13.js"><link rel="prefetch" href="/assets/js/66.aad4aa20.js"><link rel="prefetch" href="/assets/js/67.36e86f95.js"><link rel="prefetch" href="/assets/js/68.cbcfb2e0.js"><link rel="prefetch" href="/assets/js/69.8f5b0c08.js"><link rel="prefetch" href="/assets/js/7.4d64b8e6.js"><link rel="prefetch" href="/assets/js/70.1e7d144f.js"><link rel="prefetch" href="/assets/js/71.77fb0b43.js"><link rel="prefetch" href="/assets/js/72.bf3bb5b9.js"><link rel="prefetch" href="/assets/js/73.e059a41d.js"><link rel="prefetch" href="/assets/js/74.cae09eb3.js"><link rel="prefetch" href="/assets/js/75.f89a6d2e.js"><link rel="prefetch" href="/assets/js/76.cfb3df08.js"><link rel="prefetch" href="/assets/js/77.f4fa62e6.js"><link rel="prefetch" href="/assets/js/78.464e83f6.js"><link rel="prefetch" href="/assets/js/79.71895252.js"><link rel="prefetch" href="/assets/js/80.58d501fe.js"><link rel="prefetch" href="/assets/js/81.948adca1.js"><link rel="prefetch" href="/assets/js/82.bfd7ff16.js"><link rel="prefetch" href="/assets/js/83.3920a558.js"><link rel="prefetch" href="/assets/js/84.d5b9372a.js"><link rel="prefetch" href="/assets/js/85.3be0afac.js"><link rel="prefetch" href="/assets/js/86.29f7272d.js"><link rel="prefetch" href="/assets/js/87.93a0bc8e.js"><link rel="prefetch" href="/assets/js/88.5be81cc2.js"><link rel="prefetch" href="/assets/js/89.bc9cad5d.js"><link rel="prefetch" href="/assets/js/9.dc7a3982.js"><link rel="prefetch" href="/assets/js/90.5ba7972c.js"><link rel="prefetch" href="/assets/js/91.6ca92166.js"><link rel="prefetch" href="/assets/js/92.cb997f9f.js"><link rel="prefetch" href="/assets/js/93.941f52c6.js"><link rel="prefetch" href="/assets/js/94.c34116e0.js"><link rel="prefetch" href="/assets/js/95.0aa6895c.js"><link rel="prefetch" href="/assets/js/96.fd230ec0.js"><link rel="prefetch" href="/assets/js/97.375c63c2.js"><link rel="prefetch" href="/assets/js/98.5f4889ea.js"><link rel="prefetch" href="/assets/js/99.476bd54f.js">
    <link rel="stylesheet" href="/assets/css/0.styles.7d3fc896.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu have-body-img"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/index/logo.png" alt="Jonas Wolfxin Blog" class="logo"> <span class="site-name can-hide">Jonas Wolfxin Blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">Home🏠</a></div><div class="nav-item"><a href="/navigation/" class="nav-link">Navigation🧭</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Front End" class="dropdown-title"><a href="/front/" class="link-title">Front End</a> <span class="title" style="display:none;">Front End</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Basics</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/html/" class="nav-link">HTML</a></li><li class="dropdown-subitem"><a href="/css/" class="nav-link">CSS</a></li><li class="dropdown-subitem"><a href="/javascript/" class="nav-link">JavaScript</a></li></ul></li><li class="dropdown-item"><h4>Frame</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/react/" class="nav-link">React</a></li><li class="dropdown-subitem"><a href="/vue2/" class="nav-link">Vue2</a></li><li class="dropdown-subitem"><a href="/vue3/" class="nav-link">Vue3</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Database" class="dropdown-title"><a href="/database/" class="link-title">Database</a> <span class="title" style="display:none;">Database</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>SQL 数据库</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/mysql/" class="nav-link">MySQL</a></li><li class="dropdown-subitem"><a href="/postgresql/" class="nav-link">PostgreSQL</a></li></ul></li><li class="dropdown-item"><h4>NoSQL 数据库</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/redis/" class="nav-link">Redis</a></li><li class="dropdown-subitem"><a href="/es/" class="nav-link">ElasticSearch</a></li><li class="dropdown-subitem"><a href="/mongodb/" class="nav-link">MongoDB</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Python" class="dropdown-title"><a href="/pythonstrdy/" class="link-title">Python</a> <span class="title" style="display:none;">Python</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/python_basics/" class="nav-link">Python Basics</a></li><li class="dropdown-item"><!----> <a href="/python_advanced/" class="nav-link">Python Advanced</a></li><li class="dropdown-item"><!----> <a href="/python_projects/" class="nav-link">Python Projects</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="网络运维" class="dropdown-title"><a href="/tool/" class="link-title">网络运维</a> <span class="title" style="display:none;">网络运维</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>CCNA</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/91ab17/" class="nav-link">CCNA知识</a></li><li class="dropdown-subitem"><a href="/pages/55766c/" class="nav-link">CCNA题库</a></li><li class="dropdown-subitem"><a href="/pages/f61749/" class="nav-link">Cisco NetAca</a></li></ul></li><li class="dropdown-item"><!----> <a href="/pages/4f0673/" class="nav-link">Ansible</a></li><li class="dropdown-item"><h4>版本管理</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/maven/" class="nav-link">Maven</a></li><li class="dropdown-subitem"><a href="/git/" class="nav-link">Git</a></li></ul></li><li class="dropdown-item"><h4>部署</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/linux/" class="nav-link">Linux</a></li><li class="dropdown-subitem"><a href="/docker/" class="nav-link">Docker</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="About" class="dropdown-title"><a href="/archives/" class="link-title">About</a> <span class="title" style="display:none;">About</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>This Blog</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/categories/" class="nav-link">Categories</a></li><li class="dropdown-subitem"><a href="/tags/" class="nav-link">Tags</a></li><li class="dropdown-subitem"><a href="/archives/" class="nav-link">Archives</a></li></ul></li><li class="dropdown-item"><h4>About Me</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/whell/web/" class="nav-link">Collection</a></li><li class="dropdown-subitem"><a href="/about/website/introduce/" class="nav-link">Introduction</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="星河万里" class="dropdown-title"><a href="/inGermany/" class="link-title">星河万里</a> <span class="title" style="display:none;">星河万里</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>德国驾照B级</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/8a9dd0/" class="nav-link">理论准备</a></li><li class="dropdown-subitem"><a href="/pages/b79ef5/" class="nav-link">实践准备</a></li></ul></li><li class="dropdown-item"><h4>星河万里</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/bcf060/" class="nav-link">Vim操作</a></li><li class="dropdown-subitem"><a href="/pages/c11fcf/" class="nav-link">Gitemoji</a></li><li class="dropdown-subitem"><a href="/pages/055f2e/" class="nav-link">无妄经</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/message-board/" class="nav-link">MessageBoard📋</a></div> <a href="https://github.com/Jonas-Wolfxin/Jonas-Wolfxin.github.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="https://cdn.jsdelivr.net/gh/Wolfxin/MyPicGo/img/202206092309359.png"> <div class="blogger-info"><h3>Jonas 林风</h3> <span>吾志所向，万夫不当；披荆斩棘，奋而继往。</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">Home🏠</a></div><div class="nav-item"><a href="/navigation/" class="nav-link">Navigation🧭</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Front End" class="dropdown-title"><a href="/front/" class="link-title">Front End</a> <span class="title" style="display:none;">Front End</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Basics</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/html/" class="nav-link">HTML</a></li><li class="dropdown-subitem"><a href="/css/" class="nav-link">CSS</a></li><li class="dropdown-subitem"><a href="/javascript/" class="nav-link">JavaScript</a></li></ul></li><li class="dropdown-item"><h4>Frame</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/react/" class="nav-link">React</a></li><li class="dropdown-subitem"><a href="/vue2/" class="nav-link">Vue2</a></li><li class="dropdown-subitem"><a href="/vue3/" class="nav-link">Vue3</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Database" class="dropdown-title"><a href="/database/" class="link-title">Database</a> <span class="title" style="display:none;">Database</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>SQL 数据库</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/mysql/" class="nav-link">MySQL</a></li><li class="dropdown-subitem"><a href="/postgresql/" class="nav-link">PostgreSQL</a></li></ul></li><li class="dropdown-item"><h4>NoSQL 数据库</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/redis/" class="nav-link">Redis</a></li><li class="dropdown-subitem"><a href="/es/" class="nav-link">ElasticSearch</a></li><li class="dropdown-subitem"><a href="/mongodb/" class="nav-link">MongoDB</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Python" class="dropdown-title"><a href="/pythonstrdy/" class="link-title">Python</a> <span class="title" style="display:none;">Python</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/python_basics/" class="nav-link">Python Basics</a></li><li class="dropdown-item"><!----> <a href="/python_advanced/" class="nav-link">Python Advanced</a></li><li class="dropdown-item"><!----> <a href="/python_projects/" class="nav-link">Python Projects</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="网络运维" class="dropdown-title"><a href="/tool/" class="link-title">网络运维</a> <span class="title" style="display:none;">网络运维</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>CCNA</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/91ab17/" class="nav-link">CCNA知识</a></li><li class="dropdown-subitem"><a href="/pages/55766c/" class="nav-link">CCNA题库</a></li><li class="dropdown-subitem"><a href="/pages/f61749/" class="nav-link">Cisco NetAca</a></li></ul></li><li class="dropdown-item"><!----> <a href="/pages/4f0673/" class="nav-link">Ansible</a></li><li class="dropdown-item"><h4>版本管理</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/maven/" class="nav-link">Maven</a></li><li class="dropdown-subitem"><a href="/git/" class="nav-link">Git</a></li></ul></li><li class="dropdown-item"><h4>部署</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/linux/" class="nav-link">Linux</a></li><li class="dropdown-subitem"><a href="/docker/" class="nav-link">Docker</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="About" class="dropdown-title"><a href="/archives/" class="link-title">About</a> <span class="title" style="display:none;">About</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>This Blog</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/categories/" class="nav-link">Categories</a></li><li class="dropdown-subitem"><a href="/tags/" class="nav-link">Tags</a></li><li class="dropdown-subitem"><a href="/archives/" class="nav-link">Archives</a></li></ul></li><li class="dropdown-item"><h4>About Me</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/whell/web/" class="nav-link">Collection</a></li><li class="dropdown-subitem"><a href="/about/website/introduce/" class="nav-link">Introduction</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="星河万里" class="dropdown-title"><a href="/inGermany/" class="link-title">星河万里</a> <span class="title" style="display:none;">星河万里</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>德国驾照B级</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/8a9dd0/" class="nav-link">理论准备</a></li><li class="dropdown-subitem"><a href="/pages/b79ef5/" class="nav-link">实践准备</a></li></ul></li><li class="dropdown-item"><h4>星河万里</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/bcf060/" class="nav-link">Vim操作</a></li><li class="dropdown-subitem"><a href="/pages/c11fcf/" class="nav-link">Gitemoji</a></li><li class="dropdown-subitem"><a href="/pages/055f2e/" class="nav-link">无妄经</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/message-board/" class="nav-link">MessageBoard📋</a></div> <a href="https://github.com/Jonas-Wolfxin/Jonas-Wolfxin.github.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>CCNA</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>CCNA知识笔记</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/1634eb/" class="sidebar-link">网络工程师的介绍</a></li><li><a href="/pages/91ab17/" class="sidebar-link">OSI Model</a></li><li><a href="/pages/68df0c/" class="sidebar-link">IP Addressing</a></li><li><a href="/pages/0cd5e5/" class="sidebar-link">TCP/IP Suite</a></li><li><a href="/pages/32e4ca/" class="sidebar-link">Comparison-TCP Vs UDP</a></li><li><a href="/pages/9876fd/" class="sidebar-link">Cisco IOS CLI</a></li><li><a href="/pages/fabc03/" class="sidebar-link">Switching_VLAN</a></li><li><a href="/pages/778234/" class="sidebar-link">Switching_STP</a></li><li><a href="/pages/85147b/" class="sidebar-link">Switching_EtherChannel</a></li><li><a href="/pages/087c56/" class="sidebar-link">Layer 2 Discovery Protocols</a></li><li><a href="/pages/6b8f16/" class="sidebar-link">Layer 2 Forwarding</a></li><li><a href="/pages/149f35/" class="sidebar-link">Routing_Static</a></li><li><a href="/pages/d70851/" class="sidebar-link">Dynamic Routing P1 RIP EIGRP</a></li><li><a href="/pages/c4055c/" aria-current="page" class="active sidebar-link">Dynamic Routing P2 OSPF</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/pages/c4055c/#ospf-intro" class="sidebar-link">OSPF Intro</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/c4055c/#lsa-areas" class="sidebar-link">LSA &amp; Areas</a></li><li class="sidebar-sub-header level4"><a href="/pages/c4055c/#lsa-flooding" class="sidebar-link">LSA Flooding</a></li><li class="sidebar-sub-header level4"><a href="/pages/c4055c/#process-of-sharing-lsas-and-determing-the-best-route" class="sidebar-link">Process of sharing LSAs and determing the best route</a></li><li class="sidebar-sub-header level4"><a href="/pages/c4055c/#ospf-areas" class="sidebar-link">OSPF Areas</a></li><li class="sidebar-sub-header level3"><a href="/pages/c4055c/#ospf-metric" class="sidebar-link">OSPF Metric</a></li><li class="sidebar-sub-header level4"><a href="/pages/c4055c/#change-the-reference-bandwidth-on-routers" class="sidebar-link">Change the Reference-Bandwidth on routers</a></li><li class="sidebar-sub-header level4"><a href="/pages/c4055c/#change-the-cost-of-an-interface" class="sidebar-link">Change the Cost of an Interface</a></li><li class="sidebar-sub-header level4"><a href="/pages/c4055c/#change-bandwidth-of-an-interface-but-not-recommended" class="sidebar-link">change Bandwidth of an interface: But not recommended</a></li><li class="sidebar-sub-header level4"><a href="/pages/c4055c/#summary" class="sidebar-link">summary</a></li><li class="sidebar-sub-header level3"><a href="/pages/c4055c/#ospf-neighbors" class="sidebar-link">OSPF Neighbors</a></li><li class="sidebar-sub-header level4"><a href="/pages/c4055c/#seven-states-of-ospf" class="sidebar-link">Seven states of OSPF</a></li><li class="sidebar-sub-header level4"><a href="/pages/c4055c/#process-of-ospf-relationship-establishment" class="sidebar-link">Process of OSPF relationship establishment</a></li><li class="sidebar-sub-header level4"><a href="/pages/c4055c/#ospf的报文类型" class="sidebar-link">OSPF的报文类型</a></li><li class="sidebar-sub-header level4"><a href="/pages/c4055c/#full-adjacency-relationship-requirements" class="sidebar-link">Full-Adjacency Relationship Requirements</a></li><li class="sidebar-sub-header level4"><a href="/pages/c4055c/#ospf的三张表" class="sidebar-link">OSPF的三张表</a></li><li class="sidebar-sub-header level3"><a href="/pages/c4055c/#ospf-network-types" class="sidebar-link">OSPF Network Types</a></li><li class="sidebar-sub-header level4"><a href="/pages/c4055c/#ospf-broadcast-network" class="sidebar-link">OSPF Broadcast Network</a></li><li class="sidebar-sub-header level4"><a href="/pages/c4055c/#point-to-point-network" class="sidebar-link">Point-to-Point Network</a></li><li class="sidebar-sub-header level4"><a href="/pages/c4055c/#configure-the-ospf-network-type" class="sidebar-link">Configure the OSPF Network Type</a></li><li class="sidebar-sub-header level3"><a href="/pages/c4055c/#ospf-lsa-types" class="sidebar-link">OSPF LSA Types</a></li><li class="sidebar-sub-header level3"><a href="/pages/c4055c/#configuration" class="sidebar-link">Configuration</a></li><li class="sidebar-sub-header level4"><a href="/pages/c4055c/#basic-configuration" class="sidebar-link">Basic Configuration</a></li><li class="sidebar-sub-header level4"><a href="/pages/c4055c/#more-configuration" class="sidebar-link">More configuration</a></li><li class="sidebar-sub-header level4"><a href="/pages/c4055c/#configuration-of-p2p-serial-connection" class="sidebar-link">Configuration of P2P serial connection</a></li><li class="sidebar-sub-header level3"><a href="/pages/c4055c/#ospf的相关命令" class="sidebar-link">OSPF的相关命令</a></li><li class="sidebar-sub-header level4"><a href="/pages/c4055c/#查看命令" class="sidebar-link">查看命令</a></li><li class="sidebar-sub-header level4"><a href="/pages/c4055c/#调试命令" class="sidebar-link">调试命令</a></li><li class="sidebar-sub-header level3"><a href="/pages/c4055c/#配置ospf汇总路由" class="sidebar-link">配置OSPF汇总路由</a></li><li class="sidebar-sub-header level3"><a href="/pages/c4055c/#ospf-terms-自查表" class="sidebar-link">OSPF terms 自查表</a></li><li class="sidebar-sub-header level3"><a href="/pages/c4055c/#quiz" class="sidebar-link">Quiz</a></li></ul></li></ul></li><li><a href="/pages/32db2d/" class="sidebar-link">Layer 3 Forwarding</a></li><li><a href="/pages/fe5ceb/" class="sidebar-link">Virtual Routing and Forwarding</a></li><li><a href="/pages/bada2c/" class="sidebar-link">Layer 3 FHRPs</a></li><li><a href="/pages/81e45f/" class="sidebar-link">Security</a></li><li><a href="/pages/6bd28d/" class="sidebar-link">ACL</a></li><li><a href="/pages/7db05a/" class="sidebar-link">NAT 网络地址转换</a></li><li><a href="/pages/729891/" class="sidebar-link">LAN Architectures</a></li><li><a href="/pages/1076ba/" class="sidebar-link">WAN广域网</a></li><li><a href="/pages/441d7d/" class="sidebar-link">WLAN</a></li><li><a href="/pages/e31696/" class="sidebar-link">NTP</a></li><li><a href="/pages/c7a0a2/" class="sidebar-link">DNS</a></li><li><a href="/pages/d25cf6/" class="sidebar-link">Syslog</a></li><li><a href="/pages/c74f1d/" class="sidebar-link">Accessing the CLI of network devices</a></li><li><a href="/pages/5d3322/" class="sidebar-link">FTP TFTP</a></li><li><a href="/pages/e049f9/" class="sidebar-link">DHCP</a></li><li><a href="/pages/7ebd2e/" class="sidebar-link">SNMP</a></li><li><a href="/pages/bba118/" class="sidebar-link">Quality of service</a></li><li><a href="/pages/652496/" class="sidebar-link">Virtualization</a></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>CCNA题库</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Cisco Networking Academy</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Ansible</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>版本管理 - Maven</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>开发管理 - Git</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>操作系统 - Linux</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>容器部署 - Docker</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><a href="/categories/?category=%E7%BD%91%E7%BB%9C%E8%BF%90%E7%BB%B4" title="分类" data-v-06225672>网络运维</a></li><li data-v-06225672><a href="/categories/?category=CCNA" title="分类" data-v-06225672>CCNA</a></li><li data-v-06225672><a href="/categories/?category=CCNA%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0" title="分类" data-v-06225672>CCNA知识笔记</a></li></ul> <div class="info" data-v-06225672><div title="作者" class="author iconfont icon-touxiang" data-v-06225672><a href="https://github.com/Jonas-Wolfxin" target="_blank" title="作者" class="beLink" data-v-06225672>Jonas Wolfxin</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2023-04-01</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABGpJREFUSA3tVVtoXFUU3fvOI53UlmCaKIFmwEhsE7QK0ipFEdHEKpXaZGrp15SINsXUWvBDpBgQRKi0+KKoFeJHfZA+ED9KKoIU2gYD9UejTW4rVIzm0VSTziPzuNu1z507dibTTjL4U/DAzLn3nL3X2o91ziX6f9wMFdh6Jvbm9nNSV0msViVO6tN1Rm7NMu2OpeJ9lWBUTDxrJbYTS0hInuwciu9eLHlFxCLCZEk3MegsJmZ5K/JD6t7FkFdEvGUo1g7qJoG3MHImqRIn8/nzY1K9UPKKiJmtnUqHVE3Gbuay6vJE/N2FEmuxFjW2nUuE0yQXRRxLiTUAzs36zhZvOXJPdX850EVnnLZkB8prodQoM5JGj7Xk2mvC7JB8tG04Ef5PiXtG0UtxupRQSfTnBoCy554x18yJHI6I+G5Eru4LHmPJZEQsrvPUbMiA8G/WgMK7w7I+ez7++o2ANfbrjvaOl1tFMs+htG3IrZH9/hDX1Pr8Tc0UvH8tcX29KzAgIGcEkINyW5BF9x891hw6VYqgJHEk0huccS7vh3C6gTiODL+26huuBtbct8eZnqLML8PkxGYpuPZBqtqwkSjgc4mB5gbgig5i+y0UDK35LMxXisn9xQtK+nd26gTIHsHe/oblK/b29fUmN/8Y+9jAQrnBp56m1LcDlDp9irKTExSKduXJVWSqdBMA08pEJnEIOB3FPPMybu/oeV8zFeYN3xx576Q6RH+VmplE4ncQV5v+5rzSoyOU7PuEAg8g803PwBJ0CExno/jcMbN8tONYeOmHiuUNryvm3fRUy4tMPVLdAGkUhNWuggGrJcXPv+ouCjz0MKUHz1J2/E8IC9nqTabcxgaBYM0hPhD5Y65FsbxRQKxCQrDjDctW7PUM3HuZunFyifSAqEfuzCp48Il24luWUWZoyJCaPR82jE0+kFA643wRFVni4RYSq3ohJO2pZ7B5dO4xkDWbEpossJPLSrPjYID8rS2UHTlvyNxqIGsg674XJJ7vnh5L7PNwC4hh2sjCI96mzszOTpxLF0T7l88Yz7lAuK6OnL8gXLOnTvpzSb22YG8W7us3jSebFHeeqnXRG1vt+MoUM84LQIBmMsCTAcOauTh0T0l0neQK7m2bLMt2mGxU3HYssS0J2cdv5wljlPsrIuZLAG/2DOZIXgCYT8uMGZN+e2kSirfxZOPCsC0f24nTZzspnVn9VePS1Z5vubmAGGXG8ZFno9Hel0yfA5ZPhF7Dh972BQJ2qCpgH67lmWtBYbvk6sz02wjky2vXyz0XErP/kFB619js1BtwfOV4OPRqOQBjy3Qbk18vigUPPSD5ceHnwck7W9bhAqZdd7SuG7w4/P2F/GaJh8c7e9qgow+Q7cGBo+98WsLkuktFqiZabtXuQTu/Y5ETbR0v7tNSFnvrmu6pjdoan2KjMu8q/Hmj1EfCO2ZGfEIbIXKUlw8qaX9/b2oeSJmFksSeT/Fn0V3nSypChh4Gjh74ybO9aeZ/AN2dwciu2/MhAAAAAElFTkSuQmCC">Dynamic Routing P2 OSPF<!----></h1> <!----> <div class="theme-vdoing-content content__default"><hr> <blockquote><p>Here are the numeric units and their values expressed in 10 to the power format:</p> <ol><li>Kilo (K): 10^3</li> <li>Mega (M): 10^6</li> <li>Giga (G): 10^9</li> <li>Tera (T): 10^12</li> <li>Peta (P): 10^15</li> <li>Exa (E): 10^18</li> <li>Zetta (Z): 10^21</li> <li>Yotta (Y): 10^24</li></ol></blockquote> <hr> <h2 id="ospf-intro"><a href="#ospf-intro" class="header-anchor">#</a> OSPF Intro</h2> <blockquote><ul><li><p><strong>Open Shortest Path First</strong>(开放式最短路径优先）, industry standard, 是用于IP网络的<a href="https://baike.baidu.com/item/%E9%93%BE%E8%B7%AF%E7%8A%B6%E6%80%81%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AE/1219386" target="_blank" rel="noopener noreferrer">链路状态路由协议<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <ul><li><p>适用于<a href="https://baike.baidu.com/item/IPv4/422599" target="_blank" rel="noopener noreferrer">IPv4<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>的OSPFv2协议定义于RFC2328，</p></li> <li><p>适用于<a href="https://baike.baidu.com/item/IPv6/172297" target="_blank" rel="noopener noreferrer">IPv6<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>的OSPFv3定义于RFC5340。</p></li></ul></li> <li><p>Three versions:</p> <ul><li>OSPFv1 (1989): OLD, not in use anymore</li> <li>OSPFv2 (1998): Used for IPv4</li> <li>OSPFv3 (2008): Used for IPv6 (<em>can also be used for IPv4, but usually v2 is used</em>)</li></ul></li> <li><p>Routers store information about the network in <strong>LSAs</strong>(Link State Advertisements), which are organized in a structure called the <strong>LSDB</strong>(Link State Database).</p></li> <li><p>Routers will <strong>flood</strong> LSAs until all routers in the <strong>OSPF area</strong> develop the same map of the network (LSDB).</p> <ul><li>In the case of OSPF, it means router send the LSAs to all of their OSPF neighbors.</li> <li>OSPF ‘areas’ are a unique aspect of OSPF. More details later.</li></ul></li> <li><p>是广泛使用的一种动态路由协议，它属于链路状态路由协议，具有路由变化收敛速度快、无路由环路、支持变长子网掩码（VLSM）和汇总等优点。在网络中使用<a href="https://baike.baidu.com/item/OSPF%E5%8D%8F%E8%AE%AE/421662" target="_blank" rel="noopener noreferrer">OSPF协议<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>后，大部分路由将由OSPF协议自行计算和生成，无须网络管理员人工配置，当网络拓扑发生变化时，协议可以自动计算、更正路由，极大地方便了网络管理。。</p></li> <li><p>OSPF协议可以让每个路由器负责发现、维护与邻居的关系，并将已知的邻居列表和链路状态更新LSU(Link State Update)报文描述，通过可靠的泛洪与自治系统AS(Autonomous System)内的其他路由器周期性交互，学习到整个自治系统的<a href="https://baike.baidu.com/item/%E7%BD%91%E7%BB%9C%E6%8B%93%E6%89%91%E7%BB%93%E6%9E%84/4136060" target="_blank" rel="noopener noreferrer">网络拓扑结构<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>; 并通过自治系统边界的路由器注入其他AS的路由信息，从而得到整个Internet的路由信息。每隔一个特定时间或当链路状态发生变化时，重新生成LSA，路由器通过泛洪机制将新LSA通告出去，以便实现路由的实时更新。</p></li> <li><p>功能和特点:</p> <ul><li><p>该协议使用 <strong>Shortest Path First</strong>(最短路径优先)算法(aka. <strong>Dijkstra Algorithm</strong>)。</p> <ul><li>首先OSPF要构建一个最短路径树, 然后使用最佳路径的计算结果来组建路由选择表;</li> <li>OSPF 的会聚也很快，虽然它可能没有EIGRP快，并且它也支持对相同目标的等价多路径路由。</li></ul></li> <li><p>使用AS自治系统并支持自治系统内进行层次区域划分;</p> <blockquote><p>将OSPF创建为层次结构的原因如下:</p> <ul><li>减少路由选择的开销;</li> <li>加速会聚;</li> <li>将网络的不稳定性限制在单一的网络区域内。</li></ul></blockquote></li> <li><p>最小化的路由选择的更新流量;</p></li> <li><p>支持VLSM和CIDR;</p></li></ul></li> <li><p>AD: 110</p></li> <li><p>OSPF在单一AS内通过 SPF算法 计算到达目的地的最短路径, 路由器使用最短路径树来将OSPF路由插入到路由表中</p> <ul><li><p>链路(Link): 路由器的接口</p></li> <li><p>状态(State): 描述接口及其与邻居路由器之间的关系</p></li> <li><p>Cost: 每个路由器都把自己的接口当做根, 去构造一棵树(这棵树中只包含了路由器所在区域内的网络), 并且给与累计成本来计算到达目的地的最短路径</p></li></ul></li></ul> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202303300419655.png" alt="image-20220620191328842" style="zoom:39%;"></blockquote> <h3 id="lsa-areas"><a href="#lsa-areas" class="header-anchor">#</a> LSA &amp; Areas</h3> <h4 id="lsa-flooding"><a href="#lsa-flooding" class="header-anchor">#</a> LSA Flooding</h4> <blockquote><ul><li>this network of four routers is running OSPF. All of these routers are OSPF neighbors, they have the same link state database and the network is stable.</li> <li><strong>LSDB is identical for all routers in the OSPF area. Each of these routers has a complete map of the network.</strong></li> <li>Each individual LSA has an aging timer, which is <strong>30 minutes</strong> by default.</li></ul></blockquote> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202304010118059.png" alt="image-20230401011832637" style="zoom:33%;"> <h4 id="process-of-sharing-lsas-and-determing-the-best-route"><a href="#process-of-sharing-lsas-and-determing-the-best-route" class="header-anchor">#</a> Process of sharing LSAs and determing the best route</h4> <blockquote><p>In OSPF, there are <strong>three main steps</strong> in the process of sharing LSAs and determining the best route to each destination in the network:</p> <ol><li><em>Become neighbors</em> with other routers connected to the same segment;</li> <li><em>Exchange LSAs</em> with neighbor routers;</li> <li>Each router independently <em>calculates its best routes to each destination, and inserts them into the routing table</em>.</li></ol></blockquote> <h4 id="ospf-areas"><a href="#ospf-areas" class="header-anchor">#</a> OSPF Areas</h4> <blockquote><ul><li>OSPF uses <strong>Areas</strong> to divide up the network.</li> <li>Small networks can be single-area without any negative effects on network performance;</li> <li>In larger networks, however, <em>a single-area design</em> can have some <strong>negative</strong> effects:
<ul><li>SPF algorithm takes more time to calculate routes in a large network;</li> <li>SPF algorithm requires exponentially(指数级) more processing power on each router to make calculations.</li> <li>Larger LSDB takes up more memory on the routers;</li> <li>Any small change in the network causes every router to flood LSAS and run the SPF algorithm again;</li></ul></li> <li>By dividing a large OSPF network into several smaller areas, you can avoid the above negative effects.</li></ul></blockquote> <h5 id="example-of-a-larger-network"><a href="#example-of-a-larger-network" class="header-anchor">#</a> Example of a larger network</h5> <blockquote><h5 id="possible-one-large-single-area-network"><a href="#possible-one-large-single-area-network" class="header-anchor">#</a> possible one large, single-area network</h5> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202304010134524.png" alt="image-20230401013403209" style="zoom:25%;"> <ul><li>All interfaces on all routers are assigned to <strong>Area 0</strong>, also known as the <strong>Backbone Area</strong>.</li></ul> <h5 id="possibly-divided-into-separate-areas"><a href="#possibly-divided-into-separate-areas" class="header-anchor">#</a> Possibly divided into separate Areas</h5> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202304010138019.png" alt="image-20230401013807700" style="zoom:25%;"></blockquote> <h5 id="terms-of-ospf-areas"><a href="#terms-of-ospf-areas" class="header-anchor">#</a> Terms of OSPF Areas</h5> <blockquote><ul><li><p><code>Area</code>: a set of routers and links that share the same <em>LSDB(link state database)</em>.</p></li> <li><p><code>Backbone Area</code> (which is <strong>Area 0</strong>) is a special area, that <strong>all other areas must connect to</strong>.</p> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202304010144115.png" alt="image-20230401014458823" style="zoom:28%;"></li> <li><p>Routers <em>with all interfaces in the same OSPF area</em> are called ``<strong>Internal Routers</strong>’.</p></li> <li><p>Routers <em>with interfaces in multiple areas</em> are called ‘<strong>Area Border Routers(ABR)</strong>’, because they are the border between different OSPF areas.</p> <ul><li>ABRs maintain a separate LSDB for each area they are connected to.</li> <li>It is recommend that you connect an ABR to a <em>maximum of 2 areas</em>. Connecting an ABR to 3+ areas can <strong>overburden</strong> the router.</li></ul></li> <li><p>Routers <strong>connected to the Backbone Area(area 0)</strong>, which means <em>at least one of the interfaces on the routers must be configured in Backbone Area</em>,  are called <strong>Backbone Routers</strong>.</p> <ul><li>(The <em>ABRs in this diagram</em> are also Backbone Routers, <em>on top of</em> being an ABR.;</li> <li>Of course, the <em>Internal Routers in Area 0</em> are Backbone Routers.)</li></ul> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202304010151952.png" alt="image-20230401015137621" style="zoom:30%;"></li> <li><p>An <strong>Intra-area Route</strong> is a route to a destination inside the same OSPF area.</p></li> <li><p>An <strong>Inter-area Route</strong> is a route to a destination in a different OSPF area.</p></li> <li><p>OSPF运行在某个自治系统内部，但是通过路由器也可以将多个自治系统连接起来或者连接到Internet, 这种路由器被称为[<strong>ASBR(Autonomous System Boundary Router)</strong>](# 查看指令)。An [...] is an OSPF router that connects the OSPF network to an external network.</p></li></ul> <p><img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202304010352961.png" alt="image-20230401035254819"></p></blockquote> <h5 id="reqiurements-of-ospf-areas"><a href="#reqiurements-of-ospf-areas" class="header-anchor">#</a> Reqiurements of OSPF Areas</h5> <blockquote><ul><li><p><strong>OSPF areas should be contiguous</strong>. It means that each individual area should be connected, not divided up.</p> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202304010216273.png" alt="image-20230401021658953" style="zoom:25%;"></li> <li><p>All OSPF areas must have <em>at least one ABR</em> connected to the backbone area.</p></li> <li><p>OSPF interfaces in the same subnet must be <strong>configured in the same area</strong>.</p> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202304010224810.png" alt="image-20230401022410495" style="zoom:33%;"></li></ul></blockquote> <h3 id="ospf-metric"><a href="#ospf-metric" class="header-anchor">#</a> OSPF Metric</h3> <blockquote><ul><li><p>OSPF’s metric is called <strong>Cost</strong>, which is <em>automatically calculated based on the bandwidth (speed) of the interface</em>.</p></li> <li><p>It is calculated by dividing a <strong>Reference Bandwidth(100 Mbps by default)</strong> by the <strong>interface’s bandwidth</strong>. Therefore Fast-Ethernet, Gigabit-Ethernet, 10Gig-Ethernet, etc. are equal and all have a <strong>cost of 1 by default</strong>. <code>(This could lead to efficiency problems in Load-Balancing!)</code></p> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202304010625327.png" alt="image-20230401062532122" style="zoom:33%;"></li></ul></blockquote> <h4 id="change-the-reference-bandwidth-on-routers"><a href="#change-the-reference-bandwidth-on-routers" class="header-anchor">#</a> Change the Reference-Bandwidth on routers</h4> <blockquote><ul><li>You can (<strong>and should!</strong>) change the reference bandwidth <em>greater than the fastest links in your network</em> (to allow for future upgrades) with this command:</li></ul> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code> R1<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment"># auto-cost reference-bandwidth Megabits-Per-Second</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></blockquote> <h4 id="change-the-cost-of-an-interface"><a href="#change-the-cost-of-an-interface" class="header-anchor">#</a> Change the Cost of an Interface</h4> <blockquote><ul><li>The Cost of each interface can be manually configured via the command <code>ip ospf cost 数值</code>;</li></ul> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202304010651277.png" alt="image-20230401065135083" style="zoom:43%;"> <ul><li>The Cost of each interface can be shown via <code>show ip ospf interface Interface</code>.</li></ul> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202304010716820.png" alt="image-20230401071657667" style="zoom:30%;"></blockquote> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202304010644899.png" alt="image-20230401064432529" style="zoom:33%;"> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202304010650281.png" alt="image-20230401065042783" style="zoom:33%;"> <h4 id="change-bandwidth-of-an-interface-but-not-recommended"><a href="#change-bandwidth-of-an-interface-but-not-recommended" class="header-anchor">#</a> change Bandwidth of an interface: But not recommended</h4> <blockquote><ul><li>One more option to change the OSPF cost of an interface is to <strong>change the bandwidth of the interface</strong> with the <code>bandwidth</code> command.</li> <li>The formula to calculate OSPF cost is <code>reference bandwidth / interface bandwidth</code>;</li> <li><strong>However, the bandwidth value is used in other calculations, it is not recommended to change this value to alter the interface’s OSPF cost.</strong></li></ul></blockquote> <blockquote><h6 id="bandwidth-vs-speed-on-an-interface"><a href="#bandwidth-vs-speed-on-an-interface" class="header-anchor">#</a> Bandwidth Vs Speed on an interface</h6> <ul><li>Although the bandwidth matches the interface speed by default, changing the interface bandwidth doesn’t actually change the speed at which the interface operates.</li> <li>The bandwidth is just a value that is used to calculate OSPF cost, EIGRP metric, etc.</li> <li>To change the speed at which the interface operates, use the <code>speed</code>command.</li></ul></blockquote> <h4 id="summary"><a href="#summary" class="header-anchor">#</a> summary</h4> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202304010714835.png" alt="image-20230401071439608" style="zoom:30%;"> <h3 id="ospf-neighbors"><a href="#ospf-neighbors" class="header-anchor">#</a> OSPF Neighbors</h3> <blockquote><ul><li><em>Making sure that routers successfully become OSPF neighbors is the main task in configuring and troubleshooting OSPF.</em></li> <li><strong>Once routers become neighbors</strong>, they automatically do the work of sharing network information, calculating routes, etc.</li> <li>When OSPF is activated on an interface, the router starts sending <strong>OSPF hello messages</strong> out of the interface at regular intervals (determined by the hello timer). These are used to introduce the router to potential OSPF neighbors.</li> <li>The default hello timer is <strong>10 seconds</strong> on an Ethernet connection.</li> <li><strong>Hello messages</strong> are multicast to <strong>224.0.0.5</strong> (multicast address for all OSPF routers);</li> <li><strong>Messages to the OSPF DR/BDR</strong> are multicast using address [<strong>224.0.0.6</strong>].</li> <li>OSPF messages are encapsulated in an IP header, with <strong>a value of 89 in the Protocol</strong> field.</li></ul></blockquote> <h4 id="seven-states-of-ospf"><a href="#seven-states-of-ospf" class="header-anchor">#</a> Seven states of OSPF</h4> <blockquote><h6 id="down-state"><a href="#down-state" class="header-anchor">#</a> Down state</h6> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202304010919960.png" alt="image-20230401091934817" style="zoom:33%;"> <ul><li>OSPF is activated on R1’s GO/O interface.</li> <li>It sends an OSPF hello message to <code>224.0.0.5</code>.</li> <li>It doesn’t know about any OSPF neighbors yet, so the current neighbor state is Down.</li></ul> <h6 id="init-state"><a href="#init-state" class="header-anchor">#</a> Init State</h6> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202304010920145.png" alt="image-20230401092057003" style="zoom:33%;"> <ul><li>When R2 receives the Hello packet, it will add an entry for R1 to its OSPF neighbor table.</li> <li>In R2’s neighbor table, the relationship with R1 is now in the Init state.</li> <li><code>Init state = Hello packet received, but own router ID is not in the Hello packet.</code></li></ul> <h6 id="two-way-state"><a href="#two-way-state" class="header-anchor">#</a> Two-way State</h6> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202304010924340.png" alt="image-20230401092411165" style="zoom:33%;"> <ul><li>R2 will send a Hello packet containing the Router_ID of both routers. R1 will insert R2 into its OSPF neighbor table within the 2-way state.</li> <li>R1 will send another Hello message, this time containing R2’s RID. Now both routers are in the 2-way state.</li> <li><code>The 2-way state means the router has received a Hello packet with its own RID in it.</code></li> <li><strong>If both routers reach the 2-way state, it means that all of the conditions have been met for them to become OSPF neighbors.</strong> They are now ready to share LSAs to build a common LSDB.</li> <li>In some network types, a <strong>DR (Designated Router)</strong> and <strong>BDR (Backup Designated Router)</strong> will be elected at this point.</li></ul> <h6 id="exstart-state"><a href="#exstart-state" class="header-anchor">#</a> EXstart state</h6> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202304010933865.png" alt="image-20230401093349722" style="zoom:33%;"> <ul><li><p>After the 2-way state, the two routers will now prepare to exchange information about their LSDB.</p></li> <li><p>Before that, they have to choose which one will start the exchange. (Master/Slave router)</p> <p>This <strong>Master/Slave relationship</strong> is only needed for this <strong>initial exchange of LSDB</strong> information.</p></li> <li><p>The router with the <strong>higher Router_ID</strong> will become the Master and initiate the exchange. The router with the lower Router_ID will become the Slave.</p></li> <li><p>To decide the Master and Slave, they need to exchange <em>DBD (Database Description)</em> packets.</p></li></ul> <h6 id="exchange-state"><a href="#exchange-state" class="header-anchor">#</a> Exchange state</h6> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202304010936086.png" alt="image-20230401093614904" style="zoom:33%;"> <ul><li>In the Exchange state they exchanged DBD packets, so they know which LSAs their neighbors are holding. In the Exchange state, the routers exchange DBDs which contain a list of the LSAs in their LSDB. These DBDs do not include detailed information about the LSAs, just basic information telling their neighbor what LSAs they have.</li> <li>The routers compare the information in the DBD they received to the information in their own LSDB to determine which LSAs they must receive from their neighbor.</li></ul> <h6 id="loading-state"><a href="#loading-state" class="header-anchor">#</a> Loading state</h6> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202304010940695.png" alt="image-20230401094047514" style="zoom:33%;"> <ul><li>routers send <strong>LSR</strong> messages to request LSAs they don’t have from their neighbor.</li> <li>Then the LSAs are sent in <strong>LSU</strong>(Link State Update) messages.</li> <li>Finally, The routers send <strong>LSAck</strong> messages to acknowledge that they received the LSAs. Now the loading state is complete, and the routers have the same LSDB.</li></ul> <h6 id="full-state"><a href="#full-state" class="header-anchor">#</a> Full state</h6> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202304010945993.png" alt="image-20230401094552848" style="zoom:33%;"> <ul><li>In the Full state, the routers have a <strong>full OSPF adjacency</strong> and <strong>identical LSDBs</strong>.</li> <li>They continue to send and listen for <strong>Hello packets</strong>(once every 10 seconds by default) to maintain the <strong>neighbor adjacency</strong>. To maintain the adjacency, another timer called the ‘Dead’ timer is used.</li> <li>Every time a Hello packet is received, the <strong>‘Dead’ timer (40 seconds by default)</strong> is reset. However, if the Dead timer counts down to 0 and no Hello message is received, the neighbor is removed.</li> <li>If the neighbors remain up, the routers will continue to share LSAs as the network changes to make sure each router has a complete and accurate map of the network.</li></ul></blockquote> <h5 id="another-notation-eight-states-of-ospf-neighbors"><a href="#another-notation-eight-states-of-ospf-neighbors" class="header-anchor">#</a> Another Notation: Eight States of OSPF neighbors</h5> <blockquote><p>In OSPF (Open Shortest Path First), neighbor states are used to track the progress of forming and maintaining neighbor relationships between OSPF routers. There are several neighbor states that OSPF routers can go through as they establish and maintain neighbor relationships. These states are:</p> <ol><li><strong>Down</strong>: In this state, the router has not yet established any communication with its neighbor.</li> <li><strong>Attempt</strong>: In this state, the router is attempting to establish a neighbor relationship with the neighbor by sending hello packets.</li> <li><strong>Init</strong>: In this state, the router has received a hello packet from its neighbor, but it has not yet received confirmation of the hello packet.</li> <li><strong>2-Way</strong>: In this state, the router has received confirmation of the hello packet from its neighbor, and it has also sent a hello packet to the neighbor.</li> <li><strong>Exstart</strong>: In this state, the router has initiated the process of exchanging database information with its neighbor.</li> <li><strong>Exchange</strong>: In this state, the router is actively exchanging database information with its neighbor.</li> <li><strong>Loading</strong>: In this state, the router is receiving the database information from its neighbor.</li> <li><strong>Full</strong>: In this state, the router has successfully established a neighbor relationship with its neighbor, and it has received a complete copy of the neighbor's link-state database.</li></ol> <p>Once the neighbor relationship is established and both routers reach the Full state, they can exchange routing information and update their routing tables based on the topology of the network.</p></blockquote> <h4 id="process-of-ospf-relationship-establishment"><a href="#process-of-ospf-relationship-establishment" class="header-anchor">#</a> Process of OSPF relationship establishment</h4> <blockquote><img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202304010955409.png" alt="image-20230401095545125" style="zoom:33%;"> <p>The three main steps in the process of sharing LSAs and determining the best routes to each destination are</p> <ol><li><strong>Become neighbors</strong> with other routers connected to the same segment;</li> <li><strong>Exchange LSAs</strong> with neighbor routers;</li> <li><strong>Calculate the best routes</strong> to each destination, and insert them into the routing table.</li></ol></blockquote> <h4 id="ospf的报文类型"><a href="#ospf的报文类型" class="header-anchor">#</a> OSPF的报文类型</h4> <blockquote><img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202304011000054.png" alt="image-20230401100054804" style="zoom:33%;"></blockquote> <h4 id="full-adjacency-relationship-requirements"><a href="#full-adjacency-relationship-requirements" class="header-anchor">#</a> Full-Adjacency Relationship Requirements</h4> <img src="https://cdn.jsdelivr.net/gh/Wolfxin/MyPicGo/img/image-20220620202409172.png" alt="image-20220620202409172" style="zoom:33%;"> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202303300419982.png" alt="image-20220620211633205" style="zoom:43%;"> <blockquote><h5 id="ospf-neighbor-adjacency-requirements"><a href="#ospf-neighbor-adjacency-requirements" class="header-anchor">#</a> OSPF Neighbor/Adjacency Requirements:</h5> <ol><li><p><code>Area-ID</code> must match;</p></li> <li><p>One of the interfaces of the <strong>routers</strong> must be in the same subnet(Area);</p></li> <li><p><strong>OSPF process must not be shutdown</strong>;</p> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202304020313739.png" alt="image-20230402031311582" style="zoom:47%;"></li> <li><p><strong>OSPF Router_IDs</strong> must be unique;(<em>Routers with matching OSPF router IDs can't become neighbors</em>)</p></li> <li><p><strong>Hello and Dead timers</strong> must match;</p> <blockquote><ul><li>Hello间隔用于设定发送两个Hello 数据包之间的移计数。</li> <li>而dead间隔是指路由器发出的Hello 数据包没有被邻居看到，因而宣称此OSPF 路由器右机所经过的秒数。</li> <li>OSPF 要求，两个邻居间设置的这些时间间隔必须是完全相同的。如果这些间隔中的任何一个不相同，则此网络分段上的路由器将不能成为邻居。可以使用show ip ospf interface 命令来查看这些定时器。</li></ul></blockquote></li> <li><p><code>Authentication password</code> must match;</p> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202304020319565.png" alt="image-20230402031914435" style="zoom:45%;"></li> <li><p><strong>Stub Area Flag</strong> must match;</p></li> <li><p><strong>IP MTU settings</strong> must match(The default is usually 1500 bytes);</p> <blockquote><p>Even if the settings don’t match, the neighbors can become OSPF neighbors, but OSPF won’t function properly.</p> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202304020323285.png" alt="image-20230402032356106" style="zoom:45%;"></blockquote></li> <li><p>The OSPF network type must match.</p> <blockquote><p>If two routers have an OSPF network type mismatch, they will form an OSPF adjacency but won't [<strong>learn OSPF routes</strong>].</p> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202304020326891.png" alt="image-20230402032613680" style="zoom:43%;"> <p>R2’s loopback address should be in R1’s, but not.</p> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202304020327992.png" alt="image-20230402032716728" style="zoom:35%;"></blockquote></li></ol></blockquote> <h4 id="ospf的三张表"><a href="#ospf的三张表" class="header-anchor">#</a> OSPF的三张表</h4> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202303300419017.png" alt="image-20220620202258962" style="zoom:33%;"> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>show <span class="token function">ip</span> ospf neighbor
show <span class="token function">ip</span> ospf topology
show <span class="token function">ip</span> route
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="ospf-network-types"><a href="#ospf-network-types" class="header-anchor">#</a> OSPF Network Types</h3> <blockquote><p>The OSPF ‘<strong>network type</strong>’ refers to <strong>the type of connection between OSPF neighbors</strong> (Ethernet, etc).</p> <p>There are three main OSPF network types:</p> <ul><li><strong>Broadcast</strong>: enabled by default on <strong>Ethernet</strong> and <em>FDDI (Fiber Distributed Data Interfaces)</em> interfaces;</li> <li><strong>Point-to-point</strong>: enabled by default on <em>PPP</em> (Point-to-Point Protocol) and <em>HDLC</em> (High-Level Data Link Control) interfaces;</li> <li><strong>Non-broadcast</strong>: enabled by default on <em>Frame Relay</em> and <em>X.25</em> interfaces; We won’t cover this network type, but with the ‘Non-broadcast’ network type you must manually configure neighbors.</li></ul> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202304011500167.png" alt="image-20230401150045936" style="zoom:30%;"></blockquote> <h4 id="ospf-broadcast-network"><a href="#ospf-broadcast-network" class="header-anchor">#</a> OSPF Broadcast Network</h4> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202304011256077.png" alt="image-20230401125645934" style="zoom:50%;"> <blockquote><ul><li>In the network diagram above, these are all Ethernet connections, remember ‘G’ means ‘Gigabit Ethernet’.</li> <li><strong>Broadcast Network</strong> is enabled on <em>Ethernet</em> and <em>FDDI interfaces</em> by default.</li> <li>Routers dynamically discover neighbors by <strong>sending/listening for OSPF Hello messages</strong> using the <strong>multicast address 224.0.0.5</strong>.</li></ul></blockquote> <h5 id="dr-bdr"><a href="#dr-bdr" class="header-anchor">#</a> DR/BDR</h5> <blockquote><ul><li>只有在<strong>Broadcast Network</strong>和<strong>Non-Broadcast</strong>多路访问网络(如以太网和帧中继)的网络分段上才会进行DR和BDR的选举。oint-to-Point Network，例如串行WAN连接，不会进行DR/BDR的选举。</li> <li><strong>A DR(Designated Router) and BDR(Backup Designated Router) must be elected on each subnet.</strong> However, in cases like the G1/0 interface of R1, R3, R4, and R5 where there are no OSPF neighbors, there is just a DR, no BDR.</li> <li>Routers which aren’t the DR or BDR for the subnet become a ‘<strong>DROther</strong>’.</li></ul></blockquote> <blockquote><img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202304011424507.png" alt="image-20230401142457246" style="zoom:33%;"> <h6 id="dr-bdr-对减少-the-cost-of-ospf-routing的作用机制"><a href="#dr-bdr-对减少-the-cost-of-ospf-routing的作用机制" class="header-anchor">#</a> DR/BDR 对减少 the Cost of OSPF Routing的作用机制:</h6> <ul><li><strong>Connections between two DROthers stop at 2-way state.</strong></li> <li>**Routers will only continue on to exchange LSAs and form a full OSPF adjacency with the DR and BDR. **</li> <li><strong>And DROthers will form a FULL adjacency only with the DR/BDR.</strong></li></ul></blockquote> <blockquote><h6 id="ospf中-dr-和-bdr的选举规则"><a href="#ospf中-dr-和-bdr的选举规则" class="header-anchor">#</a> ==OSPF中 DR 和 BDR的选举规则==:</h6> <ol><li><p>首先会比较同一网段内各个接口的Priority值(0~255, <strong>默认是1</strong>): <strong>数值越大越优</strong>;</p> <ul><li>if you set the OSPF interface priority to 0, the router <strong>CANNOT</strong> be the DR/BDR for the subnet, no matter what.</li> <li>优先级查看: <code>how ip ospf interface</code>;</li> <li>优先级修改: <code>R2(config-if)#ip ospf priority ?</code></li></ul></li> <li><p>Priority数值相等时, 进行 Router-ID 的比较: <strong>数值越大越优</strong>;</p> <ul><li><p>默认情况下 the Highest IP address on the interfaces, 将在路由器启动时成为该路由器的Router_ID。</p></li> <li><p>可以配置Loopback address来修改RID(在决定Router_ID的时候, loopback地址的优先级比物理地址更高);</p></li> <li><p>也可以使用命令<code>router-id</code>实现对Router_ID的强制修改:</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>R3<span class="token comment">#sh ip ospf</span>
 Routing Process <span class="token string">&quot;ospf 1&quot;</span> with ID <span class="token number">10.1</span>.12.1
R3<span class="token comment">#config t</span>
R3<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#router ospf 1</span>
R3<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#router-id 172.31.1.4</span>
R3<span class="token comment">#Reload or use &quot;clear ip ospf process&quot; command, for this to take effect</span>
                                    
R3<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#do clear ip ospf process</span>
Reset ALL OSPF processes? <span class="token punctuation">[</span>no<span class="token punctuation">]</span>: <span class="token function">yes</span>
    <span class="token number">20</span>:16:35: %OSPF-5-ADJCHG: Process <span class="token number">1</span>, Nbr <span class="token number">10.1</span>.5.1 on FastEthernet0/0
    from FULL to DOWN, Neighbor Down: Adjacency forced to reset
    <span class="token number">20</span>:16:35: %OSPF-5-ADJCHG: Process <span class="token number">1</span>, Nbr <span class="token number">10.1</span>.5.1 on FastEthernet0/0
    from FULL to DOWN, Neighbor Down: Interface down or detached
R3<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#do sh ip ospf</span>
    Routing Process <span class="token string">&quot;ospf 1&quot;</span> with ID <span class="token number">172.31</span>.1.4
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div></li></ul></li></ol> <h6 id="dr-bdr的non-preemptive"><a href="#dr-bdr的non-preemptive" class="header-anchor">#</a> DR/BDR的<code>Non-preemptive</code>:</h6> <p>Once the DR/BDR are selected they will keep their role until <strong>OSPF is reset</strong>, <strong>the interface fails/is shut down</strong>, etc. OSPF选举过程结束后加入的路由器, 或者对现有路由器的OSPF interface Priority和Router_ID进行了修改, 即使拥有更高的 Priority和 Router-ID, 但只要现有的DR不挂掉或者OSPF process没有被重启, DR就不会被新的路由器所抢占;</p></blockquote> <h5 id="lab"><a href="#lab" class="header-anchor">#</a> Lab</h5> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202304011350524.png" alt="image-20230401135022358" style="zoom:43%;"> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token comment"># change the OSPF interface priority of the router</span>
R2<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#int f1/0</span>
R2<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip ospf ?</span>
  <span class="token operator">&lt;</span><span class="token number">1</span>-6553<span class="token operator"><span class="token file-descriptor important">5</span>&gt;</span>           Process ID
  authentication      Enable authentication
  authentication-key  Authentication password <span class="token punctuation">(</span>key<span class="token punctuation">)</span>
  cost                Interface cost
  dead-interval       Interval after <span class="token function">which</span> a neighbor is declared dead
  hello-interval      Time between HELLO packets
  message-digest-key  Message digest authentication password <span class="token punctuation">(</span>key<span class="token punctuation">)</span>
  network             Network <span class="token builtin class-name">type</span>
  priority            Router priority
R2<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip ospf priority ?</span>
  <span class="token operator">&lt;</span><span class="token number">0</span>-25<span class="token operator"><span class="token file-descriptor important">5</span>&gt;</span>  Priority
R2<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip ospf priority 255</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><blockquote><img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202304011351933.png" alt="image-20230401135102759" style="zoom:39%;"> <ul><li>That’s strange. R2’s state is still DROTHER, even though it has the highest priority.</li> <li>Why?  <strong>It’s because the DR/BDR election is ‘non-preemptive’.</strong></li> <li>So, although this is a bad idea to do in a live network, I reset the OSPF process on R5 and let’s see what happens.</li></ul> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202304011353790.png" alt="image-20230401135340545" style="zoom:50%;"> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202304011400091.png" alt="image-20230401140019927" style="zoom:50%;"> <ul><li><p>After I reset the OSPF process on R5, you can see that all of its neighbors went DOWN. Then R2 and R4 returned to the FULL state, but not R3. There’s an important reason!</p></li> <li><p>Then I used the <code>show ip ospf neighbor</code> command to view the neighbor state of R5’s neighbors. Look here, there are two important points about OSPF we can learn by analyzing this section.:</p> <ul><li><p>R4 became the DR, not R2. R2 became the BDR;</p> <p>-&gt; <strong>when the DR goes down, the BDR(R4) becomes the new DR. Then an election is held for the next BDR. R2 has the highest priority, 255, so it became the BDR.</strong></p></li> <li><p>R3 is a <strong>DROther</strong>, and is stable in the 2-way state.</p> <p>-&gt; <strong>DROthers(R3 and R5 in this subnet) will only move to the FULL state with the DR and BDR of the subnet. Its neighbor state with other DROthers(R3 &lt;-&gt; R5) will be 2-way.</strong></p></li></ul></li></ul> <blockquote><p><strong>Conclusion:</strong></p> <ul><li>In the Broadcast Network type, routers will only form a full OSPF adjacency with the DR and BDR of the segment.</li> <li>Therefore, routers only exchange LSAs with the DR and BDR.</li> <li>Remember that, in the 2-way state, routers haven’t shared LSAs with each other yet. All routers will still have the same LSDB, but this reduces the amount of LSAs flooding the network.</li></ul></blockquote></blockquote> <h6 id="假设反例说明"><a href="#假设反例说明" class="header-anchor">#</a> 假设反例说明</h6> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202304011412882.png" alt="image-20230401141244692" style="zoom:25%;"> <blockquote><p>If 6 routers are connected to the same segment and they all share LSAs with each other, it will end up like this. A whole lot of LSAs flooding and congesting the network. How about if we use a DR and BDR?</p> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202304011414253.png" alt="image-20230401141401083" style="zoom:25%;"> <ul><li>If routers only exchange LSAs with the DR and BDR, as you can see the number of LSAs flooding around the network is reduced.</li> <li>By the way, when routers need to send messages to the DR and BDR they use multicast address <code>224.0.0.6</code>. This is different than the OSPF ‘all routers’ multicast address of 224.0.0.5.</li></ul></blockquote> <h4 id="point-to-point-network"><a href="#point-to-point-network" class="header-anchor">#</a> Point-to-Point Network</h4> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202304011435507.png" alt="image-20230401143542358" style="zoom:43%;"> <blockquote><ul><li>The Point-to-Point Network type is <strong>enabled on serial interfaces using the PPP or HDLC encapsulations</strong> by default. (PPP and HDLC are both Layer 2 encapsulations, similar to Ethernet, except they are used on serial connections between 2 routers.)</li> <li>Same as the Broadcast network type, routers <strong>dynamically discover neighbors by sending/listening for OSPF Hello messages using multicast address 224.0.0.5</strong>.</li> <li>The two routers will form a Full adjacency with each other, <strong>without the need to elect a DR and BDR</strong>.</li></ul></blockquote> <h5 id="serial-interfaces"><a href="#serial-interfaces" class="header-anchor">#</a> Serial interfaces:</h5> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202304011441630.png" alt="image-20230401144106193" style="zoom:33%;"> <h6 id="configuration-of-serial-connections"><a href="#configuration-of-serial-connections" class="header-anchor">#</a> Configuration of serial connections</h6> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202304011444019.png" alt="image-20230401144429673" style="zoom:38%;"> <p><strong>The encapsulation type in Point-to-Point Network is HDLC by default:</strong></p> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202304011445712.png" alt="image-20230401144524419" style="zoom:38%;"> <p><strong>Change encapsulation type of Serial Connection to ppp :</strong></p> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202304011446704.png" alt="image-20230401144659513" style="zoom:38%;"> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202304011451282.png" alt="image-20230401145158035" style="zoom:33%;"> <p><strong>Check the DCE/DTE status:</strong></p> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202304011454601.png" alt="image-20230401145417356" style="zoom:38%;"> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202304011456614.png" alt="image-20230401145613408" style="zoom:29%;"> <h4 id="configure-the-ospf-network-type"><a href="#configure-the-ospf-network-type" class="header-anchor">#</a> Configure the OSPF Network Type</h4> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202304011459385.png" alt="image-20230401145945040" style="zoom:33%;"> <h3 id="ospf-lsa-types"><a href="#ospf-lsa-types" class="header-anchor">#</a> OSPF LSA Types</h3> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202304020332893.png" alt="image-20230402033218712" style="zoom:50%;"> <blockquote><ul><li>OSPF LSDB is made up of LSAs.</li> <li>All routers in the same OSPF area share the same LSDB.</li></ul> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202304020343850.png" alt="image-20230402034333629" style="zoom:38%;"> <ul><li>There are 11 types of LSA, but there are only 3 you should know for the CCNA:
<ul><li><strong>Type 1 LSA, the router LSA;</strong> <ul><li>Every router (running OSPF) generates this type of LSA;</li> <li>identifies the router using its <strong>Router ID</strong>;</li> <li>lists networks attached to the router’s OSPF-activated interfaces.</li></ul></li> <li><strong>Type 2 LSA, the ‘network LSA’;</strong> <ul><li>generated by the <strong>DR</strong> of each ‘<strong>multi-access</strong>’ network.(An example of a multi-access network is an Ethernet network using the broadcast network type.)</li> <li>lists the routers which are attached to the multi-access network.</li></ul></li> <li><strong>Type 5 LSA, the ‘AS external LSA’</strong> <ul><li>generated by ASBRs to describe routes to destinations outside of the autonomous system, the OSPF domain.</li></ul></li></ul></li></ul></blockquote> <h3 id="configuration"><a href="#configuration" class="header-anchor">#</a> Configuration</h3> <h4 id="basic-configuration"><a href="#basic-configuration" class="header-anchor">#</a> Basic Configuration</h4> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202303300419637.png" alt="image-20220621085920432" style="zoom:40%;"> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202303300419406.png" alt="image-20220621085951700" style="zoom:40%;"> <blockquote><p>在CCNA阶段, 只需掌握基本的Single-Area的OSPF配置即可</p></blockquote> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>R1<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#router ospf Process_ID   </span>
<span class="token comment"># 各路由器的OSPF Process_ID 是彼此互不相关的(取值介于1~65535), 仅便于维护和区别同一路由器的Process_ID</span>

R1<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#network 每个接口的网段地址 Wildcard_Mask area Area_ID  </span>
<span class="token comment"># &lt;0-4294967295&gt; OSPF area (decimal value)</span>
R1<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#network 0.0.0.0 255.255.255.255 area Area_ID  </span>
<span class="token comment"># small trick, only used in experimental environment</span>


R1<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#passive-interface default</span>
R1<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#no passive-interface Specific_Interface # 在连接其他OSPF路由器的端口上开启OSPF路由信息转发</span>


<span class="token comment"># router-id的手动配置</span>
R1<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#router-id A.B.C.D   # 手动配置后, 需要reload或者执行`clear ip ospf process`来令其生效,But this is a bad idea in a real network, and the router will lose all of its OSPF routes for a short time and won’t be able to forward traffic to those destinations.</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202304010231723.png" alt="image-20230401023138381" style="zoom:33%;"> <blockquote><ul><li><p><strong>Process_ID is totally unrelated to the Area.</strong> A router can run <strong>multiple</strong> OSPF processes at once, and the <strong>Process_ID</strong> is used in the router to identify each of them. Typically you’ll just use a single OSPF process in CCNA.</p> <ul><li>The OSPF process ID is locally significant. <strong>Routers with different Process_IDs can become OSPF neighbors.</strong></li></ul></li> <li><p>Router ID in OSPF order of priority(exactly the same way as in EIGRP):
1) Manual configuration
2) Highest IP address on a loopback interface
3) Highest IP address on a physical interface</p></li> <li><p>The <strong>OSPF <code>network</code> command</strong> requires you to specify the area.</p> <ul><li><p>For the CCNA, you only need to configure single-area(Area 0) in OSPF. (It’s actually possible to use any area number, but it’s considered best practice to use area 0.)</p> <blockquote><p>The <code>network</code> command <strong>functions just like in RIP and EIGRP, simply used to tell the router which interfaces to activate OSPF on.</strong></p> <ol><li>look for any interfaces with an IP address contained in the range specified in the <code>network</code>command;</li> <li>activate OSPF on the interface in the specified area;</li> <li>the router will then try to become OSPF neighbors with other OSPF-activated neighbor routers.</li></ol></blockquote></li></ul></li> <li><p>The command <code>passive-interface</code>:</p> <ul><li>make the router to stop sending OSPF ‘<strong>Hello</strong>’ messages out of the interface.</li> <li>However, the router will <strong>continue to send LSAs</strong> informing its neighbors about the subnet configured on the interface.</li> <li>You should always use this command on interfaces <em>which don’t have any OSPF neighbors</em>.</li></ul></li></ul></blockquote> <blockquote><h5 id="wildcard-mask"><a href="#wildcard-mask" class="header-anchor">#</a> Wildcard Mask</h5> <ul><li><p>配置OSPF可以有许多种不同的方式，但最简单和最容易的做法就是使用<strong>通配符掩码</strong><code>0.0.0.0</code>;</p></li> <li><p>取值与子网掩码相反, <code>通配符掩码 = 255 - 子网掩码</code>;</p></li> <li><p>引例:</p> <ul><li>网络和通配符掩码1.1.1.1 0.0.0.0 的组合将只指定使用1.1.1.1精确配置的接口，而不包含其他的地址; 如果想在指定接口上简单明确地激活OSPF，这种方式确实很有用;</li> <li>如果你要匹配网络中的某个范围，如网络和通配符掩码1.1.0.0 0.0.255.255 的组合将指定一个范围1.1.0.0 - 1.1.255.255。</li></ul></li> <li><p>示例:</p></li></ul> <blockquote><p>下面的路由器使用了4个不同的接口与4个子网相连接:</p> <p><code>192.168.10.64/28</code> ;</p> <p><code>192.168.10.80/28</code> ;</p> <p><code>192.168.10.96/28</code> ;</p> <p><code>192.168.10.8/30</code> 。</p></blockquote> <blockquote><ul><li>所有的接口都需要配置在Area 0中。在我看来，最简单的聚合配置方式是:</li></ul></blockquote> <blockquote><div class="language-sh line-numbers-mode"><pre class="language-sh"><code>Test<span class="token comment">#config t</span>
Test<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#router ospf 1</span>
Test<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#network 192.168.10.0 0.0.0.255 area 0</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></blockquote> <blockquote><ul><li>遗憾的是, 这样简易的配置方式并没有包含在CCNA的目标中!既然这样，我们需要通过使用子网号和通配符，为每个接口创建一个单独的网络声明:</li></ul></blockquote> <blockquote><div class="language-sh line-numbers-mode"><pre class="language-sh"><code>Test<span class="token comment">#conf t</span>
Test<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#router ospf 1</span>
Test<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#network 192.168.10.64 0.0.0.15 area 0</span>
Test<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#network 192.168.10.80 0.0.0.15 area 0</span>
Test<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#network 192.168.10.96 0.0.0.15 area 0</span>
Test<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#network 192.168.10.8 0.0.0.3 area 0</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></blockquote> <blockquote><ul><li>在此使用0.0.0.0 通配符来精确地指定接口的IP地址也是可以的, 但是CCNA 的目标不仅仅是要掌握那些最容易操作的部分</li></ul></blockquote></blockquote> <h5 id="advertise-a-default-route-into-ospf"><a href="#advertise-a-default-route-into-ospf" class="header-anchor">#</a> Advertise a Default Route into OSPF</h5> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>Router<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment"># default-infomation originate</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202304010328735.png" alt="image-20230401032821293" style="zoom:33%;"> <h6 id="查看ospf协议状态信息"><a href="#查看ospf协议状态信息" class="header-anchor">#</a> 查看OSPF协议状态信息</h6> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202304010340944.png" alt="image-20230401034046575" style="zoom:53%;"> <h4 id="more-configuration"><a href="#more-configuration" class="header-anchor">#</a> More configuration</h4> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token comment"># Activate OSPF directly on an interface</span>
R1<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment"># ip ospf Process_ID area Area_ID   </span>

<span class="token comment"># Configure all interfaces as passive interfaces by default: </span>
R1<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment"># passive-interface default</span>

R1<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment"># no passive-interface s0/0/0</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202304011009882.png" alt="image-20230401100948464" style="zoom:33%;"> <h6 id="查看ospf状态信息"><a href="#查看ospf状态信息" class="header-anchor">#</a> 查看OSPF状态信息</h6> <blockquote><p><strong>Note:</strong> The ‘routing for networks’ section is empty, and instead the interfaces you activated OSPF on are displayed here</p></blockquote> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202304011011469.png" alt="image-20230401101106281" style="zoom:43%;"> <hr> <h4 id="configuration-of-p2p-serial-connection"><a href="#configuration-of-p2p-serial-connection" class="header-anchor">#</a> Configuration of P2P serial connection</h4> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>R1<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#int s0/0/0</span>
R1<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 192.168.12.1 255.255.255.252</span>
R1<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip ospf network ?</span>
  broadcast       Specify OSPF broadcast multi-access network
  point-to-point  Specify OSPF point-to-point network
  
R1<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip ospf network point-to-point </span>

R1<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#do show controllers s0/0/0</span>
Interface Serial0/0/0
Hardware is PowerQUICC MPC860
DCE V.35, clock rate <span class="token number">200000</span>    <span class="token comment"># you can know this router is DCE</span>
<span class="token punctuation">[</span>More<span class="token punctuation">]</span>

R1<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#clock rate ?</span>
Speed <span class="token punctuation">(</span>bits per second<span class="token punctuation">)</span>
<span class="token number">1200</span>, <span class="token number">2400</span>, <span class="token number">4800</span>, <span class="token number">9600</span>, <span class="token number">19200</span>, <span class="token number">38400</span>, <span class="token number">56000</span>, <span class="token number">64000</span>, <span class="token number">72000</span>, <span class="token number">125000</span>, <span class="token number">128000</span>, <span class="token number">148000</span>, <span class="token number">250000</span>, <span class="token number">500000</span>, <span class="token number">800000</span>, <span class="token number">1000000</span>, <span class="token number">1300000</span>, <span class="token number">2000000</span>, <span class="token number">4000000</span>        
<span class="token operator">&lt;</span><span class="token number">300</span>-400000<span class="token operator"><span class="token file-descriptor important">0</span>&gt;</span>  Choose clockrate from list above

R1<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#clock rate 128000</span>
R1<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#no shutdown </span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><div class="language-sh line-numbers-mode"><pre class="language-sh"><code>R2<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#int s0/0/0</span>
R2<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 192.168.12.2 255.255.255.252</span>
R1<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip ospf network point-to-point </span>
R1<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#no shutdown </span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="ospf的相关命令"><a href="#ospf的相关命令" class="header-anchor">#</a> OSPF的相关命令</h3> <h4 id="查看命令"><a href="#查看命令" class="header-anchor">#</a> 查看命令</h4> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">sh</span> run int e0/0

R1<span class="token comment">#show ip ospf ?</span>
  <span class="token operator">&lt;</span><span class="token number">1</span>-6553<span class="token operator"><span class="token file-descriptor important">5</span>&gt;</span>       Process ID number
  border-routers  Border and Boundary Router Information
  database        Database summary
  interface       Interface information
  neighbor        Neighbor list
  virtual-links   Virtual <span class="token function">link</span> information
  <span class="token operator">&lt;</span>cr<span class="token operator">&gt;</span>
  
<span class="token comment">#show ip ospf neighbor   # 查看OSPF邻居表</span>
<span class="token comment">#show ip ospf interface brief</span>
<span class="token comment">#show ip ospf route</span>

<span class="token comment">#clear ip route *   # 清空路由表(也包括静态路由)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><ul><li><p><code>show ip ospf</code> 用于显示运行在该路由器上的-个或全部OSPF进程的OSPF信息。这些信息包含路由器ID 、区域信息、SPF 统计和LSA 定时器信息。</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>Corp<span class="token comment">#sh ip ospf</span>
    Routing Process <span class="token string">&quot;ospf 132&quot;</span> with ID <span class="token number">10</span>. <span class="token number">1</span>. <span class="token number">5.1</span>
    Supports only single TOS<span class="token punctuation">(</span>TOSO<span class="token punctuation">)</span> routes
    Supports opaque LSA
    SPF schedule delay <span class="token number">5</span> secs , Hold <span class="token function">time</span> between two SPFs <span class="token number">10</span> secs
    Minimum LSA interval <span class="token number">5</span> secs. Minimum LSA arrival <span class="token number">1</span> secs
    Number of external LSA O. Checksum Sum OxOOOOOO
    Number of opaque AS LSA O. Checksum Sum OxOOOOOO
    Number咱of OCbitless external and opaque AS LSA U 仆
    Number of OoNotAge external and opaque AS LSA <span class="token number">0</span>
    Number of areas <span class="token keyword">in</span> this router is <span class="token number">1</span>. <span class="token number">1</span> normal <span class="token number">0</span> stub <span class="token number">0</span> nssa
    External flood list length <span class="token number">0</span>
        Area BACKBONE<span class="token punctuation">(</span>O<span class="token punctuation">)</span>
            Number of interfaces <span class="token keyword">in</span> this area is <span class="token number">5</span>
            Area has no authentication
            SPF algorithm executed <span class="token number">5</span> <span class="token builtin class-name">times</span>
            Area ranges are
            Number咱of LSA <span class="token number">5</span>. Checksum Sum Ox0283f4
            Number of opaque <span class="token function">link</span> LSA O. Checksum Sum OxOOOOOO
            Number of OCbitless LSA <span class="token number">0</span>
            Number of indication LSA <span class="token number">0</span>
            Number of OoNotAge LSA <span class="token number">0</span>
            Flood list length <span class="token number">0</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div></li> <li><p><code>show ip ospf database</code> 命令将给出在互联网络中路由器的编号(AS)，及相邻路由器的ID(也就是前面提到过的拓扑数据库); 与<code>show ip eigrp topology</code>命令不同，这个命令只显示OSPF路由器，而不是AS中的全部链路</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>Corp<span class="token comment">#sh ip ospf database</span>
      OSPF Router with ID <span class="token punctuation">(</span><span class="token number">10.1</span>.5.1<span class="token punctuation">)</span> <span class="token punctuation">(</span>Process ID <span class="token number">132</span><span class="token punctuation">)</span>
      Router Link States <span class="token punctuation">(</span>Area <span class="token number">0</span><span class="token punctuation">)</span>
    Link ID   ADV Router   Age  Seq<span class="token comment"># Checksum  Link count</span>
    <span class="token number">192.168</span>.20.1 <span class="token number">192.168</span>.20.1  <span class="token number">1585</span>  0x80000006 0x00ae08 <span class="token number">6</span>
    <span class="token number">192.168</span>.40.1 <span class="token number">192.168</span>.40.1  <span class="token number">1005</span>  0x80000005 0x0069c7 <span class="token number">4</span>
    <span class="token number">10.1</span>.5.1  <span class="token number">10.1</span>.5.1   <span class="token number">688</span>  0x80000009 0x008108 <span class="token number">8</span>
    <span class="token number">172.16</span>.10.1 <span class="token number">172.16</span>.10.1  <span class="token number">688</span>  0x80000004 0x0021a6 <span class="token number">2</span>
    
      Net Link States <span class="token punctuation">(</span>Area <span class="token number">0</span><span class="token punctuation">)</span>
    Link ID  ADV Router  Age  Seq<span class="token comment"># Checksum</span>
    <span class="token number">10.1</span>.5.1  <span class="token number">10.1</span>.5.1  <span class="token number">688</span>  0x80000001 0x00c977
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p><code>show ip ospf interface</code> 给出了所有与接口相关的OSPF信息</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>Corp<span class="token comment">#sh ip ospf int f0/0</span>
    FastEthernet0/0 is up, line protocol is up
    Internet address is <span class="token number">10.1</span>.5.1/24, Area <span class="token number">0</span>
    Process ID <span class="token number">132</span>, Router ID <span class="token number">10.1</span>.5.1, Network Type BROADCAST, Cost: <span class="token number">1</span>
    Transmit Delay is <span class="token number">1</span> sec, State DR, Priority <span class="token number">1</span>
    Designated Router <span class="token punctuation">(</span>ID<span class="token punctuation">)</span> <span class="token number">10.1</span>.5.1, Interface address <span class="token number">10.1</span>.5.1
    Backup Designated Router <span class="token punctuation">(</span>ID<span class="token punctuation">)</span> <span class="token number">172.16</span>.10.1, Interface address <span class="token number">10.1</span>.5.2
    Timer intervals configured, Hello <span class="token number">10</span>, Dead <span class="token number">40</span>, Wait <span class="token number">40</span>, Retransmit <span class="token number">5</span>
    Hello due <span class="token keyword">in</span> 00:00:04
    Index <span class="token number">5</span>/5, flood queue length <span class="token number">0</span>
    Next 0x0<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>/0x0<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
    Last flood scan length is <span class="token number">1</span>, maximum is <span class="token number">1</span>
    Last flood scan <span class="token function">time</span> is <span class="token number">0</span> msec, maximum is <span class="token number">0</span> msec
    Neighbor Count is <span class="token number">1</span>, Adjacent neighbor count is <span class="token number">1</span>
    Adjacent with neighbor <span class="token number">172.16</span>.10.1 <span class="token punctuation">(</span>Backup Designated Router<span class="token punctuation">)</span>
    Suppress hello <span class="token keyword">for</span> <span class="token number">0</span> neighbor<span class="token punctuation">(</span>s<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><blockquote><p>The following information is displayed by this command:</p> <ul><li>Interface IP address</li> <li>Area assignment</li> <li>Process ID</li> <li>Router ID</li> <li>Network type</li> <li>Cost</li> <li>Priority</li> <li>DR/BDR election information (if applicable)</li> <li>Hello and Dead timer intervals</li> <li>Adjacent neighbor information</li></ul></blockquote></li> <li><p><code>show ip ospf neighbor</code> 命令汇总了OSPF中关于邻居和邻接状态的信息</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>Corp<span class="token comment">#sh ip ospf neighbor</span>
Neighbor ID Pri State Dead Time Address Interface
<span class="token number">172.16</span>.10.1 <span class="token number">1</span> FULL/DR 00:00:39 <span class="token number">10.1</span>.5.2 FastEthernet0/0
<span class="token number">192.168</span>.20.1 <span class="token number">0</span> FULL/ - 00:00:38 <span class="token number">10.1</span>.2.2 Serial0/0/0
<span class="token number">192.168</span>.20.1 <span class="token number">0</span> FULL/ - 00:00:38 <span class="token number">10.1</span>.3.2 Serial0/0/1
<span class="token number">192.168</span>.40.1 <span class="token number">0</span> FULL/ - 00:00:36 <span class="token number">10.1</span>.4.2 Serial0/1/0
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><blockquote><ul><li>在R3和Corp 路由器间有一个Ethernet Link(广播多路访问)，因此这里会由一个选举过程来决定谁是指定路由器(DR) 以及谁是备份指定路由器(BDR)。</li> <li>点到点链路(使用了串口Serial Port)上不会进行DR/BDR的选举，并且它们显示为 FULL/_</li></ul></blockquote></li> <li><p><code>show ip protocols</code> 不论在路由器上运行OSPF 、EIGRP 、IGRP 、RIP 、BGP ， IS-IS ，或者其他能配置在路由器上的路由选择协议，此命令都非常有用。它提供了一个关于所有当前运行协议的真实操作情况的概述.</p></li></ul> <h4 id="调试命令"><a href="#调试命令" class="header-anchor">#</a> 调试命令</h4> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202303300419665.png" alt="image-20220708133242604" style="zoom:80%;"> <h3 id="配置ospf汇总路由"><a href="#配置ospf汇总路由" class="header-anchor">#</a> 配置OSPF汇总路由</h3> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202303300419731.png" alt="image-20220708144521221" style="zoom:70%;"> <blockquote><p>要汇总区域1到主干区域。中，在OSPF进程ID下使用下列命令。下面是核心(主干)路由器的一个完整OSPF配置:</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>Core<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#router ospf 1</span>
Core<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#network 192.168.10.64 0.0.0.3 area 1</span>
Core<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#network 192.168.10.68 0.0.0.3 area 1</span>
Core<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#network 10.10.10.0 0.0.0.255 area 0</span>
Core<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#area 1 range 192.168.10.64 255.255.255.224</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></blockquote> <h3 id="ospf-terms-自查表"><a href="#ospf-terms-自查表" class="header-anchor">#</a> OSPF terms 自查表</h3> <blockquote><ul><li><p><code>Link</code> A link is a network or router interface assigned to any given network. When an interface is added to the OSPF process, it’s considered by OSPF to be a link. This link, or interface, will have state information associated with it (up or down) as well as one or more IP addresses.</p></li> <li><p><code>OSPF Areas</code> An OSPF area is a grouping of contiguous networks and routers. All routers in the same area share a common Area ID. Because a router can be a member of more than one area at a time, the Area ID is associated with specific interfaces on the router. This would allow some interfaces to belong to area 1 while the remaining interfaces can belong to area 0. All of the routers within the same area have the same topology table. When configuring OSPF, you’ve got to remember that there must be an area 0 and that this is typically considered the backbone area. Areas also play a role in establishing a hierarchical network organization—something that really enhances the scalability of OSPF!</p></li> <li><p><code>Router ID</code> The Router ID (RID) is an IP address used to identify the router. Cisco chooses the Router ID by using the highest IP address of all configured loopback interfaces. If no loopback interfaces are configured with addresses, OSPF will choose the highest IP address of all active physical interfaces.</p></li> <li><p><code>Neighbor</code> Neighbors are two or more routers that have an interface on a single-Area network, such as two routers connected on a point-to-point serial link.</p></li> <li><p><code>Adjacency</code> An adjacency is a relationship between two OSPF routers that permits the direct exchange of route updates. OSPF is really picky about sharing routing information—unlike EIGRP, which directly shares routes with all of its neighbors. Instead, OSPF directly shares routes only with neighbors that have also established adjacencies. And not all neighbors will become adjacent—this depends upon both the type of network and the configuration of the routers.</p></li> <li><p><code>Hello protocol</code> The OSPF Hello protocol provides dynamic neighbor discovery and maintains neighbor relationships. Hello packets and Link State Advertisements (LSAs) build and maintain the topological database. Hello packets are addressed to multicast address <strong>224.0.0.5</strong>.</p></li> <li><p><code>Neighborship database</code> The neighborship database is a list of all OSPF routers for which Hello packets have been seen. A variety of details, including the Router ID and state, are maintained on each router in the neighborship database.</p></li> <li><p><code>Topological database</code> The topological database contains information from all of the Link State Advertisement packets that have been received for an area. The router uses the information from the topology database as input into the Dijkstra algorithm that computes the shortest path to every network.</p></li> <li><p><code>LSA(Link State Advertisement)</code> A LSA is an OSPF data packet containing link-state and routing information that’s shared among OSPF routers. There are different types of LSA packets, and I’ll go into these shortly. An OSPF router will exchange LSA packets only with routers to which it has established adjacencies. ==LSA packets are used to update and maintain the topological database.==</p></li></ul> <h5 id="dr-bdr-2"><a href="#dr-bdr-2" class="header-anchor">#</a> DR/BDR</h5> <ul><li><code>Designated Router</code> A designated router (DR) is elected whenever OSPF routers are connected to the same multi-access network. Cisco likes to call these “broadcast” networks, but really, they are networks that have multiple recipients(接收者). Try not to confuse multi-access with multipoint, which can be easy to do sometimes.</li> <li><code>Backup Designated Router</code> A backup designated router (BDR) is a <em>hot standby</em> for the DR on multi-access links (remember that Cisco sometimes likes to call these “broadcast” networks). The BDR receives all routing updates from OSPF adjacent routers but doesn’t flood LSA updates.</li></ul> <h5 id="network-types-in-ospf"><a href="#network-types-in-ospf" class="header-anchor">#</a> Network types in OSPF</h5> <ul><li><p><code>Broadcast (multi-access)</code> Broadcast (multi-access) networks such as Ethernet allow multiple devices to connect to (or access) the same network as well as provide a broadcast ability in which a single packet is delivered to all nodes on the network. In OSPF, a DR and a BDR must be elected for each broadcast multi-access network.</p></li> <li><p><code>Non-broadcast</code> multi-access Non-broadcast multi-access (NBMA) networks are types such as Frame Relay, X.25, and Asynchronous Transfer Mode (ATM). These networks <strong>allow for multi-access but have no broadcast ability like Ethernet</strong>. So, NBMA networks require special OSPF configuration to function properly and neighbor relationships must be defined.</p> <ul><li>DR and BDR are elected on <strong>Broadcast</strong> and <strong>NMBA(Non-Broadcast Multi-Access)</strong> networks. Elections are covered in detail later in this chapter.</li></ul></li> <li><p><code>Point-to-point</code> Point-to-point refers to a type of network topology consisting of a <em>direct connection between two routers that provides a single communication path</em>. The point-to-point connection can be physical, as in a serial cable directly connecting two routers, or it can be logical, as in two routers that are thousands of miles apart yet connected by a circuit in a Frame Relay network. In either case, ==this type of configuration eliminates the need for DRs or BDRs but neighbors are discovered automatically.==</p></li> <li><p><code>Point-to-multipoint</code> Point-to-multipoint refers to a type of network topology consisting of <strong>a series of connections between a single interface on one router and multiple destination routers</strong>. All of the interfaces on all of the routers sharing the point-to-multipoint connection belong to the same network. As with ==point-to-point, DRs or BDRs are not needed.==</p></li></ul></blockquote> <h3 id="quiz"><a href="#quiz" class="header-anchor">#</a> Quiz</h3> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202304010403276.png" alt="image-20230401040322940" style="zoom:33%;"> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202304010404624.png" alt="image-20230401040422340" style="zoom:33%;"> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202304010408757.png" alt="image-20230401040834534" style="zoom:33%;"> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202304010409885.png" alt="image-20230401040911586" style="zoom:33%;"> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202304010411243.png" alt="image-20230401041109054" style="zoom:60%;"> <p><img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202304011021309.png" alt="image-20230401102157149"></p> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202304020434136.png" alt="image-20230402043432801" style="zoom:33%;"></div></div> <!----> <div class="page-edit"><div class="edit-link"><a href="https://github.com/Jonas-Wolfxin/Jonas-Wolfxin.github.io/edit/main/docs/40.网络运维/05.CCNA/10.CCNA知识笔记/17.DynamicRouting_P2_OSPF.md" target="_blank" rel="noopener noreferrer">编辑此页</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----> <div class="last-updated"><span class="prefix">last Updated:</span> <span class="time">2023/06/08, 22:42:49</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/d70851/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">Dynamic Routing P1 RIP EIGRP</div></a> <a href="/pages/32db2d/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">Layer 3 Forwarding</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/pages/d70851/" class="prev">Dynamic Routing P1 RIP EIGRP</a></span> <span class="next"><a href="/pages/32db2d/">Layer 3 Forwarding</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/pages/32db2d/"><div>
            Layer 3 Forwarding
            <!----></div></a> <span class="date">06-07</span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/6b8f16/"><div>
            Layer 2 Forwarding
            <!----></div></a> <span class="date">06-06</span></dt></dl><dl><dd>03</dd> <dt><a href="/pages/fe5ceb/"><div>
            Virtual Routing and Forwarding
            <!----></div></a> <span class="date">05-16</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="https://github.com/Jonas-Wolfxin" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://gitee.com/Jonas-Wolfxin" title="Gitee" target="_blank" class="iconfont icon-gitee"></a><a href="https://cdn.jsdelivr.net/gh/Wolfxin/MyPicGo/img/202206100005451.jpg" title="Wechat: @Jonas_Wolfxin" target="_blank" class="iconfont icon-weixin"></a><a href="http://wpa.qq.com/msgrd?v=3&amp;uin=1914303043&amp;site=qq&amp;menu=yes" title="QQ: 1914303043" target="_blank" class="iconfont icon-QQ"></a><a href="mailto:wolfxin@outlook.com" title="联系我" target="_blank" class="iconfont icon-youjian"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2021-2023
    <span>Jonas Wolfxin's Blog</span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <div class="body-bg" style="background:url() center center / cover no-repeat;opacity:0.5;"></div> <!----> <!----></div><div class="global-ui"><div></div><div></div><div></div><div></div><!----><!----><APlayer audio="" fixed="true" mini="true" theme="#b7daff" loop="loop" order="list" preload="auto" volume="0.7" mutex="true" lrc-type="0" list-max-height="250" storage-name="vuepress-plugin-meting" id="aplayer-fixed"></APlayer><div></div></div></div>
    <script src="/assets/js/app.d858ddbb.js" defer></script><script src="/assets/js/2.309e711a.js" defer></script><script src="/assets/js/140.f85c3c58.js" defer></script><script src="/assets/js/16.acd3428d.js" defer></script><script src="/assets/js/8.5b4b6c67.js" defer></script><script src="/assets/js/10.58f97cc7.js" defer></script><script src="/assets/js/17.0b7a5267.js" defer></script>
  </body>
</html>
