<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Layer 2 Forwarding | Jonas Wolfxin Blog</title>
    <meta name="generator" content="VuePress 1.8.0">
    <link rel="shortcut icon" href="/img/favicon.ico">
    <link rel="stylesheet" href="//at.alicdn.com/t/font_3114978_qe0b39no76.css">
    <noscript><meta http-equiv="refresh" content="0; url=https://www.youngkbt.cn/noscript/"><style>.theme-vdoing-content { display:none }</noscript>
    <script>var _hmt = _hmt || [];
          (function() {
            var hm = document.createElement("script");
            hm.src = "https://hm.baidu.com/hm.js?267c5680c2ffb468ca29c45ffe6801da"; 
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
          })();
          </script>
    <meta name="description" content="Jonas Wolfxin个人博客, VuePress搭建, 使用了 Vdoing 主题, 学习Java, Web, 框架, 微服务, 工具, 前端等相关知识, 记录生活和技术路程, 同时分享编程技巧。">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <meta name="keywords" content="Jonas Wolfxin个人博客, VuePress搭建, 学习Java、Web、框架、微服务、工具、前端等相关知识, 记录生活和技术路程。">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/assets/css/0.styles.7d3fc896.css" as="style"><link rel="preload" href="/assets/js/app.d858ddbb.js" as="script"><link rel="preload" href="/assets/js/2.309e711a.js" as="script"><link rel="preload" href="/assets/js/137.f6c998f0.js" as="script"><link rel="preload" href="/assets/js/16.acd3428d.js" as="script"><link rel="preload" href="/assets/js/8.5b4b6c67.js" as="script"><link rel="preload" href="/assets/js/10.58f97cc7.js" as="script"><link rel="preload" href="/assets/js/17.0b7a5267.js" as="script"><link rel="prefetch" href="/assets/js/100.a245150c.js"><link rel="prefetch" href="/assets/js/101.dc21b366.js"><link rel="prefetch" href="/assets/js/102.d5a6dfd2.js"><link rel="prefetch" href="/assets/js/103.7675e438.js"><link rel="prefetch" href="/assets/js/104.08bff44e.js"><link rel="prefetch" href="/assets/js/105.8bf552ad.js"><link rel="prefetch" href="/assets/js/106.b3388dcc.js"><link rel="prefetch" href="/assets/js/107.708d16a8.js"><link rel="prefetch" href="/assets/js/108.8d67c3a1.js"><link rel="prefetch" href="/assets/js/109.adb072ef.js"><link rel="prefetch" href="/assets/js/11.1cff9f55.js"><link rel="prefetch" href="/assets/js/110.6a33e945.js"><link rel="prefetch" href="/assets/js/111.5b6daef7.js"><link rel="prefetch" href="/assets/js/112.30fa856b.js"><link rel="prefetch" href="/assets/js/113.2bea19a6.js"><link rel="prefetch" href="/assets/js/114.78693b98.js"><link rel="prefetch" href="/assets/js/115.24b2f36f.js"><link rel="prefetch" href="/assets/js/116.121c60d7.js"><link rel="prefetch" href="/assets/js/117.c2a343f1.js"><link rel="prefetch" href="/assets/js/118.4f472067.js"><link rel="prefetch" href="/assets/js/119.24255046.js"><link rel="prefetch" href="/assets/js/12.bca3c221.js"><link rel="prefetch" href="/assets/js/120.c049d4ee.js"><link rel="prefetch" href="/assets/js/121.27c7097d.js"><link rel="prefetch" href="/assets/js/122.89ae0c7e.js"><link rel="prefetch" href="/assets/js/123.92ff168d.js"><link rel="prefetch" href="/assets/js/124.42567e10.js"><link rel="prefetch" href="/assets/js/125.3bd92459.js"><link rel="prefetch" href="/assets/js/126.ce3b5ff1.js"><link rel="prefetch" href="/assets/js/127.62073e16.js"><link rel="prefetch" href="/assets/js/128.1e61e62d.js"><link rel="prefetch" href="/assets/js/129.1abfd9a0.js"><link rel="prefetch" href="/assets/js/13.fd509ce7.js"><link rel="prefetch" href="/assets/js/130.fd10656f.js"><link rel="prefetch" href="/assets/js/131.739a70c7.js"><link rel="prefetch" href="/assets/js/132.aead2e49.js"><link rel="prefetch" href="/assets/js/133.c996494c.js"><link rel="prefetch" href="/assets/js/134.3f032f05.js"><link rel="prefetch" href="/assets/js/135.c35c5612.js"><link rel="prefetch" href="/assets/js/136.b1a52d43.js"><link rel="prefetch" href="/assets/js/138.5165a511.js"><link rel="prefetch" href="/assets/js/139.84e0898b.js"><link rel="prefetch" href="/assets/js/14.9a0c9450.js"><link rel="prefetch" href="/assets/js/140.f85c3c58.js"><link rel="prefetch" href="/assets/js/141.1b18b352.js"><link rel="prefetch" href="/assets/js/142.61b694c2.js"><link rel="prefetch" href="/assets/js/143.ca56fc45.js"><link rel="prefetch" href="/assets/js/144.634fc96a.js"><link rel="prefetch" href="/assets/js/145.7db28ded.js"><link rel="prefetch" href="/assets/js/146.0e801c74.js"><link rel="prefetch" href="/assets/js/147.26faa263.js"><link rel="prefetch" href="/assets/js/148.927832d5.js"><link rel="prefetch" href="/assets/js/149.8755eb42.js"><link rel="prefetch" href="/assets/js/15.d3755cc5.js"><link rel="prefetch" href="/assets/js/150.906609e5.js"><link rel="prefetch" href="/assets/js/151.7a52439b.js"><link rel="prefetch" href="/assets/js/152.c822b1fb.js"><link rel="prefetch" href="/assets/js/153.593575cc.js"><link rel="prefetch" href="/assets/js/154.2a16d8e7.js"><link rel="prefetch" href="/assets/js/155.6a18c733.js"><link rel="prefetch" href="/assets/js/156.bb65d909.js"><link rel="prefetch" href="/assets/js/157.862f6419.js"><link rel="prefetch" href="/assets/js/158.db76ed26.js"><link rel="prefetch" href="/assets/js/159.0f0b1ee8.js"><link rel="prefetch" href="/assets/js/160.8f421d08.js"><link rel="prefetch" href="/assets/js/161.4a521888.js"><link rel="prefetch" href="/assets/js/162.601dbfca.js"><link rel="prefetch" href="/assets/js/163.d76b166d.js"><link rel="prefetch" href="/assets/js/164.99b00d17.js"><link rel="prefetch" href="/assets/js/165.7809f82c.js"><link rel="prefetch" href="/assets/js/166.b29e508c.js"><link rel="prefetch" href="/assets/js/167.71af6bb1.js"><link rel="prefetch" href="/assets/js/168.aad10cfc.js"><link rel="prefetch" href="/assets/js/169.d807fd76.js"><link rel="prefetch" href="/assets/js/170.8cd1462a.js"><link rel="prefetch" href="/assets/js/171.ecbf63cf.js"><link rel="prefetch" href="/assets/js/172.e75cd345.js"><link rel="prefetch" href="/assets/js/173.1ab612d0.js"><link rel="prefetch" href="/assets/js/174.2366c5d2.js"><link rel="prefetch" href="/assets/js/175.50c5731b.js"><link rel="prefetch" href="/assets/js/176.ac8ad112.js"><link rel="prefetch" href="/assets/js/177.1abcf5d4.js"><link rel="prefetch" href="/assets/js/178.b937dacc.js"><link rel="prefetch" href="/assets/js/179.b6fa0b6d.js"><link rel="prefetch" href="/assets/js/18.64b7e666.js"><link rel="prefetch" href="/assets/js/180.e4a8bc36.js"><link rel="prefetch" href="/assets/js/181.b916da57.js"><link rel="prefetch" href="/assets/js/182.27a2bdb4.js"><link rel="prefetch" href="/assets/js/183.dcb4d635.js"><link rel="prefetch" href="/assets/js/184.820c8f5f.js"><link rel="prefetch" href="/assets/js/185.6654f558.js"><link rel="prefetch" href="/assets/js/186.2749179c.js"><link rel="prefetch" href="/assets/js/187.a301fd95.js"><link rel="prefetch" href="/assets/js/188.3a9e3226.js"><link rel="prefetch" href="/assets/js/189.5f2b0e83.js"><link rel="prefetch" href="/assets/js/19.7a102d25.js"><link rel="prefetch" href="/assets/js/190.76dc6e42.js"><link rel="prefetch" href="/assets/js/191.b6c01ef6.js"><link rel="prefetch" href="/assets/js/192.bd87e976.js"><link rel="prefetch" href="/assets/js/193.e3b20021.js"><link rel="prefetch" href="/assets/js/194.d83d205c.js"><link rel="prefetch" href="/assets/js/195.e53e330d.js"><link rel="prefetch" href="/assets/js/196.1fd35397.js"><link rel="prefetch" href="/assets/js/197.cb0858f8.js"><link rel="prefetch" href="/assets/js/198.651004c0.js"><link rel="prefetch" href="/assets/js/199.4a4a16ae.js"><link rel="prefetch" href="/assets/js/20.2e6fe8d4.js"><link rel="prefetch" href="/assets/js/200.0347a232.js"><link rel="prefetch" href="/assets/js/201.77c9f572.js"><link rel="prefetch" href="/assets/js/202.6f66fc82.js"><link rel="prefetch" href="/assets/js/203.c12f2fd1.js"><link rel="prefetch" href="/assets/js/204.0b74eb4e.js"><link rel="prefetch" href="/assets/js/205.82129b16.js"><link rel="prefetch" href="/assets/js/206.0240cea0.js"><link rel="prefetch" href="/assets/js/207.d2d2dd99.js"><link rel="prefetch" href="/assets/js/208.f1073a08.js"><link rel="prefetch" href="/assets/js/209.3b1e4cbe.js"><link rel="prefetch" href="/assets/js/21.179bedf0.js"><link rel="prefetch" href="/assets/js/210.b8b67413.js"><link rel="prefetch" href="/assets/js/211.455c8e40.js"><link rel="prefetch" href="/assets/js/212.8735e669.js"><link rel="prefetch" href="/assets/js/213.f77fefc5.js"><link rel="prefetch" href="/assets/js/214.97d827be.js"><link rel="prefetch" href="/assets/js/215.bc08fe35.js"><link rel="prefetch" href="/assets/js/216.fa811698.js"><link rel="prefetch" href="/assets/js/217.b965b7c6.js"><link rel="prefetch" href="/assets/js/218.6a91db8b.js"><link rel="prefetch" href="/assets/js/219.fb3d8166.js"><link rel="prefetch" href="/assets/js/22.8268ce6e.js"><link rel="prefetch" href="/assets/js/220.1577cda2.js"><link rel="prefetch" href="/assets/js/221.ceea7cea.js"><link rel="prefetch" href="/assets/js/222.3985b121.js"><link rel="prefetch" href="/assets/js/223.40f0edd0.js"><link rel="prefetch" href="/assets/js/224.bcdfffa8.js"><link rel="prefetch" href="/assets/js/225.13252b88.js"><link rel="prefetch" href="/assets/js/226.2afd6de5.js"><link rel="prefetch" href="/assets/js/227.39e5b8f1.js"><link rel="prefetch" href="/assets/js/228.f24cb5b5.js"><link rel="prefetch" href="/assets/js/229.582f76a9.js"><link rel="prefetch" href="/assets/js/23.3b76f2ef.js"><link rel="prefetch" href="/assets/js/230.50a93474.js"><link rel="prefetch" href="/assets/js/231.063e02af.js"><link rel="prefetch" href="/assets/js/232.08153e5d.js"><link rel="prefetch" href="/assets/js/233.e8a2f480.js"><link rel="prefetch" href="/assets/js/234.4e784ee0.js"><link rel="prefetch" href="/assets/js/235.fe1262b2.js"><link rel="prefetch" href="/assets/js/236.5b6a52cf.js"><link rel="prefetch" href="/assets/js/237.36fae37d.js"><link rel="prefetch" href="/assets/js/238.7369ac7a.js"><link rel="prefetch" href="/assets/js/239.7fff287f.js"><link rel="prefetch" href="/assets/js/24.7c6b119c.js"><link rel="prefetch" href="/assets/js/240.96b67d8a.js"><link rel="prefetch" href="/assets/js/241.6cca43be.js"><link rel="prefetch" href="/assets/js/242.063840f3.js"><link rel="prefetch" href="/assets/js/243.e25e2acc.js"><link rel="prefetch" href="/assets/js/244.6058b76a.js"><link rel="prefetch" href="/assets/js/245.cab0cb5f.js"><link rel="prefetch" href="/assets/js/246.38dba8a1.js"><link rel="prefetch" href="/assets/js/247.58a45597.js"><link rel="prefetch" href="/assets/js/248.5cf1ad4c.js"><link rel="prefetch" href="/assets/js/249.691356bb.js"><link rel="prefetch" href="/assets/js/25.02fab98f.js"><link rel="prefetch" href="/assets/js/250.e2c83a35.js"><link rel="prefetch" href="/assets/js/251.80aa06df.js"><link rel="prefetch" href="/assets/js/252.a3e269d1.js"><link rel="prefetch" href="/assets/js/253.d11f6725.js"><link rel="prefetch" href="/assets/js/26.76ffb425.js"><link rel="prefetch" href="/assets/js/27.ce24313c.js"><link rel="prefetch" href="/assets/js/28.d8dbc96b.js"><link rel="prefetch" href="/assets/js/29.2b3bed04.js"><link rel="prefetch" href="/assets/js/3.d6952836.js"><link rel="prefetch" href="/assets/js/30.26988c7b.js"><link rel="prefetch" href="/assets/js/31.cc5781e4.js"><link rel="prefetch" href="/assets/js/32.80d8b83b.js"><link rel="prefetch" href="/assets/js/33.d97c7068.js"><link rel="prefetch" href="/assets/js/34.962f9100.js"><link rel="prefetch" href="/assets/js/35.23d8a044.js"><link rel="prefetch" href="/assets/js/36.6d349d82.js"><link rel="prefetch" href="/assets/js/37.b08f29c8.js"><link rel="prefetch" href="/assets/js/38.8b2bd27d.js"><link rel="prefetch" href="/assets/js/39.45a0b016.js"><link rel="prefetch" href="/assets/js/4.8b22777d.js"><link rel="prefetch" href="/assets/js/40.e6f6cb43.js"><link rel="prefetch" href="/assets/js/41.c756e119.js"><link rel="prefetch" href="/assets/js/42.bbc17b0f.js"><link rel="prefetch" href="/assets/js/43.8e0ce4ca.js"><link rel="prefetch" href="/assets/js/44.b91517af.js"><link rel="prefetch" href="/assets/js/45.416dfe4d.js"><link rel="prefetch" href="/assets/js/46.c00eeb87.js"><link rel="prefetch" href="/assets/js/47.29d200b3.js"><link rel="prefetch" href="/assets/js/48.7f066ab6.js"><link rel="prefetch" href="/assets/js/49.0e010fee.js"><link rel="prefetch" href="/assets/js/5.e6781b57.js"><link rel="prefetch" href="/assets/js/50.1bb477d0.js"><link rel="prefetch" href="/assets/js/51.66468406.js"><link rel="prefetch" href="/assets/js/52.5cf7fbd0.js"><link rel="prefetch" href="/assets/js/53.d6f04354.js"><link rel="prefetch" href="/assets/js/54.59ca865c.js"><link rel="prefetch" href="/assets/js/55.fb0ad69c.js"><link rel="prefetch" href="/assets/js/56.c47a2d12.js"><link rel="prefetch" href="/assets/js/57.f5d65bb3.js"><link rel="prefetch" href="/assets/js/58.c5761ef2.js"><link rel="prefetch" href="/assets/js/59.9fe56073.js"><link rel="prefetch" href="/assets/js/6.9b07e200.js"><link rel="prefetch" href="/assets/js/60.ee1a5c93.js"><link rel="prefetch" href="/assets/js/61.ed5a91fd.js"><link rel="prefetch" href="/assets/js/62.4c69d23d.js"><link rel="prefetch" href="/assets/js/63.a396c29b.js"><link rel="prefetch" href="/assets/js/64.6f39dd9c.js"><link rel="prefetch" href="/assets/js/65.4cb24e13.js"><link rel="prefetch" href="/assets/js/66.aad4aa20.js"><link rel="prefetch" href="/assets/js/67.36e86f95.js"><link rel="prefetch" href="/assets/js/68.cbcfb2e0.js"><link rel="prefetch" href="/assets/js/69.8f5b0c08.js"><link rel="prefetch" href="/assets/js/7.4d64b8e6.js"><link rel="prefetch" href="/assets/js/70.1e7d144f.js"><link rel="prefetch" href="/assets/js/71.77fb0b43.js"><link rel="prefetch" href="/assets/js/72.bf3bb5b9.js"><link rel="prefetch" href="/assets/js/73.e059a41d.js"><link rel="prefetch" href="/assets/js/74.cae09eb3.js"><link rel="prefetch" href="/assets/js/75.f89a6d2e.js"><link rel="prefetch" href="/assets/js/76.cfb3df08.js"><link rel="prefetch" href="/assets/js/77.f4fa62e6.js"><link rel="prefetch" href="/assets/js/78.464e83f6.js"><link rel="prefetch" href="/assets/js/79.71895252.js"><link rel="prefetch" href="/assets/js/80.58d501fe.js"><link rel="prefetch" href="/assets/js/81.948adca1.js"><link rel="prefetch" href="/assets/js/82.bfd7ff16.js"><link rel="prefetch" href="/assets/js/83.3920a558.js"><link rel="prefetch" href="/assets/js/84.d5b9372a.js"><link rel="prefetch" href="/assets/js/85.3be0afac.js"><link rel="prefetch" href="/assets/js/86.29f7272d.js"><link rel="prefetch" href="/assets/js/87.93a0bc8e.js"><link rel="prefetch" href="/assets/js/88.5be81cc2.js"><link rel="prefetch" href="/assets/js/89.bc9cad5d.js"><link rel="prefetch" href="/assets/js/9.dc7a3982.js"><link rel="prefetch" href="/assets/js/90.5ba7972c.js"><link rel="prefetch" href="/assets/js/91.6ca92166.js"><link rel="prefetch" href="/assets/js/92.cb997f9f.js"><link rel="prefetch" href="/assets/js/93.941f52c6.js"><link rel="prefetch" href="/assets/js/94.c34116e0.js"><link rel="prefetch" href="/assets/js/95.0aa6895c.js"><link rel="prefetch" href="/assets/js/96.fd230ec0.js"><link rel="prefetch" href="/assets/js/97.375c63c2.js"><link rel="prefetch" href="/assets/js/98.5f4889ea.js"><link rel="prefetch" href="/assets/js/99.476bd54f.js">
    <link rel="stylesheet" href="/assets/css/0.styles.7d3fc896.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu have-body-img"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/index/logo.png" alt="Jonas Wolfxin Blog" class="logo"> <span class="site-name can-hide">Jonas Wolfxin Blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">Home🏠</a></div><div class="nav-item"><a href="/navigation/" class="nav-link">Navigation🧭</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Front End" class="dropdown-title"><a href="/front/" class="link-title">Front End</a> <span class="title" style="display:none;">Front End</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Basics</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/html/" class="nav-link">HTML</a></li><li class="dropdown-subitem"><a href="/css/" class="nav-link">CSS</a></li><li class="dropdown-subitem"><a href="/javascript/" class="nav-link">JavaScript</a></li></ul></li><li class="dropdown-item"><h4>Frame</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/react/" class="nav-link">React</a></li><li class="dropdown-subitem"><a href="/vue2/" class="nav-link">Vue2</a></li><li class="dropdown-subitem"><a href="/vue3/" class="nav-link">Vue3</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Database" class="dropdown-title"><a href="/database/" class="link-title">Database</a> <span class="title" style="display:none;">Database</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>SQL 数据库</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/mysql/" class="nav-link">MySQL</a></li><li class="dropdown-subitem"><a href="/postgresql/" class="nav-link">PostgreSQL</a></li></ul></li><li class="dropdown-item"><h4>NoSQL 数据库</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/redis/" class="nav-link">Redis</a></li><li class="dropdown-subitem"><a href="/es/" class="nav-link">ElasticSearch</a></li><li class="dropdown-subitem"><a href="/mongodb/" class="nav-link">MongoDB</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Python" class="dropdown-title"><a href="/pythonstrdy/" class="link-title">Python</a> <span class="title" style="display:none;">Python</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/python_basics/" class="nav-link">Python Basics</a></li><li class="dropdown-item"><!----> <a href="/python_advanced/" class="nav-link">Python Advanced</a></li><li class="dropdown-item"><!----> <a href="/python_projects/" class="nav-link">Python Projects</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="网络运维" class="dropdown-title"><a href="/tool/" class="link-title">网络运维</a> <span class="title" style="display:none;">网络运维</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>CCNA</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/91ab17/" class="nav-link">CCNA知识</a></li><li class="dropdown-subitem"><a href="/pages/55766c/" class="nav-link">CCNA题库</a></li><li class="dropdown-subitem"><a href="/pages/f61749/" class="nav-link">Cisco NetAca</a></li></ul></li><li class="dropdown-item"><!----> <a href="/pages/4f0673/" class="nav-link">Ansible</a></li><li class="dropdown-item"><h4>版本管理</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/maven/" class="nav-link">Maven</a></li><li class="dropdown-subitem"><a href="/git/" class="nav-link">Git</a></li></ul></li><li class="dropdown-item"><h4>部署</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/linux/" class="nav-link">Linux</a></li><li class="dropdown-subitem"><a href="/docker/" class="nav-link">Docker</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="About" class="dropdown-title"><a href="/archives/" class="link-title">About</a> <span class="title" style="display:none;">About</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>This Blog</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/categories/" class="nav-link">Categories</a></li><li class="dropdown-subitem"><a href="/tags/" class="nav-link">Tags</a></li><li class="dropdown-subitem"><a href="/archives/" class="nav-link">Archives</a></li></ul></li><li class="dropdown-item"><h4>About Me</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/whell/web/" class="nav-link">Collection</a></li><li class="dropdown-subitem"><a href="/about/website/introduce/" class="nav-link">Introduction</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="星河万里" class="dropdown-title"><a href="/inGermany/" class="link-title">星河万里</a> <span class="title" style="display:none;">星河万里</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>德国驾照B级</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/8a9dd0/" class="nav-link">理论准备</a></li><li class="dropdown-subitem"><a href="/pages/b79ef5/" class="nav-link">实践准备</a></li></ul></li><li class="dropdown-item"><h4>星河万里</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/bcf060/" class="nav-link">Vim操作</a></li><li class="dropdown-subitem"><a href="/pages/c11fcf/" class="nav-link">Gitemoji</a></li><li class="dropdown-subitem"><a href="/pages/055f2e/" class="nav-link">无妄经</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/message-board/" class="nav-link">MessageBoard📋</a></div> <a href="https://github.com/Jonas-Wolfxin/Jonas-Wolfxin.github.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="https://cdn.jsdelivr.net/gh/Wolfxin/MyPicGo/img/202206092309359.png"> <div class="blogger-info"><h3>Jonas 林风</h3> <span>吾志所向，万夫不当；披荆斩棘，奋而继往。</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">Home🏠</a></div><div class="nav-item"><a href="/navigation/" class="nav-link">Navigation🧭</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Front End" class="dropdown-title"><a href="/front/" class="link-title">Front End</a> <span class="title" style="display:none;">Front End</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Basics</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/html/" class="nav-link">HTML</a></li><li class="dropdown-subitem"><a href="/css/" class="nav-link">CSS</a></li><li class="dropdown-subitem"><a href="/javascript/" class="nav-link">JavaScript</a></li></ul></li><li class="dropdown-item"><h4>Frame</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/react/" class="nav-link">React</a></li><li class="dropdown-subitem"><a href="/vue2/" class="nav-link">Vue2</a></li><li class="dropdown-subitem"><a href="/vue3/" class="nav-link">Vue3</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Database" class="dropdown-title"><a href="/database/" class="link-title">Database</a> <span class="title" style="display:none;">Database</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>SQL 数据库</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/mysql/" class="nav-link">MySQL</a></li><li class="dropdown-subitem"><a href="/postgresql/" class="nav-link">PostgreSQL</a></li></ul></li><li class="dropdown-item"><h4>NoSQL 数据库</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/redis/" class="nav-link">Redis</a></li><li class="dropdown-subitem"><a href="/es/" class="nav-link">ElasticSearch</a></li><li class="dropdown-subitem"><a href="/mongodb/" class="nav-link">MongoDB</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Python" class="dropdown-title"><a href="/pythonstrdy/" class="link-title">Python</a> <span class="title" style="display:none;">Python</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/python_basics/" class="nav-link">Python Basics</a></li><li class="dropdown-item"><!----> <a href="/python_advanced/" class="nav-link">Python Advanced</a></li><li class="dropdown-item"><!----> <a href="/python_projects/" class="nav-link">Python Projects</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="网络运维" class="dropdown-title"><a href="/tool/" class="link-title">网络运维</a> <span class="title" style="display:none;">网络运维</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>CCNA</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/91ab17/" class="nav-link">CCNA知识</a></li><li class="dropdown-subitem"><a href="/pages/55766c/" class="nav-link">CCNA题库</a></li><li class="dropdown-subitem"><a href="/pages/f61749/" class="nav-link">Cisco NetAca</a></li></ul></li><li class="dropdown-item"><!----> <a href="/pages/4f0673/" class="nav-link">Ansible</a></li><li class="dropdown-item"><h4>版本管理</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/maven/" class="nav-link">Maven</a></li><li class="dropdown-subitem"><a href="/git/" class="nav-link">Git</a></li></ul></li><li class="dropdown-item"><h4>部署</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/linux/" class="nav-link">Linux</a></li><li class="dropdown-subitem"><a href="/docker/" class="nav-link">Docker</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="About" class="dropdown-title"><a href="/archives/" class="link-title">About</a> <span class="title" style="display:none;">About</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>This Blog</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/categories/" class="nav-link">Categories</a></li><li class="dropdown-subitem"><a href="/tags/" class="nav-link">Tags</a></li><li class="dropdown-subitem"><a href="/archives/" class="nav-link">Archives</a></li></ul></li><li class="dropdown-item"><h4>About Me</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/whell/web/" class="nav-link">Collection</a></li><li class="dropdown-subitem"><a href="/about/website/introduce/" class="nav-link">Introduction</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="星河万里" class="dropdown-title"><a href="/inGermany/" class="link-title">星河万里</a> <span class="title" style="display:none;">星河万里</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>德国驾照B级</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/8a9dd0/" class="nav-link">理论准备</a></li><li class="dropdown-subitem"><a href="/pages/b79ef5/" class="nav-link">实践准备</a></li></ul></li><li class="dropdown-item"><h4>星河万里</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/bcf060/" class="nav-link">Vim操作</a></li><li class="dropdown-subitem"><a href="/pages/c11fcf/" class="nav-link">Gitemoji</a></li><li class="dropdown-subitem"><a href="/pages/055f2e/" class="nav-link">无妄经</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/message-board/" class="nav-link">MessageBoard📋</a></div> <a href="https://github.com/Jonas-Wolfxin/Jonas-Wolfxin.github.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>CCNA</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>CCNA知识笔记</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/1634eb/" class="sidebar-link">网络工程师的介绍</a></li><li><a href="/pages/91ab17/" class="sidebar-link">OSI Model</a></li><li><a href="/pages/68df0c/" class="sidebar-link">IP Addressing</a></li><li><a href="/pages/0cd5e5/" class="sidebar-link">TCP/IP Suite</a></li><li><a href="/pages/32e4ca/" class="sidebar-link">Comparison-TCP Vs UDP</a></li><li><a href="/pages/9876fd/" class="sidebar-link">Cisco IOS CLI</a></li><li><a href="/pages/fabc03/" class="sidebar-link">Switching_VLAN</a></li><li><a href="/pages/778234/" class="sidebar-link">Switching_STP</a></li><li><a href="/pages/85147b/" class="sidebar-link">Switching_EtherChannel</a></li><li><a href="/pages/087c56/" class="sidebar-link">Layer 2 Discovery Protocols</a></li><li><a href="/pages/6b8f16/" aria-current="page" class="active sidebar-link">Layer 2 Forwarding</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/pages/6b8f16/#osi-model-review" class="sidebar-link">OSI Model Review</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/6b8f16/#osi-model" class="sidebar-link">OSI Model</a></li><li class="sidebar-sub-header level3"><a href="/pages/6b8f16/#osi-vs-tco-ip-model" class="sidebar-link">OSI Vs TCO/IP Model</a></li><li class="sidebar-sub-header level3"><a href="/pages/6b8f16/#encapsulation-de-encapsulation" class="sidebar-link">Encapsulation/De-encapsulation</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/6b8f16/#collision-broadcast-domains" class="sidebar-link">Collision &amp; Broadcast domains</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/6b8f16/#collision-domain" class="sidebar-link">Collision Domain</a></li><li class="sidebar-sub-header level3"><a href="/pages/6b8f16/#broadcast-domain" class="sidebar-link">Broadcast Domain</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/6b8f16/#layer-2-forwarding-2" class="sidebar-link">Layer 2 Forwarding</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/6b8f16/#layer-2-forwarding-unknown-unicast" class="sidebar-link">Layer 2 Forwarding — unknown Unicast</a></li><li class="sidebar-sub-header level3"><a href="/pages/6b8f16/#layer-2-forwarding-known-unicast" class="sidebar-link">Layer 2 Forwarding — Known Unicast</a></li><li class="sidebar-sub-header level3"><a href="/pages/6b8f16/#layer-2-forwarding-broadcast" class="sidebar-link">Layer 2 Forwarding — Broadcast</a></li><li class="sidebar-sub-header level3"><a href="/pages/6b8f16/#layer-2-forwarding-multicast" class="sidebar-link">Layer 2 Forwarding — Multicast</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/6b8f16/#mac-address-table" class="sidebar-link">MAC Address Table</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/6b8f16/#mac-address-table-aging" class="sidebar-link">MAC Address Table — Aging</a></li><li class="sidebar-sub-header level3"><a href="/pages/6b8f16/#mac-address-table-learning" class="sidebar-link">MAC Address Table — Learning</a></li><li class="sidebar-sub-header level3"><a href="/pages/6b8f16/#mag-address-table-static-configuration" class="sidebar-link">MAG Address Table — Static Configuration</a></li><li class="sidebar-sub-header level3"><a href="/pages/6b8f16/#mac-address-table-clearing-dynamic-addresses" class="sidebar-link">MAC Address Table — Clearing dynamic addresses</a></li><li class="sidebar-sub-header level3"><a href="/pages/6b8f16/#mag-address-table-count" class="sidebar-link">MAG Address Table — Count</a></li><li class="sidebar-sub-header level3"><a href="/pages/6b8f16/#mac-address-table-filtering-output" class="sidebar-link">MAC Address Table — Filtering output</a></li><li class="sidebar-sub-header level3"><a href="/pages/6b8f16/#command-summary" class="sidebar-link">Command Summary</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/6b8f16/#arp" class="sidebar-link">ARP:</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/6b8f16/#why-we-need-layer-2-and-layer-3-addresses" class="sidebar-link">Why we need Layer 2 and Layer 3 addresses</a></li><li class="sidebar-sub-header level3"><a href="/pages/6b8f16/#intro-to-arp" class="sidebar-link">Intro to ARP</a></li><li class="sidebar-sub-header level4"><a href="/pages/6b8f16/#demo-data-transfer-in-the-local-network" class="sidebar-link">Demo: Data transfer in the local network</a></li><li class="sidebar-sub-header level4"><a href="/pages/6b8f16/#demo-data-transfer-out-of-local-network" class="sidebar-link">Demo: Data Transfer out of local network</a></li><li class="sidebar-sub-header level3"><a href="/pages/6b8f16/#arp-message-format" class="sidebar-link">ARP Message Format</a></li><li class="sidebar-sub-header level3"><a href="/pages/6b8f16/#arp-process" class="sidebar-link">ARP Process</a></li><li class="sidebar-sub-header level3"><a href="/pages/6b8f16/#proxy-arp" class="sidebar-link">Proxy ARP</a></li><li class="sidebar-sub-header level3"><a href="/pages/6b8f16/#gratuitous-arp" class="sidebar-link">Gratuitous ARP</a></li><li class="sidebar-sub-header level3"><a href="/pages/6b8f16/#arp-in-cisco-ios" class="sidebar-link">ARP in Cisco IOS</a></li><li class="sidebar-sub-header level4"><a href="/pages/6b8f16/#manual-arp-entry-configuration" class="sidebar-link">Manual ARP Entry Configuration</a></li><li class="sidebar-sub-header level4"><a href="/pages/6b8f16/#clearing-dynamic-arp-entries" class="sidebar-link">Clearing Dynamic ARP Entries</a></li><li class="sidebar-sub-header level4"><a href="/pages/6b8f16/#dynamic-arp-aging" class="sidebar-link">Dynamic ARP Aging</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/6b8f16/#ping" class="sidebar-link">Ping</a></li></ul></li><li><a href="/pages/149f35/" class="sidebar-link">Routing_Static</a></li><li><a href="/pages/d70851/" class="sidebar-link">Dynamic Routing P1 RIP EIGRP</a></li><li><a href="/pages/c4055c/" class="sidebar-link">Dynamic Routing P2 OSPF</a></li><li><a href="/pages/32db2d/" class="sidebar-link">Layer 3 Forwarding</a></li><li><a href="/pages/fe5ceb/" class="sidebar-link">Virtual Routing and Forwarding</a></li><li><a href="/pages/bada2c/" class="sidebar-link">Layer 3 FHRPs</a></li><li><a href="/pages/81e45f/" class="sidebar-link">Security</a></li><li><a href="/pages/6bd28d/" class="sidebar-link">ACL</a></li><li><a href="/pages/7db05a/" class="sidebar-link">NAT 网络地址转换</a></li><li><a href="/pages/729891/" class="sidebar-link">LAN Architectures</a></li><li><a href="/pages/1076ba/" class="sidebar-link">WAN广域网</a></li><li><a href="/pages/441d7d/" class="sidebar-link">WLAN</a></li><li><a href="/pages/e31696/" class="sidebar-link">NTP</a></li><li><a href="/pages/c7a0a2/" class="sidebar-link">DNS</a></li><li><a href="/pages/d25cf6/" class="sidebar-link">Syslog</a></li><li><a href="/pages/c74f1d/" class="sidebar-link">Accessing the CLI of network devices</a></li><li><a href="/pages/5d3322/" class="sidebar-link">FTP TFTP</a></li><li><a href="/pages/e049f9/" class="sidebar-link">DHCP</a></li><li><a href="/pages/7ebd2e/" class="sidebar-link">SNMP</a></li><li><a href="/pages/bba118/" class="sidebar-link">Quality of service</a></li><li><a href="/pages/652496/" class="sidebar-link">Virtualization</a></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>CCNA题库</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Cisco Networking Academy</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Ansible</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>版本管理 - Maven</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>开发管理 - Git</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>操作系统 - Linux</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>容器部署 - Docker</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><a href="/categories/?category=%E7%BD%91%E7%BB%9C%E8%BF%90%E7%BB%B4" title="分类" data-v-06225672>网络运维</a></li><li data-v-06225672><a href="/categories/?category=CCNA" title="分类" data-v-06225672>CCNA</a></li><li data-v-06225672><a href="/categories/?category=CCNA%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0" title="分类" data-v-06225672>CCNA知识笔记</a></li></ul> <div class="info" data-v-06225672><div title="作者" class="author iconfont icon-touxiang" data-v-06225672><a href="https://github.com/Jonas-Wolfxin" target="_blank" title="作者" class="beLink" data-v-06225672>Jonas Wolfxin</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2023-06-06</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABH1JREFUSA3tVl1oHFUUPmdmd2ltklqbpJDiNnXFmgbFktho7YMPNiJSSZM0+CAYSkUELVhM6YuwIPpgoOKDqOBDC0XE2CQoNtQXBUFTTcCi+Wlh1V2TQExsUzcltd3M9Tt3ZjZzZ2fT+OJTL8yeM+eee757fmeJbq//KQL8X3DUSFOcfr7cRsRtxNQMWueeVzOkaITIGqQHNg5y8+jNW9ldM7A6nTpAjuolUikAwq7CE3WcM2RRDz+XGVgN3FptU/aUSlvq9Pa3iZ1+sgAqJyyAFqkipd9dqiwHF3P65YycLWc/6sqGrvoEoIp6DOFaX5h6+dnfjkWprwqsPk0dUGq5vySwDImC10KxFHgGL1SWoc92O3eVht09qdXNH11I2SsTsJYqMWzihqGMi+A+Garf3BAuuLI5oGlULyNfyB/HYNujwktOfRrMr5t77NmevqaUopx0grnKAyvVpmwUDB4x6FPXuGvYLTDwWsejwgtgkYKPqRJg8SV6xaiZ3ZTppGneS4yfH5/66fZSDHv+QZci/+h5c5UHtpy67JUqGppM0sh0Nc1dW6/N1W5Yoqat8/TU/VnadmdeW2PLLSyh0cvxBs3KbqTmwYPpxN4do/mzE8nEpvX/UMu2Wbp74zUAK5q6WkHns7V0eWkdPbPzd3rxkTGybadYySumVzhcaJFbs5UrEkQ/+CK8gF5dnh/6ciIZ73gwQ927L1IitoxKLXYP3SjYdOrHHfTZhRRlFyrorafPk20B3HPD1y2G3qKZME5Jcf3t/HUC13/8tSd++vqFveMUTwAUxSUFI1QekR1+bIze3D9MF2aq6cPvG72CgnldWCFqyRw3lwH8ZMerjTD9ElRO7Gv44wNpC90aASqGfVlz/Rx17srQ57/UU26hkhQqUB7dBR71WmzQhHUnblGmVOEw0jhbV1n9OlXUDCIRGaNV5Jp43N516fN7JmnTHdfp7Hgy0luO4aMhtkLL8Bi3bUWYvzh5Mn1dTxrL6QmGuRhGL/TiTTxRoEdTszSaq9GR0NGA3KdkOz3hqSV3MIDhQ5IVX/Ivx3umBti2es2h4eZby7x8br1rkf7Mo90AqC8aQ3sJeNzqFRu+vSANAQe3PL7l0HGOAdwDCeZYvNKeoZp1Qfs6Aipndh86HmFRi0LAnEO47wsqM6cdfjh3jBPUzhZy7nvlUfFsamED1VQt6aISHVymXZ/B2aCtIG8AI8xfobj2d3en1wWVhOeHELKmLQ1s211s88comkv4UCwWyF787mJdYXtNfhKAXVqnKTq8QZvGAGGOfaTo5pGZ/PwbUCr5+DPr/1J92JNHr9aOl/F3iI5+O1nfybsGxoimvZ3ViWSluDITw3P37mypheDIPY0tw7+O/5ApbkYw+zpfaUVu32Pi98+defdUhEpZkRFq0aqyNh9FuL9hpYbEm6iwi0z2REd09ZmyENEbuhjDWzKvZXTqKYaBIr3tt5kuPtQBZFvEUwHt60vfCNu41XsksH9Ij1BMMz1Y0OOunHNShFIP5868g5zeXmuLwL9T4b6Q2+KejgAAAABJRU5ErkJggg==">Layer 2 Forwarding<!----></h1> <!----> <div class="theme-vdoing-content content__default"><h1 id="layer-2-forwarding"><a href="#layer-2-forwarding" class="header-anchor">#</a> Layer 2 Forwarding</h1> <h2 id="osi-model-review"><a href="#osi-model-review" class="header-anchor">#</a> OSI Model Review</h2> <h3 id="osi-model"><a href="#osi-model" class="header-anchor">#</a> OSI Model</h3> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202306062213597.png" alt="image-20230606221307451" style="zoom:50%;"> <h3 id="osi-vs-tco-ip-model"><a href="#osi-vs-tco-ip-model" class="header-anchor">#</a> OSI Vs TCO/IP Model</h3> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202306062214353.png" alt="image-20230606221452246" style="zoom:50%;"> <h3 id="encapsulation-de-encapsulation"><a href="#encapsulation-de-encapsulation" class="header-anchor">#</a> Encapsulation/De-encapsulation</h3> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202306062217829.png" alt="image-20230606221723698" style="zoom:50%;"> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202306062218844.png" alt="image-20230606221832703" style="zoom:50%;"> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202306062221562.png" alt="image-20230606222101479" style="zoom:60%;"> <h2 id="collision-broadcast-domains"><a href="#collision-broadcast-domains" class="header-anchor">#</a> Collision &amp; Broadcast domains</h2> <h3 id="collision-domain"><a href="#collision-domain" class="header-anchor">#</a> Collision Domain</h3> <blockquote><h5 id="coaxial"><a href="#coaxial" class="header-anchor">#</a> Coaxial</h5> <ul><li>Early networking technologies like Thinnet (LOBASE-2) and Thicknet (LOBASE-5) involved connecting all devices to the same network cable (<strong>coaxial</strong>).</li></ul> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202306062222714.png" alt="image-20230606222252575" style="zoom:43%;"> <ul><li>Signals sent over the cable are received by all connected devices.</li></ul> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202306062224491.png" alt="image-20230606222433450" style="zoom:67%;"> <ul><li>If two hosts attempt to communicate over the network at the same time, collisions occur.</li></ul> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202306062225794.png" alt="image-20230606222546761" style="zoom:67%;"> <ul><li>Communications in which devices can both send and receive data, but can’t do both at the same time (meaning only one device can transmit at a time) are <strong>half-duplex</strong>.</li> <li>A collision domain is a network segment where <strong>simultaneous data transmissions collide</strong>.</li></ul></blockquote> <blockquote><h5 id="ethernet-hub"><a href="#ethernet-hub" class="header-anchor">#</a> Ethernet Hub</h5> <ul><li><p>The <strong>Ethernet Hub</strong> is a precursor(前身) to the Ethernet Switch.</p> <ul><li>Hubs function like multi-port repeaters: a signal received on one port is repeated out of all other ports.</li> <li>Hubs are not Layer 2 aware.</li></ul></li> <li><p>Hubs have no ability to buffer frames to forward them later; when a signal is received, it is immediately repeated out of all other ports.</p> <ul><li>If two devices connected to a hub send data at the same time, it will attempt to repeat both signals at the same time = <strong>collision</strong>.</li> <li><strong>All devices connected to a hub are in the same collision domain and must operate in half-duplex (using CSMA/CD to deal with collisions.)</strong></li></ul></li></ul></blockquote> <blockquote><h5 id="switch"><a href="#switch" class="header-anchor">#</a> Switch:</h5> <ul><li>Switches are more intelligent than hubs; they are Layer 2 aware.
<ul><li>They use information in the Layer 2 header to decide where to send frames.</li></ul></li> <li>Additionally, switches have the ability to buffer frames before sending them.
<ul><li><p>If a switch receives two broadcast frames at the same time, it will not flood both at the same time.</p></li> <li><p>One message will be buffered and transmitted only after the other one.</p></li> <li><p>Devices connected to a switch(port) are all in separate collision domains. Devices can operate in <strong>full-duplex</strong>.</p></li></ul></li></ul></blockquote> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202306062235078.png" alt="image-20230606223511969" style="zoom:50%;"> <h3 id="broadcast-domain"><a href="#broadcast-domain" class="header-anchor">#</a> Broadcast Domain</h3> <blockquote><ul><li>A Broadcast Domain is a <strong>logical division of a network</strong> in which <strong>all nodes can reach each other by Layer 2 broadcast</strong>.
<ul><li>To put it in other way, a group of devices which will receive a broadcast frame sent by any one of the other devices.</li></ul></li> <li><strong>All devices connected to a switch are in the same broadcast domain</strong>; switches flood <strong>broadcast frames</strong>, <strong>unknown unicast frames</strong> and <strong>multicast frames</strong>.
<ul><li>VLANS can be used to divide up broadcast domains on a switch.</li></ul></li> <li><strong>Each router interface is a unique broadcast domain</strong>; <strong>routers do not forward Layer 2 broadcast messages.</strong></li></ul> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202306062244009.png" alt="image-20230606224458925" style="zoom:67%;"></blockquote> <h2 id="layer-2-forwarding-2"><a href="#layer-2-forwarding-2" class="header-anchor">#</a> Layer 2 Forwarding</h2> <blockquote><ul><li>Layer 2 Forwarding refers to the process switches use to forward frames within a LAN.
<ul><li>Although routers operate ‘at Layer 3’, they still are Layer 2 aware as they must inspect the destination MAC address of frames they receive, and use Layer 2 to address frames to the next hop device.</li></ul></li> <li>There are four main message types to be aware of from a Layer 2 forwarding perspective:</li></ul> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202306062307933.png" alt="image-20230606230709812" style="zoom:50%;"></blockquote> <h3 id="layer-2-forwarding-unknown-unicast"><a href="#layer-2-forwarding-unknown-unicast" class="header-anchor">#</a> Layer 2 Forwarding — unknown Unicast</h3> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202306062311722.png" alt="image-20230606231100618" style="zoom:55%;"> <blockquote><p>Note that, in reality R1 would probably send a broadcast ARP request to learn PC1’s MAC address before sending this unicast message, and in that process SW1 would have already learned both R1 and PC1’s MAC addresses.</p> <ul><li>I’m just using this example to demonstrate how unknown unicast messages are flooded.</li></ul></blockquote> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202306062311554.png" alt="image-20230606231132432" style="zoom:50%;"> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202306062328624.png" alt="image-20230606232804491" style="zoom:50%;"> <h3 id="layer-2-forwarding-known-unicast"><a href="#layer-2-forwarding-known-unicast" class="header-anchor">#</a> Layer 2 Forwarding — Known Unicast</h3> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202306062332639.png" alt="image-20230606233207499" style="zoom:54%;"> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202306062332699.png" alt="image-20230606233241577" style="zoom:55%;"> <h3 id="layer-2-forwarding-broadcast"><a href="#layer-2-forwarding-broadcast" class="header-anchor">#</a> Layer 2 Forwarding — Broadcast</h3> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202306062333170.png" alt="image-20230606233354067" style="zoom:54%;"> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202306062334989.png" alt="image-20230606233426886" style="zoom:54%;"> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202306062335810.png" alt="image-20230606233523701" style="zoom:54%;"> <h3 id="layer-2-forwarding-multicast"><a href="#layer-2-forwarding-multicast" class="header-anchor">#</a> Layer 2 Forwarding — Multicast</h3> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202306062336789.png" alt="image-20230606233616676" style="zoom:54%;"> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202306062336256.png" alt="image-20230606233650123" style="zoom:54%;"> <h2 id="mac-address-table"><a href="#mac-address-table" class="header-anchor">#</a> MAC Address Table</h2> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202306062342646.png" alt="image-20230606234214521" style="zoom:59%;"> <blockquote><ul><li>Notice that under the ‘ports’ column it says <strong>CPU</strong>. That means when a switch receives a frame with this destination MAC, it should send it to the CPU for processing.
<ul><li>Otherwise it would merely flood the frame, and wouldn’t actually look at the information inside the, for example, CDP message.</li></ul></li> <li>Also, as you may have noticed, the broadcast MAC address is included here, because the contents of a broadcast message may be of interest to the switch, so it should send the frame to the CPU for processing.</li></ul></blockquote> <h3 id="mac-address-table-aging"><a href="#mac-address-table-aging" class="header-anchor">#</a> MAC Address Table — Aging</h3> <blockquote><p>This setting of <strong>default 300s Aging Time</strong> for MAC-Address Table is actually no need to be changed.</p></blockquote> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202306062345557.png" alt="image-20230606234510433" style="zoom:67%;"> <h3 id="mac-address-table-learning"><a href="#mac-address-table-learning" class="header-anchor">#</a> MAC Address Table — Learning</h3> <blockquote><p>This setting of dynamic learning for MAC-Address Table is actually no need to be changed.</p></blockquote> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202306062346638.png" alt="image-20230606234625522" style="zoom:70%;"> <h3 id="mag-address-table-static-configuration"><a href="#mag-address-table-static-configuration" class="header-anchor">#</a> MAG Address Table — Static Configuration</h3> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202306062350841.png" alt="image-20230606235040711" style="zoom:67%;"> <h3 id="mac-address-table-clearing-dynamic-addresses"><a href="#mac-address-table-clearing-dynamic-addresses" class="header-anchor">#</a> MAC Address Table — Clearing dynamic addresses</h3> <p><img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202306062352317.png" alt="image-20230606235201193"></p> <h3 id="mag-address-table-count"><a href="#mag-address-table-count" class="header-anchor">#</a> MAG Address Table — Count</h3> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202306062353652.png" alt="image-20230606235312560" style="zoom:67%;"> <blockquote><p>The total in this command displays 2, whereas above it displays 22.</p> <ul><li>It’s because all of <strong>those static entries that are in the switch by default</strong> are not included in this count.</li></ul></blockquote> <h3 id="mac-address-table-filtering-output"><a href="#mac-address-table-filtering-output" class="header-anchor">#</a> MAC Address Table — Filtering output</h3> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202306062357948.png" alt="image-20230606235708817" style="zoom:60%;"> <h3 id="command-summary"><a href="#command-summary" class="header-anchor">#</a> Command Summary</h3> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202306062357120.png" alt="image-20230606235741026" style="zoom:67%;"> <h2 id="arp"><a href="#arp" class="header-anchor">#</a> ARP:</h2> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202306081633765.png" alt="image-20230608163305404" style="zoom:30%;"> <h3 id="why-we-need-layer-2-and-layer-3-addresses"><a href="#why-we-need-layer-2-and-layer-3-addresses" class="header-anchor">#</a> Why we need Layer 2 and Layer 3 addresses</h3> <blockquote><p>Layer 2 and Layer 3 addressing provide different functionality:</p> <ul><li><strong>Layer 3 addressing</strong> provides <strong>end-to-end addressing</strong>: from the <strong>source host</strong> to the <strong>destination host</strong>.
<ul><li>The Layer 3 address, typically an IPv4 or IPv6 address, is a logical address configured by a network admin, whether it is manually configured or dynamically assigned via DHCP.</li> <li>Layer 3 addressing deals with <strong>indirectly, as well as directly</strong> connected devices. For example, At Layer 3 you can address a packet to destinations in the same network, for example another host connected to the same switch, as well as to destinations in different networks, for example, a host somewhere over the Internet.</li></ul></li> <li><strong>Layer 2 addressing</strong> provides <strong>hop-to-hop addressing</strong> within each network segment. For example, the hop from the source to its default gateway, then the hop from that router to the next router, then the hop from that router to the next router, etc.
<ul><li>The Layer 2 address is the physical address of each NIC, Network Interface Card, as assigned by the manufacturer.</li> <li>deals with <strong>directly connected devices</strong>, not necessarily connected with the same cable, but connected to the same <strong>Layer 2 domain</strong>, for example hosts connected to the same switch.</li></ul></li> <li>==The Layer 3 packet is destined for <strong>the end host</strong>, and Layer 2 addressing is used to pass the packet to the <strong>next hop in the path</strong> to the end host.==
<ul><li>when PC1 in the below diagram communicates with PC2, the source and destination IP addresses remain the same throughout the journey.</li> <li>However the <strong>Dest MAC Address</strong> and <strong>Source MAC Address</strong> will be changed per each hop.</li></ul></li></ul> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202306081436276.png" alt="image-20230608143659159" style="zoom:67%;"> <p><strong>Layer 2 and Layer 3 work together to successfully deliver the packet to the destination host.</strong></p></blockquote> <h3 id="intro-to-arp"><a href="#intro-to-arp" class="header-anchor">#</a> Intro to ARP</h3> <blockquote><ul><li>ARP is the bridge between Layer 2 and Layer 3; it is used to map a known Layer 3 address to an unknown Layer 2 address.</li> <li>ARP was originally defined in RFC 826:</li></ul> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202306082036686.png" alt="image-20230608203615641" style="zoom:67%;"> <ul><li><p>The ARP protocol was designed for Ethernet, but can be used with a variety of L2 &amp; L3 address types.</p></li> <li><p>The sender will use ARP to learn the MAC address of the next hop (*not necessarily Dst. IP of the packet).</p></li> <li><p>ARP information is stored in the <strong>ARP cache</strong>, so ARP doesn't have to be done for every single packet.</p></li></ul> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202306082043147.png" alt="image-20230608204323027" style="zoom:67%;"></blockquote> <hr> <blockquote><p>ARP（Address Resolution Protocol）</p> <ul><li><p>用于在Layer 3到 Layer 2的封装时, 通过广播查询Broadcast Domain, 将IP地址解析为MAC址, 以便在发送数据帧时正确地传递数据。在OSI（开放式系统互联）模型中，ARP报文直接封装在Layer 2的数据帧的Payload里面。</p></li> <li><p>ARP is used to discover the Layer 2 address (MAC address) of a known Layer 3 address (IP address) ;</p></li> <li><p>ARP Request &amp; Reply 通常是在封装在数据帧的Payload后直接发送的，以获取另一个计算机的MAC地址。</p> <ul><li><strong>ARP Request</strong>: is <em>broadcast</em> = sent to all hosts in the Broadcast Domain,</li> <li><strong>ARP Reply</strong>: is <em>unicast</em> = sent only to one host (the host that sent the request)</li></ul></li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>arp -a   <span class="token comment"># to view the ARP table(Windows, macOS, Linux)</span>
<span class="token comment"># Internet Address = IP address (Layer 3 address) </span>
<span class="token comment"># Physical Address = MAC address (Layer 2 address) </span>
<span class="token comment"># Type static = default entry </span>
<span class="token comment"># Type dynamic = learned via ARP</span>

Router<span class="token comment"># show arp        ## in Cisco IOS it's show arp, from privileged exec mode.</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></blockquote> <h4 id="demo-data-transfer-in-the-local-network"><a href="#demo-data-transfer-in-the-local-network" class="header-anchor">#</a> Demo: Data transfer in the local network</h4> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202303161821070.png" alt="image-20230316182110625" style="zoom:25%;"> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202303161829017.png" alt="image-20230316182918507" style="zoom:25%;"> <h4 id="demo-data-transfer-out-of-local-network"><a href="#demo-data-transfer-out-of-local-network" class="header-anchor">#</a> Demo: Data Transfer out of local network</h4> <blockquote><h6 id="let-s-look-at-that-arp-request-in-wireshark"><a href="#let-s-look-at-that-arp-request-in-wireshark" class="header-anchor">#</a> Let’s look at that ARP request in wireshark.</h6> <p>For example, PC1 wants to send a DNS query to the DNS server at 8.8.8.8.</p> <ul><li>It thinks, 8.8.8.8 is outside of my local network, so I should send the frame to my default gateway, 192.168.1.1.</li> <li>However, PC1 doesn’t know the MAC address of 192.168.1.1, which is R1. So, it will broadcast this ARP request message, destined for R1’s IP address.</li></ul> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202305141025015.png" alt="image-20230514101331063" style="zoom:33%;"> <ul><li>The ARP message is encapsulated in an <strong>Ethernet frame</strong> of course, but <strong>there is no IP header</strong>.
<ul><li>ARP messages are only broadcast within the local network, not sent by routers to external networks, so there’s no need to encapsulate the ARP message in an IP header.</li></ul></li> <li>The Source IP and Destination IP addresses are actually referring <strong>the fields(Sender IP address and Target IP address) in the ARP message itself</strong>.</li></ul> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202305141025941.png" alt="image-20230514100421145" style="zoom:33%;"> <h6 id="here-s-that-arp-reply-in-wireshark"><a href="#here-s-that-arp-reply-in-wireshark" class="header-anchor">#</a> Here’s that ARP reply in Wireshark.</h6> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202305141014136.png" alt="image-20230514101424880" style="zoom:33%;"> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202305141015092.png" alt="image-20230514101519847" style="zoom:33%;"> <ul><li>The sender IP and MAC fields are R1’s addresses, and the destination IP and MAC fields are PC1’s addresses.</li> <li>So, PC1 is now able to insert R1’s MAC address as the destination MAC of its DNS query, and then send the message to R1 which will forward it over the Internet.</li></ul></blockquote> <h3 id="arp-message-format"><a href="#arp-message-format" class="header-anchor">#</a> ARP Message Format</h3> <blockquote><ul><li>ARP messages are encapsulated directly within an Ethernet header/trailer.
<ul><li>There is no IP header.</li></ul></li> <li>The Type field of the Ethernet header will be <code>0x0886</code> to indicate <strong>ARP</strong>.
<ul><li>Some other common EtherTypes are 0800 for IPv4 and 86DD for IPv6.</li></ul></li> <li>ARP messages are variable in length because it can be used for various L2 &amp; L3 protocols, , not just IPv4 and Ethernet.
<ul><li>But note that an IPv4/Ethernet ARP message is <strong>28 bytes</strong> in length.</li></ul></li></ul> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202306082048917.png" alt="image-20230608204817858" style="zoom:50%;"> <h5 id="arp-message-format-2"><a href="#arp-message-format-2" class="header-anchor">#</a> ARP Message Format:</h5> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202306082051647.png" alt="image-20230608205110474" style="zoom:67%;"></blockquote> <h3 id="arp-process"><a href="#arp-process" class="header-anchor">#</a> ARP Process</h3> <blockquote><ol><li><p>When a host wants to send a packet, it needs to encapsulate it in a frame.</p></li> <li><p>To learn the appropriate destination MAC address it must check the <strong>ARP cache</strong>, which is just another way to say the <strong>ARP table</strong>, for an entry matching the ARP Destination Host’s IP.</p> <blockquote><p><em>Note that ‘ARP Destination Host’ means the destination of the ARP Request, not necessarily the actual destination host that the source wants to send a packet to.</em></p></blockquote></li> <li><p>If there is already an appropriate entry in the ARP cache, there’s no need to proceed with ARP. The source host can encapsulate the packet and send the frame.</p></li> <li><p>But if there is no entry, it will first create an <strong>‘incomplete’ entry</strong> in the ARP cache. Then it will generate and broadcast the ARP Request message. <em>In the example network below only R2 will receive that broadcast, but like any broadcast message, if there are more hosts on the segment all will receive it.</em></p> <blockquote><p><em>Incomplete means that an entry has been made, but the MAC address hasn’t actually been learned yet.</em></p></blockquote></li> <li><p>R2 receives and processes the ARP Request message, and then updates its own ARP cache:</p> <ul><li>If R2 has no entry for R1, it will create a new one.</li> <li>If it has an entry, it will reset the timeout to 0.</li></ul></li> <li><p>Then the destination host will generate and send an ARP Reply message, this time unicast directly to the source host.</p></li> <li><p>Then the source host will process the ARP reply message and update its ARP cache, meaning he incomplete entry above will now be complete.</p></li></ol> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202306082100736.png" alt="image-20230608210057620" style="zoom:50%;"></blockquote> <blockquote><h5 id="now-let-s-use-debug-to-see-what-cisco-ios-tells-us-about-this-process"><a href="#now-let-s-use-debug-to-see-what-cisco-ios-tells-us-about-this-process" class="header-anchor">#</a> Now let’s use DEBUG to see what Cisco IOS tells us about this process.</h5> <ol><li>R1 create an Incomlete Entry in the ARP table</li></ol> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202306082103158.png" alt="Incomlete Entry" style="zoom:55%;"> <ol start="2"><li>R1 sent an ARP Request in the Broadcast Domain:
<ul><li>the MAC address in the Target Hardware Address field of the ARP message is <strong>all 0’s</strong>, meaning unknown.</li></ul></li></ol> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202306082109935.png" alt="image-20230608210928862" style="zoom:55%;"> <ol start="3"><li>Then this debug message appears on R2, indicating that it received that ARP Request from R1.</li></ol> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202306082111055.png" alt="image-20230608211123004" style="zoom:55%;"> <ol start="4"><li>R2 Creates an ARP Entry in its own ARP table according to the ARP Request message(sent from R1)</li></ol> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202306082114783.png" alt="image-20230608211401712" style="zoom:55%;"> <ol start="5"><li>R2 sent an ARP Reply back, because it has the IP <code>192.168.1.2</code> (configured on the interface G0/0).</li></ol> <p><img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202306082116892.png" alt="image-20230608211614819"></p> <ol start="6"><li>R1 received the ARP Reply message from R2 and complete the &quot;Imcomplete Entry&quot; in the ARP table.</li></ol> <p><img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202306082117882.png" alt="image-20230608211709801"></p> <h6 id="summary"><a href="#summary" class="header-anchor">#</a> Summary</h6> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202306082118839.png" alt="image-20230608211848692" style="zoom:67%;"> <p><img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202306082119549.png" alt="image-20230608211933419"></p> <p><img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202306082121504.png" alt="image-20230608212154375"></p> <p><img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202306082123397.png" alt="image-20230608212334265"></p></blockquote> <h3 id="proxy-arp"><a href="#proxy-arp" class="header-anchor">#</a> Proxy ARP</h3> <blockquote><ul><li><p>Proxy ARP was originally defined in RFC 1027.</p></li> <li><p>It allows a device (usually a router) to respond to ARP Requests for IP addresses that are not its own.</p> <ul><li>Read RFC 1027 for the original use case of Proxy ARP.</li></ul></li> <li><p>Modern use cases involve</p> <ul><li>end hosts with incorrect subnet masks,</li> <li>‘directly connected’ static routes,</li> <li>and some NAT scenarios.</li></ul></li> <li><p>proxy ARP messages have the same format as regular ARP messages, using an Operation code of 1 for the request and 2 for the reply. It’s still an ARP Request and ARP Reply exchange, but the request is for a destination in a different network than the sender.</p></li> <li><p>Proxy ARP is <strong>enabled globally</strong> and on each router interface by default (in Cisco IOS).</p></li></ul> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202306082130049.png" alt="image-20230608213021924" style="zoom:67%;"></blockquote> <blockquote><h5 id="use-case-1-proxg-arr-mismatched-subnet-mask"><a href="#use-case-1-proxg-arr-mismatched-subnet-mask" class="header-anchor">#</a> Use case 1: Proxg ARR - Mismatched Subnet Mask</h5> <p>Notice that PC1 has a /16 subnet mask, whereas the other PCs have a /24 subnet mask.</p> <p><img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202306082136365.png" alt="image-20230608213656297"></p> <ul><li>In the above network, PC1 believes that PC1, PC2, PC3, and PCA are all in the same subnet (192.168.0.0/16).</li> <li>When PC1 tries to communicate with PC3 (or PC4), it will send an ARP Request directly to the IP address of PC3 (not the default gateway, R1).</li> <li>The ARP Request will not reach PC3, because R1 will not forward the broadcast message.</li> <li>However,</li> <li>With Proxy ARP, R1 will think:
<ul><li>I received an ARP Request for 192.168.1.13 on my GO0/O interface, even though the 192.168.1.0/24 subnet is not connected to GO/0 and is in a different subnet than the source.</li> <li>192.168.1.13 is not my IP address, but I do have a route for 192.168.1.0/24 in my routing table.</li> <li>So, I will reply to PC1’s ARP Request on behalf of 192.168.1.13, using <strong>my MAC address</strong>.</li> <li>When PC1 sends packets destined for <strong>192.168.1.13 to my MAC address</strong>, | will then forward them to PC3.</li></ul></li></ul> <p><img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202306082143097.png" alt="image-20230608214321991"></p></blockquote> <blockquote><h5 id="use-case-2-proxy-arp-directly-connected-static-route"><a href="#use-case-2-proxy-arp-directly-connected-static-route" class="header-anchor">#</a> Use Case 2: Proxy ARP — Directly-Connected Static Route</h5> <p>For example, on R1 I configured a route to 192.168.34.0/24, specifying the exit interface of gigabitethernet0/0, to allow it to reach the segment between R3 and R4. For this demonstration, assume the other devices already have the necessary routes configured.</p> <ul><li>Now, this kind of static route in which you specify <em>only the exit interface, but not the next-hop IP address</em>, is called a <strong>directly connected static route</strong>. So, the router will treat this destination network as a directly connected network, not a remote network.</li> <li>When R1 tries to send messages to hosts in that network, it will try to send the messages <strong>directly to the destination host, not to the next-hop router</strong>.</li></ul> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202306082147282.png" alt="image-20230608214712153" style="zoom:55%;"> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202306082154194.png" alt="image-20230608215404977" style="zoom:67%;"> <ul><li>Because R1 thinks the 34.0/24 subnet is directly connected, it tries to send ARP requests directly to R3 or R4. Neither R3 nor R4 receive those ARP requests.</li> <li>But because <strong>R2</strong> has a route for the 34.0/24 subnet in its routing table, it uses Proxy ARP to reply on their behalf, telling R1 to use <strong>R2’s MAC address</strong> for those destinations.</li></ul> <h6 id="demo-after-disabling-arp-proxy-on-r2"><a href="#demo-after-disabling-arp-proxy-on-r2" class="header-anchor">#</a> Demo after Disabling ARP Proxy on R2</h6> <p><img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202306082155431.png" alt="image-20230608215549289"></p></blockquote> <h3 id="gratuitous-arp"><a href="#gratuitous-arp" class="header-anchor">#</a> Gratuitous ARP</h3> <blockquote><ul><li>A Gratuitous ARP message is an <strong>ARP Reply (Operation code 2)</strong> message <em>sent without receiving an ARP Request</em>. But instead of unicast, it is sent to the broadcast MAC address, all Fs.
<ul><li>Note that standard ARP replies are unicast messages sent to the device that sent the ARP request.</li></ul></li> <li>The ultimate purpose of gratuitous ARP is to update switches’ MAC address tables and hosts’ ARP tables. It allows other devices to <em>learn the MAC address of the sending device promptly without having to send ARP requests</em>:
<ul><li>When a switch receives the gratuitous ARP message, it will use the <strong>source MAC in the Ethernet header</strong> to <strong>update</strong> its <strong>MAC table</strong>.</li> <li>When a host receives the gratuitous ARP message, it will use <strong>the info in the ARP message</strong> to <strong>update</strong> its <strong>ARP table</strong>.
<ul><li>Cisco IOS devices will refresh an existing ARP Table entry if they receive a Gratuitous ARP message (they will reset the timer to 0 and update the MAC address if it is different than the current entry). <strong>However, Cisco IOS devices will not create a new ARP Table entry if they receive a Gratuitous ARP.</strong></li></ul></li></ul></li></ul> <p><img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202306082217537.png" alt="image-20230608221708436"></p> <ul><li><strong>There are a few reasons for sending gratuitous ARP messages:</strong> <ul><li>Announcing when an interface is enabled.</li> <li>Announcing a change in MAC address (ie. if an admin manually configures the MAC)</li> <li>Failover between redundant devices (ie. when using an FHRP)</li></ul></li></ul> <h5 id="garp-message-format"><a href="#garp-message-format" class="header-anchor">#</a> GARP Message Format:</h5> <p><img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202306082219083.png" alt="image-20230608221958949"></p></blockquote> <h3 id="arp-in-cisco-ios"><a href="#arp-in-cisco-ios" class="header-anchor">#</a> ARP in Cisco IOS</h3> <h4 id="manual-arp-entry-configuration"><a href="#manual-arp-entry-configuration" class="header-anchor">#</a> Manual ARP Entry Configuration</h4> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202306082226888.png" alt="image-20230608222636720" style="zoom:67%;"> <blockquote><p>Remember, in Cisco IOS, <strong>ARPA</strong> means <strong>Ethernet_II</strong>. By the way, ARPA stands for Advanced Research Projects Agency, a part of the <em>American Department of Defense</em> that played a major role in early network development.</p></blockquote> <h4 id="clearing-dynamic-arp-entries"><a href="#clearing-dynamic-arp-entries" class="header-anchor">#</a> Clearing Dynamic ARP Entries</h4> <img src="C:/Users/Jonas Wolfxin/AppData/Roaming/Typora/typora-user-images/image-20230608222944079.png" alt="image-20230608222944079" style="zoom:67%;"> <blockquote><p>Note that this is different than the <code>clear mac address-table dynamic</code> command, which does simply clear out all dynamic MAC addresses immediately.</p></blockquote> <h4 id="dynamic-arp-aging"><a href="#dynamic-arp-aging" class="header-anchor">#</a> Dynamic ARP Aging</h4> <blockquote><p>Like dynamic MAC address table entries, dynamic ARP entries have a timer after which they will be cleared from the table, however the process is a bit different than with MAC addresses.</p> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202306082234519.png" alt="image-20230608223416264" style="zoom:67%;"> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202306082235462.png" alt="image-20230608223550321" style="zoom:67%;"></blockquote> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202306082236768.png" alt="image-20230608223615674" style="zoom:67%;"> <h2 id="ping"><a href="#ping" class="header-anchor">#</a> Ping</h2> <blockquote><ul><li>A network utility that is used to <strong>test reachability</strong>;</li> <li>Measures round-trip time;</li> <li>Uses two messages:
<ul><li><strong>ICMP Echo Request</strong>: the PC won’t broadcast the ICMP echo request, it is sent to a specific host. So, it has to know the MAC address of the destination host, which is why ARP must be used first. After that, the MAC address of the IP is known, so <em>ICMP Echo Request is a unicast message.</em></li> <li><strong>ICMP Echo Reply</strong>: <em>unicast message</em></li></ul></li></ul> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">ping</span> IP_Address
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202306081403576.png" alt="image-20230316184941017" style="zoom:30%;"> <ul><li><p>By default, a ping in Cisco IOS sends 5 ICMP echo requests, and then you should get 5 ICMP echo replies back, and the default size of each ping is 100 bytes.</p></li> <li><p>The period indicates a failed ping, and the exclamation marks indicate a successful ping.</p></li> <li><p><strong>why did that first ping fail?</strong></p> <p>Well, that’s because of ARP. PC1 didn’t know the destination MAC address, so it had to use ARP, and in that time the first ping failed.</p></li></ul> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202306081403381.png" alt="image-20230316185509157" style="zoom:38%;"></blockquote> <hr></div></div> <!----> <div class="page-edit"><div class="edit-link"><a href="https://github.com/Jonas-Wolfxin/Jonas-Wolfxin.github.io/edit/main/docs/40.网络运维/05.CCNA/10.CCNA知识笔记/14.Layer 2 Forwarding.md" target="_blank" rel="noopener noreferrer">编辑此页</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----> <div class="last-updated"><span class="prefix">last Updated:</span> <span class="time">2023/06/08, 22:42:49</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/087c56/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">Layer 2 Discovery Protocols</div></a> <a href="/pages/149f35/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">Routing_Static</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/pages/087c56/" class="prev">Layer 2 Discovery Protocols</a></span> <span class="next"><a href="/pages/149f35/">Routing_Static</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/pages/32db2d/"><div>
            Layer 3 Forwarding
            <!----></div></a> <span class="date">06-07</span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/fe5ceb/"><div>
            Virtual Routing and Forwarding
            <!----></div></a> <span class="date">05-16</span></dt></dl><dl><dd>03</dd> <dt><a href="/pages/652496/"><div>
            Virtualization
            <!----></div></a> <span class="date">05-15</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="https://github.com/Jonas-Wolfxin" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://gitee.com/Jonas-Wolfxin" title="Gitee" target="_blank" class="iconfont icon-gitee"></a><a href="https://cdn.jsdelivr.net/gh/Wolfxin/MyPicGo/img/202206100005451.jpg" title="Wechat: @Jonas_Wolfxin" target="_blank" class="iconfont icon-weixin"></a><a href="http://wpa.qq.com/msgrd?v=3&amp;uin=1914303043&amp;site=qq&amp;menu=yes" title="QQ: 1914303043" target="_blank" class="iconfont icon-QQ"></a><a href="mailto:wolfxin@outlook.com" title="联系我" target="_blank" class="iconfont icon-youjian"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2021-2023
    <span>Jonas Wolfxin's Blog</span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <div class="body-bg" style="background:url() center center / cover no-repeat;opacity:0.5;"></div> <!----> <!----></div><div class="global-ui"><div></div><div></div><div></div><div></div><!----><!----><APlayer audio="" fixed="true" mini="true" theme="#b7daff" loop="loop" order="list" preload="auto" volume="0.7" mutex="true" lrc-type="0" list-max-height="250" storage-name="vuepress-plugin-meting" id="aplayer-fixed"></APlayer><div></div></div></div>
    <script src="/assets/js/app.d858ddbb.js" defer></script><script src="/assets/js/2.309e711a.js" defer></script><script src="/assets/js/137.f6c998f0.js" defer></script><script src="/assets/js/16.acd3428d.js" defer></script><script src="/assets/js/8.5b4b6c67.js" defer></script><script src="/assets/js/10.58f97cc7.js" defer></script><script src="/assets/js/17.0b7a5267.js" defer></script>
  </body>
</html>
