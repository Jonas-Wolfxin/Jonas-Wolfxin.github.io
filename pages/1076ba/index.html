<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>WAN广域网 | Jonas Wolfxin Blog</title>
    <meta name="generator" content="VuePress 1.8.0">
    <link rel="shortcut icon" href="/img/favicon.ico">
    <link rel="stylesheet" href="//at.alicdn.com/t/font_3114978_qe0b39no76.css">
    <noscript><meta http-equiv="refresh" content="0; url=https://www.youngkbt.cn/noscript/"><style>.theme-vdoing-content { display:none }</noscript>
    <script>var _hmt = _hmt || [];
          (function() {
            var hm = document.createElement("script");
            hm.src = "https://hm.baidu.com/hm.js?267c5680c2ffb468ca29c45ffe6801da"; 
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
          })();
          </script>
    <meta name="description" content="Jonas Wolfxin个人博客, VuePress搭建, 使用了 Vdoing 主题, 学习Java, Web, 框架, 微服务, 工具, 前端等相关知识, 记录生活和技术路程, 同时分享编程技巧。">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <meta name="keywords" content="Jonas Wolfxin个人博客, VuePress搭建, 学习Java、Web、框架、微服务、工具、前端等相关知识, 记录生活和技术路程。">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/assets/css/0.styles.7d3fc896.css" as="style"><link rel="preload" href="/assets/js/app.d858ddbb.js" as="script"><link rel="preload" href="/assets/js/2.309e711a.js" as="script"><link rel="preload" href="/assets/js/148.927832d5.js" as="script"><link rel="preload" href="/assets/js/16.acd3428d.js" as="script"><link rel="preload" href="/assets/js/8.5b4b6c67.js" as="script"><link rel="preload" href="/assets/js/10.58f97cc7.js" as="script"><link rel="preload" href="/assets/js/17.0b7a5267.js" as="script"><link rel="prefetch" href="/assets/js/100.a245150c.js"><link rel="prefetch" href="/assets/js/101.dc21b366.js"><link rel="prefetch" href="/assets/js/102.d5a6dfd2.js"><link rel="prefetch" href="/assets/js/103.7675e438.js"><link rel="prefetch" href="/assets/js/104.08bff44e.js"><link rel="prefetch" href="/assets/js/105.8bf552ad.js"><link rel="prefetch" href="/assets/js/106.b3388dcc.js"><link rel="prefetch" href="/assets/js/107.708d16a8.js"><link rel="prefetch" href="/assets/js/108.8d67c3a1.js"><link rel="prefetch" href="/assets/js/109.adb072ef.js"><link rel="prefetch" href="/assets/js/11.1cff9f55.js"><link rel="prefetch" href="/assets/js/110.6a33e945.js"><link rel="prefetch" href="/assets/js/111.5b6daef7.js"><link rel="prefetch" href="/assets/js/112.30fa856b.js"><link rel="prefetch" href="/assets/js/113.2bea19a6.js"><link rel="prefetch" href="/assets/js/114.78693b98.js"><link rel="prefetch" href="/assets/js/115.24b2f36f.js"><link rel="prefetch" href="/assets/js/116.121c60d7.js"><link rel="prefetch" href="/assets/js/117.c2a343f1.js"><link rel="prefetch" href="/assets/js/118.4f472067.js"><link rel="prefetch" href="/assets/js/119.24255046.js"><link rel="prefetch" href="/assets/js/12.bca3c221.js"><link rel="prefetch" href="/assets/js/120.c049d4ee.js"><link rel="prefetch" href="/assets/js/121.27c7097d.js"><link rel="prefetch" href="/assets/js/122.89ae0c7e.js"><link rel="prefetch" href="/assets/js/123.92ff168d.js"><link rel="prefetch" href="/assets/js/124.42567e10.js"><link rel="prefetch" href="/assets/js/125.3bd92459.js"><link rel="prefetch" href="/assets/js/126.ce3b5ff1.js"><link rel="prefetch" href="/assets/js/127.62073e16.js"><link rel="prefetch" href="/assets/js/128.1e61e62d.js"><link rel="prefetch" href="/assets/js/129.1abfd9a0.js"><link rel="prefetch" href="/assets/js/13.fd509ce7.js"><link rel="prefetch" href="/assets/js/130.fd10656f.js"><link rel="prefetch" href="/assets/js/131.739a70c7.js"><link rel="prefetch" href="/assets/js/132.aead2e49.js"><link rel="prefetch" href="/assets/js/133.c996494c.js"><link rel="prefetch" href="/assets/js/134.3f032f05.js"><link rel="prefetch" href="/assets/js/135.c35c5612.js"><link rel="prefetch" href="/assets/js/136.b1a52d43.js"><link rel="prefetch" href="/assets/js/137.f6c998f0.js"><link rel="prefetch" href="/assets/js/138.5165a511.js"><link rel="prefetch" href="/assets/js/139.84e0898b.js"><link rel="prefetch" href="/assets/js/14.9a0c9450.js"><link rel="prefetch" href="/assets/js/140.f85c3c58.js"><link rel="prefetch" href="/assets/js/141.1b18b352.js"><link rel="prefetch" href="/assets/js/142.61b694c2.js"><link rel="prefetch" href="/assets/js/143.ca56fc45.js"><link rel="prefetch" href="/assets/js/144.634fc96a.js"><link rel="prefetch" href="/assets/js/145.7db28ded.js"><link rel="prefetch" href="/assets/js/146.0e801c74.js"><link rel="prefetch" href="/assets/js/147.26faa263.js"><link rel="prefetch" href="/assets/js/149.8755eb42.js"><link rel="prefetch" href="/assets/js/15.d3755cc5.js"><link rel="prefetch" href="/assets/js/150.906609e5.js"><link rel="prefetch" href="/assets/js/151.7a52439b.js"><link rel="prefetch" href="/assets/js/152.c822b1fb.js"><link rel="prefetch" href="/assets/js/153.593575cc.js"><link rel="prefetch" href="/assets/js/154.2a16d8e7.js"><link rel="prefetch" href="/assets/js/155.6a18c733.js"><link rel="prefetch" href="/assets/js/156.bb65d909.js"><link rel="prefetch" href="/assets/js/157.862f6419.js"><link rel="prefetch" href="/assets/js/158.db76ed26.js"><link rel="prefetch" href="/assets/js/159.0f0b1ee8.js"><link rel="prefetch" href="/assets/js/160.8f421d08.js"><link rel="prefetch" href="/assets/js/161.4a521888.js"><link rel="prefetch" href="/assets/js/162.601dbfca.js"><link rel="prefetch" href="/assets/js/163.d76b166d.js"><link rel="prefetch" href="/assets/js/164.99b00d17.js"><link rel="prefetch" href="/assets/js/165.7809f82c.js"><link rel="prefetch" href="/assets/js/166.b29e508c.js"><link rel="prefetch" href="/assets/js/167.71af6bb1.js"><link rel="prefetch" href="/assets/js/168.aad10cfc.js"><link rel="prefetch" href="/assets/js/169.d807fd76.js"><link rel="prefetch" href="/assets/js/170.8cd1462a.js"><link rel="prefetch" href="/assets/js/171.ecbf63cf.js"><link rel="prefetch" href="/assets/js/172.e75cd345.js"><link rel="prefetch" href="/assets/js/173.1ab612d0.js"><link rel="prefetch" href="/assets/js/174.2366c5d2.js"><link rel="prefetch" href="/assets/js/175.50c5731b.js"><link rel="prefetch" href="/assets/js/176.ac8ad112.js"><link rel="prefetch" href="/assets/js/177.1abcf5d4.js"><link rel="prefetch" href="/assets/js/178.b937dacc.js"><link rel="prefetch" href="/assets/js/179.b6fa0b6d.js"><link rel="prefetch" href="/assets/js/18.64b7e666.js"><link rel="prefetch" href="/assets/js/180.e4a8bc36.js"><link rel="prefetch" href="/assets/js/181.b916da57.js"><link rel="prefetch" href="/assets/js/182.27a2bdb4.js"><link rel="prefetch" href="/assets/js/183.dcb4d635.js"><link rel="prefetch" href="/assets/js/184.820c8f5f.js"><link rel="prefetch" href="/assets/js/185.6654f558.js"><link rel="prefetch" href="/assets/js/186.2749179c.js"><link rel="prefetch" href="/assets/js/187.a301fd95.js"><link rel="prefetch" href="/assets/js/188.3a9e3226.js"><link rel="prefetch" href="/assets/js/189.5f2b0e83.js"><link rel="prefetch" href="/assets/js/19.7a102d25.js"><link rel="prefetch" href="/assets/js/190.76dc6e42.js"><link rel="prefetch" href="/assets/js/191.b6c01ef6.js"><link rel="prefetch" href="/assets/js/192.bd87e976.js"><link rel="prefetch" href="/assets/js/193.e3b20021.js"><link rel="prefetch" href="/assets/js/194.d83d205c.js"><link rel="prefetch" href="/assets/js/195.e53e330d.js"><link rel="prefetch" href="/assets/js/196.1fd35397.js"><link rel="prefetch" href="/assets/js/197.cb0858f8.js"><link rel="prefetch" href="/assets/js/198.651004c0.js"><link rel="prefetch" href="/assets/js/199.4a4a16ae.js"><link rel="prefetch" href="/assets/js/20.2e6fe8d4.js"><link rel="prefetch" href="/assets/js/200.0347a232.js"><link rel="prefetch" href="/assets/js/201.77c9f572.js"><link rel="prefetch" href="/assets/js/202.6f66fc82.js"><link rel="prefetch" href="/assets/js/203.c12f2fd1.js"><link rel="prefetch" href="/assets/js/204.0b74eb4e.js"><link rel="prefetch" href="/assets/js/205.82129b16.js"><link rel="prefetch" href="/assets/js/206.0240cea0.js"><link rel="prefetch" href="/assets/js/207.d2d2dd99.js"><link rel="prefetch" href="/assets/js/208.f1073a08.js"><link rel="prefetch" href="/assets/js/209.3b1e4cbe.js"><link rel="prefetch" href="/assets/js/21.179bedf0.js"><link rel="prefetch" href="/assets/js/210.b8b67413.js"><link rel="prefetch" href="/assets/js/211.455c8e40.js"><link rel="prefetch" href="/assets/js/212.8735e669.js"><link rel="prefetch" href="/assets/js/213.f77fefc5.js"><link rel="prefetch" href="/assets/js/214.97d827be.js"><link rel="prefetch" href="/assets/js/215.bc08fe35.js"><link rel="prefetch" href="/assets/js/216.fa811698.js"><link rel="prefetch" href="/assets/js/217.b965b7c6.js"><link rel="prefetch" href="/assets/js/218.6a91db8b.js"><link rel="prefetch" href="/assets/js/219.fb3d8166.js"><link rel="prefetch" href="/assets/js/22.8268ce6e.js"><link rel="prefetch" href="/assets/js/220.1577cda2.js"><link rel="prefetch" href="/assets/js/221.ceea7cea.js"><link rel="prefetch" href="/assets/js/222.3985b121.js"><link rel="prefetch" href="/assets/js/223.40f0edd0.js"><link rel="prefetch" href="/assets/js/224.bcdfffa8.js"><link rel="prefetch" href="/assets/js/225.13252b88.js"><link rel="prefetch" href="/assets/js/226.2afd6de5.js"><link rel="prefetch" href="/assets/js/227.39e5b8f1.js"><link rel="prefetch" href="/assets/js/228.f24cb5b5.js"><link rel="prefetch" href="/assets/js/229.582f76a9.js"><link rel="prefetch" href="/assets/js/23.3b76f2ef.js"><link rel="prefetch" href="/assets/js/230.50a93474.js"><link rel="prefetch" href="/assets/js/231.063e02af.js"><link rel="prefetch" href="/assets/js/232.08153e5d.js"><link rel="prefetch" href="/assets/js/233.e8a2f480.js"><link rel="prefetch" href="/assets/js/234.4e784ee0.js"><link rel="prefetch" href="/assets/js/235.fe1262b2.js"><link rel="prefetch" href="/assets/js/236.5b6a52cf.js"><link rel="prefetch" href="/assets/js/237.36fae37d.js"><link rel="prefetch" href="/assets/js/238.7369ac7a.js"><link rel="prefetch" href="/assets/js/239.7fff287f.js"><link rel="prefetch" href="/assets/js/24.7c6b119c.js"><link rel="prefetch" href="/assets/js/240.96b67d8a.js"><link rel="prefetch" href="/assets/js/241.6cca43be.js"><link rel="prefetch" href="/assets/js/242.063840f3.js"><link rel="prefetch" href="/assets/js/243.e25e2acc.js"><link rel="prefetch" href="/assets/js/244.6058b76a.js"><link rel="prefetch" href="/assets/js/245.cab0cb5f.js"><link rel="prefetch" href="/assets/js/246.38dba8a1.js"><link rel="prefetch" href="/assets/js/247.58a45597.js"><link rel="prefetch" href="/assets/js/248.5cf1ad4c.js"><link rel="prefetch" href="/assets/js/249.691356bb.js"><link rel="prefetch" href="/assets/js/25.02fab98f.js"><link rel="prefetch" href="/assets/js/250.e2c83a35.js"><link rel="prefetch" href="/assets/js/251.80aa06df.js"><link rel="prefetch" href="/assets/js/252.a3e269d1.js"><link rel="prefetch" href="/assets/js/253.d11f6725.js"><link rel="prefetch" href="/assets/js/26.76ffb425.js"><link rel="prefetch" href="/assets/js/27.ce24313c.js"><link rel="prefetch" href="/assets/js/28.d8dbc96b.js"><link rel="prefetch" href="/assets/js/29.2b3bed04.js"><link rel="prefetch" href="/assets/js/3.d6952836.js"><link rel="prefetch" href="/assets/js/30.26988c7b.js"><link rel="prefetch" href="/assets/js/31.cc5781e4.js"><link rel="prefetch" href="/assets/js/32.80d8b83b.js"><link rel="prefetch" href="/assets/js/33.d97c7068.js"><link rel="prefetch" href="/assets/js/34.962f9100.js"><link rel="prefetch" href="/assets/js/35.23d8a044.js"><link rel="prefetch" href="/assets/js/36.6d349d82.js"><link rel="prefetch" href="/assets/js/37.b08f29c8.js"><link rel="prefetch" href="/assets/js/38.8b2bd27d.js"><link rel="prefetch" href="/assets/js/39.45a0b016.js"><link rel="prefetch" href="/assets/js/4.8b22777d.js"><link rel="prefetch" href="/assets/js/40.e6f6cb43.js"><link rel="prefetch" href="/assets/js/41.c756e119.js"><link rel="prefetch" href="/assets/js/42.bbc17b0f.js"><link rel="prefetch" href="/assets/js/43.8e0ce4ca.js"><link rel="prefetch" href="/assets/js/44.b91517af.js"><link rel="prefetch" href="/assets/js/45.416dfe4d.js"><link rel="prefetch" href="/assets/js/46.c00eeb87.js"><link rel="prefetch" href="/assets/js/47.29d200b3.js"><link rel="prefetch" href="/assets/js/48.7f066ab6.js"><link rel="prefetch" href="/assets/js/49.0e010fee.js"><link rel="prefetch" href="/assets/js/5.e6781b57.js"><link rel="prefetch" href="/assets/js/50.1bb477d0.js"><link rel="prefetch" href="/assets/js/51.66468406.js"><link rel="prefetch" href="/assets/js/52.5cf7fbd0.js"><link rel="prefetch" href="/assets/js/53.d6f04354.js"><link rel="prefetch" href="/assets/js/54.59ca865c.js"><link rel="prefetch" href="/assets/js/55.fb0ad69c.js"><link rel="prefetch" href="/assets/js/56.c47a2d12.js"><link rel="prefetch" href="/assets/js/57.f5d65bb3.js"><link rel="prefetch" href="/assets/js/58.c5761ef2.js"><link rel="prefetch" href="/assets/js/59.9fe56073.js"><link rel="prefetch" href="/assets/js/6.9b07e200.js"><link rel="prefetch" href="/assets/js/60.ee1a5c93.js"><link rel="prefetch" href="/assets/js/61.ed5a91fd.js"><link rel="prefetch" href="/assets/js/62.4c69d23d.js"><link rel="prefetch" href="/assets/js/63.a396c29b.js"><link rel="prefetch" href="/assets/js/64.6f39dd9c.js"><link rel="prefetch" href="/assets/js/65.4cb24e13.js"><link rel="prefetch" href="/assets/js/66.aad4aa20.js"><link rel="prefetch" href="/assets/js/67.36e86f95.js"><link rel="prefetch" href="/assets/js/68.cbcfb2e0.js"><link rel="prefetch" href="/assets/js/69.8f5b0c08.js"><link rel="prefetch" href="/assets/js/7.4d64b8e6.js"><link rel="prefetch" href="/assets/js/70.1e7d144f.js"><link rel="prefetch" href="/assets/js/71.77fb0b43.js"><link rel="prefetch" href="/assets/js/72.bf3bb5b9.js"><link rel="prefetch" href="/assets/js/73.e059a41d.js"><link rel="prefetch" href="/assets/js/74.cae09eb3.js"><link rel="prefetch" href="/assets/js/75.f89a6d2e.js"><link rel="prefetch" href="/assets/js/76.cfb3df08.js"><link rel="prefetch" href="/assets/js/77.f4fa62e6.js"><link rel="prefetch" href="/assets/js/78.464e83f6.js"><link rel="prefetch" href="/assets/js/79.71895252.js"><link rel="prefetch" href="/assets/js/80.58d501fe.js"><link rel="prefetch" href="/assets/js/81.948adca1.js"><link rel="prefetch" href="/assets/js/82.bfd7ff16.js"><link rel="prefetch" href="/assets/js/83.3920a558.js"><link rel="prefetch" href="/assets/js/84.d5b9372a.js"><link rel="prefetch" href="/assets/js/85.3be0afac.js"><link rel="prefetch" href="/assets/js/86.29f7272d.js"><link rel="prefetch" href="/assets/js/87.93a0bc8e.js"><link rel="prefetch" href="/assets/js/88.5be81cc2.js"><link rel="prefetch" href="/assets/js/89.bc9cad5d.js"><link rel="prefetch" href="/assets/js/9.dc7a3982.js"><link rel="prefetch" href="/assets/js/90.5ba7972c.js"><link rel="prefetch" href="/assets/js/91.6ca92166.js"><link rel="prefetch" href="/assets/js/92.cb997f9f.js"><link rel="prefetch" href="/assets/js/93.941f52c6.js"><link rel="prefetch" href="/assets/js/94.c34116e0.js"><link rel="prefetch" href="/assets/js/95.0aa6895c.js"><link rel="prefetch" href="/assets/js/96.fd230ec0.js"><link rel="prefetch" href="/assets/js/97.375c63c2.js"><link rel="prefetch" href="/assets/js/98.5f4889ea.js"><link rel="prefetch" href="/assets/js/99.476bd54f.js">
    <link rel="stylesheet" href="/assets/css/0.styles.7d3fc896.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu have-body-img"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/index/logo.png" alt="Jonas Wolfxin Blog" class="logo"> <span class="site-name can-hide">Jonas Wolfxin Blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">Home🏠</a></div><div class="nav-item"><a href="/navigation/" class="nav-link">Navigation🧭</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Front End" class="dropdown-title"><a href="/front/" class="link-title">Front End</a> <span class="title" style="display:none;">Front End</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Basics</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/html/" class="nav-link">HTML</a></li><li class="dropdown-subitem"><a href="/css/" class="nav-link">CSS</a></li><li class="dropdown-subitem"><a href="/javascript/" class="nav-link">JavaScript</a></li></ul></li><li class="dropdown-item"><h4>Frame</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/react/" class="nav-link">React</a></li><li class="dropdown-subitem"><a href="/vue2/" class="nav-link">Vue2</a></li><li class="dropdown-subitem"><a href="/vue3/" class="nav-link">Vue3</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Database" class="dropdown-title"><a href="/database/" class="link-title">Database</a> <span class="title" style="display:none;">Database</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>SQL 数据库</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/mysql/" class="nav-link">MySQL</a></li><li class="dropdown-subitem"><a href="/postgresql/" class="nav-link">PostgreSQL</a></li></ul></li><li class="dropdown-item"><h4>NoSQL 数据库</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/redis/" class="nav-link">Redis</a></li><li class="dropdown-subitem"><a href="/es/" class="nav-link">ElasticSearch</a></li><li class="dropdown-subitem"><a href="/mongodb/" class="nav-link">MongoDB</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Python" class="dropdown-title"><a href="/pythonstrdy/" class="link-title">Python</a> <span class="title" style="display:none;">Python</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/python_basics/" class="nav-link">Python Basics</a></li><li class="dropdown-item"><!----> <a href="/python_advanced/" class="nav-link">Python Advanced</a></li><li class="dropdown-item"><!----> <a href="/python_projects/" class="nav-link">Python Projects</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="网络运维" class="dropdown-title"><a href="/tool/" class="link-title">网络运维</a> <span class="title" style="display:none;">网络运维</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>CCNA</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/91ab17/" class="nav-link">CCNA知识</a></li><li class="dropdown-subitem"><a href="/pages/55766c/" class="nav-link">CCNA题库</a></li><li class="dropdown-subitem"><a href="/pages/f61749/" class="nav-link">Cisco NetAca</a></li></ul></li><li class="dropdown-item"><!----> <a href="/pages/4f0673/" class="nav-link">Ansible</a></li><li class="dropdown-item"><h4>版本管理</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/maven/" class="nav-link">Maven</a></li><li class="dropdown-subitem"><a href="/git/" class="nav-link">Git</a></li></ul></li><li class="dropdown-item"><h4>部署</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/linux/" class="nav-link">Linux</a></li><li class="dropdown-subitem"><a href="/docker/" class="nav-link">Docker</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="About" class="dropdown-title"><a href="/archives/" class="link-title">About</a> <span class="title" style="display:none;">About</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>This Blog</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/categories/" class="nav-link">Categories</a></li><li class="dropdown-subitem"><a href="/tags/" class="nav-link">Tags</a></li><li class="dropdown-subitem"><a href="/archives/" class="nav-link">Archives</a></li></ul></li><li class="dropdown-item"><h4>About Me</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/whell/web/" class="nav-link">Collection</a></li><li class="dropdown-subitem"><a href="/about/website/introduce/" class="nav-link">Introduction</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="星河万里" class="dropdown-title"><a href="/inGermany/" class="link-title">星河万里</a> <span class="title" style="display:none;">星河万里</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>德国驾照B级</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/8a9dd0/" class="nav-link">理论准备</a></li><li class="dropdown-subitem"><a href="/pages/b79ef5/" class="nav-link">实践准备</a></li></ul></li><li class="dropdown-item"><h4>星河万里</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/bcf060/" class="nav-link">Vim操作</a></li><li class="dropdown-subitem"><a href="/pages/c11fcf/" class="nav-link">Gitemoji</a></li><li class="dropdown-subitem"><a href="/pages/055f2e/" class="nav-link">无妄经</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/message-board/" class="nav-link">MessageBoard📋</a></div> <a href="https://github.com/Jonas-Wolfxin/Jonas-Wolfxin.github.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="https://cdn.jsdelivr.net/gh/Wolfxin/MyPicGo/img/202206092309359.png"> <div class="blogger-info"><h3>Jonas 林风</h3> <span>吾志所向，万夫不当；披荆斩棘，奋而继往。</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">Home🏠</a></div><div class="nav-item"><a href="/navigation/" class="nav-link">Navigation🧭</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Front End" class="dropdown-title"><a href="/front/" class="link-title">Front End</a> <span class="title" style="display:none;">Front End</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Basics</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/html/" class="nav-link">HTML</a></li><li class="dropdown-subitem"><a href="/css/" class="nav-link">CSS</a></li><li class="dropdown-subitem"><a href="/javascript/" class="nav-link">JavaScript</a></li></ul></li><li class="dropdown-item"><h4>Frame</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/react/" class="nav-link">React</a></li><li class="dropdown-subitem"><a href="/vue2/" class="nav-link">Vue2</a></li><li class="dropdown-subitem"><a href="/vue3/" class="nav-link">Vue3</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Database" class="dropdown-title"><a href="/database/" class="link-title">Database</a> <span class="title" style="display:none;">Database</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>SQL 数据库</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/mysql/" class="nav-link">MySQL</a></li><li class="dropdown-subitem"><a href="/postgresql/" class="nav-link">PostgreSQL</a></li></ul></li><li class="dropdown-item"><h4>NoSQL 数据库</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/redis/" class="nav-link">Redis</a></li><li class="dropdown-subitem"><a href="/es/" class="nav-link">ElasticSearch</a></li><li class="dropdown-subitem"><a href="/mongodb/" class="nav-link">MongoDB</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Python" class="dropdown-title"><a href="/pythonstrdy/" class="link-title">Python</a> <span class="title" style="display:none;">Python</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/python_basics/" class="nav-link">Python Basics</a></li><li class="dropdown-item"><!----> <a href="/python_advanced/" class="nav-link">Python Advanced</a></li><li class="dropdown-item"><!----> <a href="/python_projects/" class="nav-link">Python Projects</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="网络运维" class="dropdown-title"><a href="/tool/" class="link-title">网络运维</a> <span class="title" style="display:none;">网络运维</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>CCNA</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/91ab17/" class="nav-link">CCNA知识</a></li><li class="dropdown-subitem"><a href="/pages/55766c/" class="nav-link">CCNA题库</a></li><li class="dropdown-subitem"><a href="/pages/f61749/" class="nav-link">Cisco NetAca</a></li></ul></li><li class="dropdown-item"><!----> <a href="/pages/4f0673/" class="nav-link">Ansible</a></li><li class="dropdown-item"><h4>版本管理</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/maven/" class="nav-link">Maven</a></li><li class="dropdown-subitem"><a href="/git/" class="nav-link">Git</a></li></ul></li><li class="dropdown-item"><h4>部署</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/linux/" class="nav-link">Linux</a></li><li class="dropdown-subitem"><a href="/docker/" class="nav-link">Docker</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="About" class="dropdown-title"><a href="/archives/" class="link-title">About</a> <span class="title" style="display:none;">About</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>This Blog</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/categories/" class="nav-link">Categories</a></li><li class="dropdown-subitem"><a href="/tags/" class="nav-link">Tags</a></li><li class="dropdown-subitem"><a href="/archives/" class="nav-link">Archives</a></li></ul></li><li class="dropdown-item"><h4>About Me</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/whell/web/" class="nav-link">Collection</a></li><li class="dropdown-subitem"><a href="/about/website/introduce/" class="nav-link">Introduction</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="星河万里" class="dropdown-title"><a href="/inGermany/" class="link-title">星河万里</a> <span class="title" style="display:none;">星河万里</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>德国驾照B级</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/8a9dd0/" class="nav-link">理论准备</a></li><li class="dropdown-subitem"><a href="/pages/b79ef5/" class="nav-link">实践准备</a></li></ul></li><li class="dropdown-item"><h4>星河万里</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/bcf060/" class="nav-link">Vim操作</a></li><li class="dropdown-subitem"><a href="/pages/c11fcf/" class="nav-link">Gitemoji</a></li><li class="dropdown-subitem"><a href="/pages/055f2e/" class="nav-link">无妄经</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/message-board/" class="nav-link">MessageBoard📋</a></div> <a href="https://github.com/Jonas-Wolfxin/Jonas-Wolfxin.github.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>CCNA</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>CCNA知识笔记</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/1634eb/" class="sidebar-link">网络工程师的介绍</a></li><li><a href="/pages/91ab17/" class="sidebar-link">OSI Model</a></li><li><a href="/pages/68df0c/" class="sidebar-link">IP Addressing</a></li><li><a href="/pages/0cd5e5/" class="sidebar-link">TCP/IP Suite</a></li><li><a href="/pages/32e4ca/" class="sidebar-link">Comparison-TCP Vs UDP</a></li><li><a href="/pages/9876fd/" class="sidebar-link">Cisco IOS CLI</a></li><li><a href="/pages/fabc03/" class="sidebar-link">Switching_VLAN</a></li><li><a href="/pages/778234/" class="sidebar-link">Switching_STP</a></li><li><a href="/pages/85147b/" class="sidebar-link">Switching_EtherChannel</a></li><li><a href="/pages/087c56/" class="sidebar-link">Layer 2 Discovery Protocols</a></li><li><a href="/pages/6b8f16/" class="sidebar-link">Layer 2 Forwarding</a></li><li><a href="/pages/149f35/" class="sidebar-link">Routing_Static</a></li><li><a href="/pages/d70851/" class="sidebar-link">Dynamic Routing P1 RIP EIGRP</a></li><li><a href="/pages/c4055c/" class="sidebar-link">Dynamic Routing P2 OSPF</a></li><li><a href="/pages/32db2d/" class="sidebar-link">Layer 3 Forwarding</a></li><li><a href="/pages/fe5ceb/" class="sidebar-link">Virtual Routing and Forwarding</a></li><li><a href="/pages/bada2c/" class="sidebar-link">Layer 3 FHRPs</a></li><li><a href="/pages/81e45f/" class="sidebar-link">Security</a></li><li><a href="/pages/6bd28d/" class="sidebar-link">ACL</a></li><li><a href="/pages/7db05a/" class="sidebar-link">NAT 网络地址转换</a></li><li><a href="/pages/729891/" class="sidebar-link">LAN Architectures</a></li><li><a href="/pages/1076ba/" aria-current="page" class="active sidebar-link">WAN广域网</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/pages/1076ba/#intro-to-wans" class="sidebar-link">Intro to WANs</a></li><li class="sidebar-sub-header level2"><a href="/pages/1076ba/#leased-lines" class="sidebar-link">Leased Lines</a></li><li class="sidebar-sub-header level2"><a href="/pages/1076ba/#mpls-vpns" class="sidebar-link">MPLS VPNs</a></li><li class="sidebar-sub-header level2"><a href="/pages/1076ba/#internet-connectivity" class="sidebar-link">Internet connectivity</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/1076ba/#connection-to-internet" class="sidebar-link">connection to Internet</a></li><li class="sidebar-sub-header level3"><a href="/pages/1076ba/#dsl-catv" class="sidebar-link">DSL &amp; CATV</a></li><li class="sidebar-sub-header level3"><a href="/pages/1076ba/#redundant-internets-connections" class="sidebar-link">Redundant Internets Connections</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/1076ba/#internet-vpns" class="sidebar-link">Internet VPNs</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/1076ba/#site-to-site-vpns-ipsec" class="sidebar-link">Site-to-Site VPNs (IPsec)</a></li><li class="sidebar-sub-header level3"><a href="/pages/1076ba/#remote-access-vpns" class="sidebar-link">Remote-Access VPNs</a></li><li class="sidebar-sub-header level3"><a href="/pages/1076ba/#site-to-site-vs-remote-access-vpn" class="sidebar-link">Site-to-Site vs Remote Access VPN</a></li><li class="sidebar-sub-header level3"><a href="/pages/1076ba/#lab-gre-tunnels" class="sidebar-link">Lab - GRE Tunnels</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/1076ba/#wan-基础" class="sidebar-link">WAN 基础</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/1076ba/#wan-terms" class="sidebar-link">WAN terms</a></li><li class="sidebar-sub-header level3"><a href="/pages/1076ba/#wan-connection-bandwidth" class="sidebar-link">WAN Connection Bandwidth</a></li><li class="sidebar-sub-header level3"><a href="/pages/1076ba/#wan-connection-types" class="sidebar-link">WAN Connection Types</a></li><li class="sidebar-sub-header level3"><a href="/pages/1076ba/#wan-support" class="sidebar-link">WAN Support</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/1076ba/#prominently-known-wan-protocols" class="sidebar-link">prominently known WAN protocols</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/1076ba/#frame-relay" class="sidebar-link">Frame Relay</a></li><li class="sidebar-sub-header level4"><a href="/pages/1076ba/#简介" class="sidebar-link">简介</a></li><li class="sidebar-sub-header level4"><a href="/pages/1076ba/#帧中继的实现" class="sidebar-link">帧中继的实现</a></li><li class="sidebar-sub-header level4"><a href="/pages/1076ba/#帧中继的验证" class="sidebar-link">帧中继的验证</a></li><li class="sidebar-sub-header level3"><a href="/pages/1076ba/#isdn" class="sidebar-link">ISDN</a></li><li class="sidebar-sub-header level3"><a href="/pages/1076ba/#lapb" class="sidebar-link">LAPB</a></li><li class="sidebar-sub-header level3"><a href="/pages/1076ba/#lapd" class="sidebar-link">LAPD</a></li><li class="sidebar-sub-header level3"><a href="/pages/1076ba/#hdlc" class="sidebar-link">HDLC</a></li><li class="sidebar-sub-header level3"><a href="/pages/1076ba/#ppp" class="sidebar-link">PPP</a></li><li class="sidebar-sub-header level4"><a href="/pages/1076ba/#链路控制协议-lcp-配置选项" class="sidebar-link">链路控制协议(LCP) 配置选项</a></li><li class="sidebar-sub-header level4"><a href="/pages/1076ba/#ppp-session-establishment" class="sidebar-link">PPP Session Establishment</a></li><li class="sidebar-sub-header level4"><a href="/pages/1076ba/#ppp-authentication-methods" class="sidebar-link">PPP Authentication Methods</a></li><li class="sidebar-sub-header level4"><a href="/pages/1076ba/#configuring-ppp-on-cisco-routers" class="sidebar-link">Configuring PPP on Cisco Routers</a></li><li class="sidebar-sub-header level4"><a href="/pages/1076ba/#configuring-ppp-authentication" class="sidebar-link">Configuring PPP Authentication</a></li><li class="sidebar-sub-header level4"><a href="/pages/1076ba/#验证ppp封装" class="sidebar-link">验证PPP封装</a></li><li class="sidebar-sub-header level3"><a href="/pages/1076ba/#pppoe" class="sidebar-link">PPPoE</a></li><li class="sidebar-sub-header level3"><a href="/pages/1076ba/#cable" class="sidebar-link">Cable</a></li><li class="sidebar-sub-header level3"><a href="/pages/1076ba/#dsl" class="sidebar-link">DSL</a></li><li class="sidebar-sub-header level4"><a href="/pages/1076ba/#asdl" class="sidebar-link">ASDL</a></li><li class="sidebar-sub-header level4"><a href="/pages/1076ba/#cisco-long-range-ethernet-lre" class="sidebar-link">Cisco Long Range Ethernet (LRE)</a></li><li class="sidebar-sub-header level3"><a href="/pages/1076ba/#mpls" class="sidebar-link">MPLS</a></li><li class="sidebar-sub-header level3"><a href="/pages/1076ba/#atm" class="sidebar-link">ATM</a></li><li class="sidebar-sub-header level3"><a href="/pages/1076ba/#dwdm" class="sidebar-link">DWDM</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/1076ba/#cabling-the-serial-wide-area-network" class="sidebar-link">Cabling the Serial Wide Area Network</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/1076ba/#serial-transmission" class="sidebar-link">Serial Transmission</a></li><li class="sidebar-sub-header level3"><a href="/pages/1076ba/#data-terminal-equipment-data-communications-equipment" class="sidebar-link">==Data Terminal Equipment== &amp; ==Data Communications Equipment==</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/1076ba/#广域网的链路类型" class="sidebar-link">广域网的链路类型:</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/1076ba/#专线-运营商提供的服务-如-t1-t3等" class="sidebar-link">专线: 运营商提供的服务, 如 T1, T3等</a></li><li class="sidebar-sub-header level3"><a href="/pages/1076ba/#vpn-mpls-vpn-mstp-vpn" class="sidebar-link">VPN: MPLS VPN, MSTP VPN,</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/1076ba/#vpn-virtual-private-networks" class="sidebar-link">VPN(Virtual Private Networks)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/1076ba/#ipsec" class="sidebar-link">IPsec</a></li><li class="sidebar-sub-header level4"><a href="/pages/1076ba/#ipsec-transforms" class="sidebar-link">IPSec Transforms</a></li><li class="sidebar-sub-header level3"><a href="/pages/1076ba/#gre-vpn" class="sidebar-link">GRE VPN</a></li><li class="sidebar-sub-header level3"><a href="/pages/1076ba/#mpls-vpn" class="sidebar-link">MPLS VPN</a></li><li class="sidebar-sub-header level4"><a href="/pages/1076ba/#基本配置" class="sidebar-link">基本配置</a></li></ul></li></ul></li><li><a href="/pages/441d7d/" class="sidebar-link">WLAN</a></li><li><a href="/pages/e31696/" class="sidebar-link">NTP</a></li><li><a href="/pages/c7a0a2/" class="sidebar-link">DNS</a></li><li><a href="/pages/d25cf6/" class="sidebar-link">Syslog</a></li><li><a href="/pages/c74f1d/" class="sidebar-link">Accessing the CLI of network devices</a></li><li><a href="/pages/5d3322/" class="sidebar-link">FTP TFTP</a></li><li><a href="/pages/e049f9/" class="sidebar-link">DHCP</a></li><li><a href="/pages/7ebd2e/" class="sidebar-link">SNMP</a></li><li><a href="/pages/bba118/" class="sidebar-link">Quality of service</a></li><li><a href="/pages/652496/" class="sidebar-link">Virtualization</a></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>CCNA题库</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Cisco Networking Academy</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Ansible</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>版本管理 - Maven</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>开发管理 - Git</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>操作系统 - Linux</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>容器部署 - Docker</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><a href="/categories/?category=%E7%BD%91%E7%BB%9C%E8%BF%90%E7%BB%B4" title="分类" data-v-06225672>网络运维</a></li><li data-v-06225672><a href="/categories/?category=CCNA" title="分类" data-v-06225672>CCNA</a></li><li data-v-06225672><a href="/categories/?category=CCNA%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0" title="分类" data-v-06225672>CCNA知识笔记</a></li></ul> <div class="info" data-v-06225672><div title="作者" class="author iconfont icon-touxiang" data-v-06225672><a href="https://github.com/Jonas-Wolfxin" target="_blank" title="作者" class="beLink" data-v-06225672>Jonas Wolfxin</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2022-07-13</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABH1JREFUSA3tVl1oHFUUPmdmd2ltklqbpJDiNnXFmgbFktho7YMPNiJSSZM0+CAYSkUELVhM6YuwIPpgoOKDqOBDC0XE2CQoNtQXBUFTTcCi+Wlh1V2TQExsUzcltd3M9Tt3ZjZzZ2fT+OJTL8yeM+eee757fmeJbq//KQL8X3DUSFOcfr7cRsRtxNQMWueeVzOkaITIGqQHNg5y8+jNW9ldM7A6nTpAjuolUikAwq7CE3WcM2RRDz+XGVgN3FptU/aUSlvq9Pa3iZ1+sgAqJyyAFqkipd9dqiwHF3P65YycLWc/6sqGrvoEoIp6DOFaX5h6+dnfjkWprwqsPk0dUGq5vySwDImC10KxFHgGL1SWoc92O3eVht09qdXNH11I2SsTsJYqMWzihqGMi+A+Garf3BAuuLI5oGlULyNfyB/HYNujwktOfRrMr5t77NmevqaUopx0grnKAyvVpmwUDB4x6FPXuGvYLTDwWsejwgtgkYKPqRJg8SV6xaiZ3ZTppGneS4yfH5/66fZSDHv+QZci/+h5c5UHtpy67JUqGppM0sh0Nc1dW6/N1W5Yoqat8/TU/VnadmdeW2PLLSyh0cvxBs3KbqTmwYPpxN4do/mzE8nEpvX/UMu2Wbp74zUAK5q6WkHns7V0eWkdPbPzd3rxkTGybadYySumVzhcaJFbs5UrEkQ/+CK8gF5dnh/6ciIZ73gwQ927L1IitoxKLXYP3SjYdOrHHfTZhRRlFyrorafPk20B3HPD1y2G3qKZME5Jcf3t/HUC13/8tSd++vqFveMUTwAUxSUFI1QekR1+bIze3D9MF2aq6cPvG72CgnldWCFqyRw3lwH8ZMerjTD9ElRO7Gv44wNpC90aASqGfVlz/Rx17srQ57/UU26hkhQqUB7dBR71WmzQhHUnblGmVOEw0jhbV1n9OlXUDCIRGaNV5Jp43N516fN7JmnTHdfp7Hgy0luO4aMhtkLL8Bi3bUWYvzh5Mn1dTxrL6QmGuRhGL/TiTTxRoEdTszSaq9GR0NGA3KdkOz3hqSV3MIDhQ5IVX/Ivx3umBti2es2h4eZby7x8br1rkf7Mo90AqC8aQ3sJeNzqFRu+vSANAQe3PL7l0HGOAdwDCeZYvNKeoZp1Qfs6Aipndh86HmFRi0LAnEO47wsqM6cdfjh3jBPUzhZy7nvlUfFsamED1VQt6aISHVymXZ/B2aCtIG8AI8xfobj2d3en1wWVhOeHELKmLQ1s211s88comkv4UCwWyF787mJdYXtNfhKAXVqnKTq8QZvGAGGOfaTo5pGZ/PwbUCr5+DPr/1J92JNHr9aOl/F3iI5+O1nfybsGxoimvZ3ViWSluDITw3P37mypheDIPY0tw7+O/5ApbkYw+zpfaUVu32Pi98+defdUhEpZkRFq0aqyNh9FuL9hpYbEm6iwi0z2REd09ZmyENEbuhjDWzKvZXTqKYaBIr3tt5kuPtQBZFvEUwHt60vfCNu41XsksH9Ij1BMMz1Y0OOunHNShFIP5868g5zeXmuLwL9T4b6Q2+KejgAAAABJRU5ErkJggg==">WAN广域网<!----></h1> <!----> <div class="theme-vdoing-content content__default"><h2 id="intro-to-wans"><a href="#intro-to-wans" class="header-anchor">#</a> Intro to WANs</h2> <blockquote><ul><li>WAN stands for <strong>Wide Area Network</strong>.</li> <li>A WAN is a network that extends over a large geographic area, which <strong>are used to connect geographically separate LANs</strong>.</li> <li>Although the Internet itself can be considered a WAN, the term WAN is typically used to refer to an enterprise’s private connections that connect their offices, data centers, and other sites together.</li> <li>Over public/shared networks like the Internet, <strong>VPNs (Virtual Private Networks)</strong> can be used to create private WAN connections.</li> <li>There have been many different WAN technologies over the years. Depending on the location, some will be available and some will not be.</li> <li>Technologies which are considered <strong>legacy</strong> in one country might still be used in other countries.
<ul><li>Legacy basically means <em>old and no longer used or rarely used</em>.</li></ul></li></ul></blockquote> <blockquote><h6 id="here-s-an-example-of-a-wan"><a href="#here-s-an-example-of-a-wan" class="header-anchor">#</a> Here’s an example of a WAN.</h6> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202305150206869.png" alt="image-20230515020621586" style="zoom:25%;"> <ul><li>This enterprise has a central data center and some offices. Each of these, office A, office B, office C, as well as the data center, is its own LAN.</li> <li>Each office is connected to the data center via a leased line, which is a kind of dedicated physical connection between two sites. This is not a shared connection, it’s not connected to the Internet, it’s a private connection that the company uses to connect its sites together.</li> <li>In the LAN Architecture, I introduced the term <strong>star topology</strong>, however when talking about WANs, a more common term is <strong>hub and spoke</strong>.
<ul><li>The central site, the data center, is called the <strong>hub</strong>,</li> <li>and the office sites which all connect to the hub are called <strong>spokes</strong>.</li> <li>One major advantage of a hub-and-spoke topology, as opposed to a full-mesh topology, is that it’s easier to centrally control what traffic is allowed and what isn’t.</li></ul></li></ul> <h6 id="this-diagram-is-actually-exactly-an-accurate-representation-of-leased-lines"><a href="#this-diagram-is-actually-exactly-an-accurate-representation-of-leased-lines" class="header-anchor">#</a> This diagram is actually exactly an accurate representation of leased lines.</h6> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202305150210474.png" alt="image-20230515021020267" style="zoom:25%;"> <ul><li>Rather than a single physical cable directly connecting each site, each site connects to a Service Provider, which connects the sites together.</li> <li>These connections use serial cables, which use Layer 2 encapsulations like HDLC and PPP, not Ethernet. However these days WAN connections via Ethernet are more and more common.</li></ul> <h6 id="optical-fiber-connections"><a href="#optical-fiber-connections" class="header-anchor">#</a> Optical fiber connections</h6> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202305150212218.png" alt="image-20230515021209009" style="zoom:25%;"> <ul><li>Optical fiber connections allow much longer cables than the traditional copper UTP Ethernet cables, so <strong>these days WANs using Ethernet fiber optic cables are quite common</strong>.</li></ul> <p>(If you want to learn more about techniques of the service provider, consider the CCNP service provider track in your future studies.)</p> <h6 id="now-the-internet-can-also-be-used-for-an-enterprise-s-wan-connections-between-sites"><a href="#now-the-internet-can-also-be-used-for-an-enterprise-s-wan-connections-between-sites" class="header-anchor">#</a> Now, the Internet can also be used for an enterprise’s WAN connections between sites.</h6> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202305150218869.png" alt="image-20230515021808579" style="zoom:28%;"> <ul><li>However, the Internet itself is not a private network. It’s a shared, public network, so sending important data over the Internet unprotected is not a good idea.</li> <li>However, to send traffic between sites the company will set up VPNs(virtual private networks). Basically the packets will be encrypted so that the contents can only be read by the intended recipients.</li> <li>Then, the encrypted packet is encapsulated within a new packet and sent. This means that the original packet will remain protected even when sent over the public Internet.</li></ul></blockquote> <h2 id="leased-lines"><a href="#leased-lines" class="header-anchor">#</a> Leased Lines</h2> <blockquote><ul><li>A leased line is a dedicated physical link, typically connecting two sites.</li> <li>Leased lines use serial connections (PPP or HDLC encapsulation).</li> <li>There are various standards that provide different speeds, and different standards are available in different countries.</li></ul> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202305150220229.png" alt="image-20230515022029126" style="zoom:100%;"> <ul><li>As I mentioned before Ethernet WAN technologies are becoming more and more popular, rather than these serial leased lines.
<ul><li>Due to the <em>higher cost</em>, <em>higher installation lead time</em>, and <em>slower speeds</em> of leased lines, <strong>Ethernet WAN technologies</strong> are becoming more popular.</li></ul></li></ul></blockquote> <h2 id="mpls-vpns"><a href="#mpls-vpns" class="header-anchor">#</a> MPLS VPNs</h2> <blockquote><ul><li>MPLS stands for ‘Multi Protocol Label Switching’.</li> <li>Similar to the Internet, <strong>service providers’ MPLS networks</strong> are <strong>shared infrastructure</strong>, because many customer enterprises connect to and share the same infrastructure to make WAN connections.</li> <li>However, the label switching in the name of MPLS allows VPNs to be created over the MPLS infrastructure through the use of labels.
<ul><li>These labels are used to separate the traffic of different customers as it travels over the shared infrastructure, and make sure it doesn’t mix with the traffic of other customers.</li></ul></li> <li>Some important terms:
<ul><li><strong>CE router</strong> = Customer Edge router.</li> <li>PE router = Provider Edge router</li> <li>P router = Provider core router (These are the Provider core routers that are not at the edge of the network and don’t connect to customer routers.)</li></ul></li></ul> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202305150228297.png" alt="image-20230515022836128" style="zoom:33%;"> <ul><li>When the <strong>PE routers</strong> receive frames from the CE routers, they add a label to the frame.
<ul><li>This label is actually placed in between the Layer 2 Ethernet header and the Layer 3 IP header, so sometimes <strong>MPLS</strong> is called a <strong>Layer 2.5 protocol</strong>.</li> <li>These <strong>labels</strong> are then used to make forwarding decisions within the service provider network, <em>not the destination IP</em>.
<ul><li>In regular IP routing the router checks the destination IP and compares it to its routing table to decide where to forward the packet. But not in MPLS!</li> <li>MPLS routers use the MPLS label to decide where to forward the packet.</li></ul></li></ul></li> <li>The CE routers do not use MPLS, it is only used by the PE/P routers. The CE routers do not have to run MPLS or even be able to run MPLS.</li></ul></blockquote> <blockquote><h5 id="now-there-are-a-few-different-kinds-of-vpns-that-can-be-provided-by-mpls"><a href="#now-there-are-a-few-different-kinds-of-vpns-that-can-be-provided-by-mpls" class="header-anchor">#</a> Now, there are a few different kinds of VPNs that can be provided by MPLS.</h5> <h6 id="layer-3-mpls-vpn"><a href="#layer-3-mpls-vpn" class="header-anchor">#</a> Layer 3 MPLS VPN</h6> <p>When using a <strong>Layer 3 MPLS VPN</strong>, the CE and PE routers peer using OSPF for example(or other routing protocols), to share routing information. (Or the customer could just write static routes, using the PE routers as the next hop.)</p> <ul><li>For example, in the diagram below Office A’s CE will peer with one PE, and Office B’s CE will peer with the other PE.</li> <li>Office A’s CE will learn about Office B’s routes via this OSPF peering, and Office B’s CE will learn about Office A’s routes too.</li></ul> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202305150237907.png" alt="image-20230515023724743" style="zoom:33%;"> <h6 id="layer-2-mpls-vpn"><a href="#layer-2-mpls-vpn" class="header-anchor">#</a> Layer 2 MPLS VPN</h6> <p>When using a <strong>Layer 2 MPLS VPN</strong>, the CE and PE routers do not form peerings.</p> <ul><li>The service provider network is entirely transparent to the CE routers.
<ul><li>Although the CE routers will physically connect to a PE router, it is in effect like the two CE routers are directly connected.</li> <li>Their WAN interfaces will be in the same subnet.</li></ul></li> <li>If a routing protocol is used, the two CE routers will peer directly with each other like this.</li></ul> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202305150243989.png" alt="image-20230515024323835" style="zoom:33%;"> <ul><li>In this case, the service provider network is still running MPLS just like before, but it’s doing so in a way that it’s like the entire service provider network is just a big switch connecting the two CE routers together like this.
<ul><li>The CE routers are physically connected to the PE routers, and the entire PE network is operating like a big switch connecting the CE routers together.</li></ul></li></ul> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202305150244408.png" alt="image-20230515024419228" style="zoom:33%;"> <h6 id="now"><a href="#now" class="header-anchor">#</a> Now</h6> <p>MPLS is a technology that runs in the service provider network, but many different technologies, many different kinds of connections, can be used to actually connect to the service provider’s MPLS network for WAN service.</p> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202305150247574.png" alt="image-20230515024745365" style="zoom:33%;"> <ul><li>In this case office A and office B are connecting via fiber optic Ethernet.</li> <li>Perhaps office C is connecting to the service provider via wireless 4G or 5G.</li> <li>Office D might be connecting via CATV, a cable TV connection as is often used for home Internet access.</li> <li>And office E might use a serial connection, a leased line to connect to the service provider’s MPLS infrastructure.</li></ul> <p>So, these sites are connecting to the service provider with a variety of connection types, and they will all be able to communicate with each other over the service provider’s MPLS infrastructure.</p></blockquote> <h2 id="internet-connectivity"><a href="#internet-connectivity" class="header-anchor">#</a> Internet connectivity</h2> <h3 id="connection-to-internet"><a href="#connection-to-internet" class="header-anchor">#</a> connection to Internet</h3> <blockquote><p>There are countless ways for an enterprise to connect to the Internet.</p> <ul><li>For example, <strong>private WAN technologies</strong> such as <em>leased lines</em> and <em>MPLS VPNs</em> can be used to connect to a service provider’s Internet infrastructure.
<ul><li>Although the leased line or MPLS VPN itself is a private network, it can be used as a means to access the public network(Internet).</li></ul></li> <li>In addition, technologies such as <strong>CATV and DSL</strong> commonly used by consumers (home Internet access) can also be used by an Enterprise.</li> <li>These days, for both enterprise and consumer Internet access, <strong>fiber optic Ethernet connections</strong> are growing in popularity due to the high speeds they provide over long distances.</li></ul></blockquote> <h3 id="dsl-catv"><a href="#dsl-catv" class="header-anchor">#</a> DSL &amp; CATV</h3> <blockquote><p>Let’s briefly look at two Internet access technologies mentioned above: cable (CATV) and DSL.</p> <h5 id="digital-subscriber-line-dsl"><a href="#digital-subscriber-line-dsl" class="header-anchor">#</a> Digital Subscriber Line (DSL)</h5> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202305150256799.png" alt="image-20230515025610576" style="zoom:33%;"> <ul><li>DSL provides Internet connectivity to customers over phone lines, and can share the same phone line that is already installed in most homes.</li> <li>A <strong>modem</strong>, which stands for <strong>modulator-demodulator</strong>, is required to convert data into a format suitable to be sent over the <em>phone lines</em>.
<ul><li>The modem might be a separate device, as in the diagram, or it might be incorporated into the home router.</li></ul></li></ul> <h5 id="cable-internet"><a href="#cable-internet" class="header-anchor">#</a> Cable Internet</h5> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202305150257752.png" alt="image-20230515025702531" style="zoom:33%;"> <ul><li>Cable Internet provides Internet access via the same <strong>CATV (Cable Television) lines</strong> used for TV service.</li> <li>Like DSL, a <strong>cable modem</strong> is required to convert data into a format suitable to be sent over the CATV cables.
<ul><li>Like a DSL modem, this can be a separate device or built into the home router.</li></ul></li></ul></blockquote> <h3 id="redundant-internets-connections"><a href="#redundant-internets-connections" class="header-anchor">#</a> Redundant Internets Connections</h3> <blockquote><p>Now, for a home user, having one connection to the Internet isn’t a problem. It’s a bit annoying if you lose Internet access, but it’s not a disaster. However, for many companies Internet access is essential to their operations. So, it’s best to have redundant Internet connections, and there are a few terms you should know.</p> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202305150305338.png" alt="image-20230515030551995" style="zoom:33%;"> <ul><li>If you have 1 connection to 1 ISP, it’s called <strong>Single Homed</strong>.
<ul><li>This is like a standard home Internet connection.</li> <li>For an enterprise, this is not ideal, because there is no redundancy here.</li></ul></li> <li>If you have 2 connections to that same ISP, it’s called <strong>Dual Homed</strong>.
<ul><li>This provides some redundancy, but still not ideal.</li></ul></li> <li>If you have 1 connection to each of 2 ISPs, it’s called <strong>Multihomed</strong>.
<ul><li>This improves the redundancy because if something happens to 1 ISP, you still have Internet access via the other one.</li></ul></li> <li>Finally there is <strong>Dual Multihomed</strong>, 2 connections to each of 2 ISPs.
<ul><li><strong>This provides the most redundancy</strong>.</li></ul></li></ul></blockquote> <h2 id="internet-vpns"><a href="#internet-vpns" class="header-anchor">#</a> Internet VPNs</h2> <blockquote><ul><li><p>Private WAN services such as leased lines and MPLS provide security because each customer’s traffic is separated by using dedicated physical connections (leased line) or by MPLS tags.</p></li> <li><p>When using the Internet as a WAN to connect sites together, there is no built-in security by default.</p></li> <li><p>To provide secure communications over the Internet, VPNs (Virtual Private Networks) are used.</p></li> <li><p>We will cover two kinds of Internet VPNs:</p> <ul><li>Site-to-Site VPNs using <strong>IPsec</strong></li> <li>Remote-access VPNs using <strong>TLS</strong></li></ul></li></ul></blockquote> <h3 id="site-to-site-vpns-ipsec"><a href="#site-to-site-vpns-ipsec" class="header-anchor">#</a> Site-to-Site VPNs (IPsec)</h3> <blockquote><ul><li>A site-to-site VPN is a VPN between two devices and is used to connect two sites together over the Internet.</li> <li>In a site-to-site VPN, a VPN tunnel is created between the two devices by encapsulating the original IP packet with a VPN header and a new IP header.
<ul><li>When using IPsec, the original packet is encrypted before being encapsulated with the new header.</li> <li>In a ‘site-to-site’ VPN, a tunnel is formed only between two tunnel endpoints (for example, the two routers connected to the Internet).</li> <li>All other devices in each site don’t need to create a VPN for themselves. They can send unencrypted data to their site’s router, which will encrypt it and forward it in the tunnel as described above.</li></ul></li></ul> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202305150344975.png" alt="image-20230515034426704" style="zoom:33%;"> <h5 id="let-s-summarize-that-process"><a href="#let-s-summarize-that-process" class="header-anchor">#</a> Let’s summarize that process:</h5> <ol><li><p>The sending device combines the original packet and session key (encryption key) and runs them
through an encryption formula.</p></li> <li><p>The sending device encapsulates the encrypted packet with a VPN header and a new IP header.</p></li> <li><p>The sending device sends the new packet to the device on the other side of the tunnel.</p></li> <li><p>The receiving device decrypts the data to get the original packet, and then forwards the original packet
to its destination.</p></li></ol></blockquote> <blockquote><h5 id="there-are-some-limitations-to-standard-ipsec"><a href="#there-are-some-limitations-to-standard-ipsec" class="header-anchor">#</a> There are some limitations to standard IPsec:</h5> <ul><li><p>IPsec doesn’t support broadcast and multicast traffic, only unicast. This means that routing protocols such as OSPF can't be used over the tunnels, because they rely on multicast traffic.</p> <ul><li>This can be solved with ‘<strong>GRE over IPsec</strong>’</li></ul></li> <li><p>Configuring a full mesh of tunnels between many sites is a labor-intensive task.</p> <ul><li>This can be solved with <strong>Cisco’s DMVPN</strong>.</li></ul></li></ul> <h6 id="gre-over-ipsec"><a href="#gre-over-ipsec" class="header-anchor">#</a> GRE over IPsec</h6> <ul><li><strong>GRE (Generic Routing Encapsulation)</strong> creates tunnels like IPsec, h<strong>owever it does not encrypt the original packet, so it is not secure</strong>.</li> <li>However, <strong>it has the advantage of being able to encapsulate a wide variety of Layer 3 protocols as well as broadcast and multicast messages</strong>.</li> <li>To get the flexibility of GRE with the security of IPsec, ‘<strong>GRE over IPsec</strong>’ can be used.</li> <li>The original packet will be encapsulated by a GRE header and a new IP header, and then the GRE packet will be encrypted and encapsulated within an IPsec VPN header and new IP header.</li></ul> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202305150353180.png" alt="image-20230515035343042" style="zoom:25%;"> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202305150353505.png" alt="image-20230515035359372" style="zoom:25%;"> <h6 id="dmvpn"><a href="#dmvpn" class="header-anchor">#</a> DMVPN</h6> <p>DMVPN (Dynamic Multipoint VPN) is a Cisco-developed solution that allows routers to dynamically create a full mesh of IPsec tunnels without having to manually configure every single tunnel.</p> <ol><li>Configure IPsec tunnels to a hub site.</li></ol> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202305150400753.png" alt="image-20230515040027587" style="zoom:33%;"> <ol start="2"><li>The hub router gives each router information about how to form an IPsec tunnel with the other routers.</li></ol> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202305150401527.png" alt="image-20230515040119359" style="zoom:33%;"> <blockquote><p>DMVPN provides the configuration simplicity of hub- and-spoke (each spoke router only needs one tunnel configured) and the efficiency of direct spoke-to-spoke communication (spoke routers can communicate directly without traffic passing through the hub)</p></blockquote></blockquote> <h3 id="remote-access-vpns"><a href="#remote-access-vpns" class="header-anchor">#</a> Remote-Access VPNs</h3> <blockquote><ul><li>Whereas site-to-site VPNs are used to make a point-to-point connection between two sites over the Internet, <strong>remote-access VPNs are used to allow end devices (PCs, mobile phones) to access the company’s internal resources securely over the Internet</strong>.</li> <li>Remote-access VPNs typically use TLS (Transport Layer Security).
<ul><li>TLS is also what provides security for HTTPS, HTTP secure.</li> <li>TLS was formerly known as <strong>SSL (Secure Sockets Layer)</strong> and developed by Netscape, but it was renamed to TLS when it was standardized by the IETF.</li></ul></li> <li>VPN client software (for example <strong>Cisco AnyConnect</strong>) is installed on end devices (for example company- provided laptops that employees use to work from home).</li> <li>These end devices then form secure tunnels to one of the company’s <em>routers/firewalls acting as a TLS server</em>.</li> <li>This allows the end users to securely access resources on the company’s internal network without being directly connected to the company network.</li> <li>Note that, just like IPsec, TLS involves encrypting packets and adding additional headers.</li></ul> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202305150409517.png" alt="image-20230515040923219" style="zoom:33%;"></blockquote> <h3 id="site-to-site-vs-remote-access-vpn"><a href="#site-to-site-vs-remote-access-vpn" class="header-anchor">#</a> Site-to-Site vs Remote Access VPN</h3> <blockquote><h6 id="site-to-site-vpns"><a href="#site-to-site-vpns" class="header-anchor">#</a> Site-to-Site VPNs</h6> <ul><li>typically use IPsec.</li> <li>provide service to many devices within the sites they are connecting.</li> <li>are typically used to permanently connect two sites over the Internet.</li></ul> <h6 id="remote-access-vpns-2"><a href="#remote-access-vpns-2" class="header-anchor">#</a> Remote-Access VPNs</h6> <ul><li>typically use TLS.</li> <li>provide service to the one end device the VPN client software is installed on.</li> <li>are typically used to provide <strong>on-demand access</strong> for end devices that want to securely access company resources while connected to a network which is not secure.</li></ul></blockquote> <h3 id="lab-gre-tunnels"><a href="#lab-gre-tunnels" class="header-anchor">#</a> Lab - GRE Tunnels</h3> <p>In this lab we will configure a GRE tunnel between R1 and R2. Both routers are connected to a service provider network, but the GRE tunnel will create a virtual direct connection between them. Now, all traffic between R1 and R2 will still have to physically pass through the service provider network. However all packets will be encapsulated in additional headers to create a virtual tunnel that the original packets pass through.</p> <blockquote><p>Now, as I mentioned in the lecture video GRE doesn’t encrypt packets, so it’s not secure on its own. However the purpose of this video is just to demonstrate how tunnels work, so I picked GRE because it’s quite simple to configure.</p></blockquote> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202305150419734.png" alt="image-20230515041944601" style="zoom:93%;"> <h6 id="configure-on-r1"><a href="#configure-on-r1" class="header-anchor">#</a> Configure on R1</h6> <ul><li>To configure a GRE tunnel, we have to make a tunnel interface.</li></ul> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>R1<span class="token comment">#conf t</span>
Enter configuration commands, one per line.  End with CNTL/Z.
R1<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#interface ?</span>
  Dialer            Dialer interface
  Dot11Radio        Dot11 interface
  Ethernet          IEEE <span class="token number">802.3</span>
  FastEthernet      FastEthernet IEEE <span class="token number">802.3</span>
  GigabitEthernet   GigabitEthernet IEEE <span class="token number">802</span>.3z
  Loopback          Loopback interface
  Port-channel      Ethernet Channel of interfaces
  Serial            Serial
  Tunnel            Tunnel interface
  Virtual-Template  Virtual Template interface
  Vlan              Catalyst Vlans
  range             interface range <span class="token builtin class-name">command</span>
R1<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#interface tunnel ?</span>
  <span class="token operator">&lt;</span><span class="token number">0</span>-214748364<span class="token operator"><span class="token file-descriptor important">7</span>&gt;</span>  Tunnel interface number
R1<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#interface tunnel 0</span>
R1<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#</span>
%LINK-5-CHANGED: Interface Tunnel0, changed state to up

R1<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#tunnel source ?</span>
  Ethernet         IEEE <span class="token number">802.3</span>
  FastEthernet     FastEthernet IEEE <span class="token number">802.3</span>
  GigabitEthernet  GigabitEthernet IEEE <span class="token number">802</span>.3z
  Loopback         Loopback interface
  Serial           Serial
R1<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#tunnel source g0/0/0</span>
R1<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#tunnel destination ?</span>
  A.B.C.D  <span class="token function">ip</span> address
R1<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#tunnel destination 200.0.0.2</span>
R1<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 192.168.1.1 255.255.255.252</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><div class="language-sh line-numbers-mode"><pre class="language-sh"><code>R2<span class="token comment">#conf t</span>
Enter configuration commands, one per line.  End with CNTL/Z.
R2<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#interface tunnel 0</span>
R2<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#</span>
%LINK-5-CHANGED: Interface Tunnel0, changed state to up

R2<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#tunnel source g0/0/0</span>
R2<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#tunnel destination 100.0.0.2</span>
R2<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 192.168.1.2 255.255.255.252</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h6 id="configure-static-routes-on-r1-r2"><a href="#configure-static-routes-on-r1-r2" class="header-anchor">#</a> Configure static routes on R1 &amp; R2</h6> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>R1<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#ip route 0.0.0.0 0.0.0.0 100.0.0.1</span>
R1<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#</span>
%LINEPROTO-5-UPDOWN: Line protocol on Interface Tunnel0, changed state to up

R2<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#ip route 0.0.0.0 0.0.0.0 200.0.0.1</span>
R2<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#</span>
%LINEPROTO-5-UPDOWN: Line protocol on Interface Tunnel0, changed state to up


R2<span class="token comment">#ping 192.168.1.1</span>

Type escape sequence to abort.
Sending <span class="token number">5</span>, <span class="token number">100</span>-byte ICMP Echos to <span class="token number">192.168</span>.1.1, <span class="token function">timeout</span> is <span class="token number">2</span> seconds:
.<span class="token operator">!</span><span class="token operator">!</span><span class="token operator">!</span><span class="token operator">!</span>
Success rate is <span class="token number">80</span> percent <span class="token punctuation">(</span><span class="token number">4</span>/5<span class="token punctuation">)</span>, round-trip min/avg/max <span class="token operator">=</span> <span class="token number">0</span>/0/0 ms
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202305150435222.png" alt="image-20230515043545055" style="zoom:87%;"> <p>However, R1 doesn't know the routing table of R2, so PC1 can't communicates with PC2.</p> <img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202305150451719.png" alt="image-20230515045116553" style="zoom:53%;"> <h6 id="configure-ospf-on-r1-r2"><a href="#configure-ospf-on-r1-r2" class="header-anchor">#</a> Configure OSPF on R1 &amp; R2</h6> <p>When R1 and R2 become OSPF neighbors they will learn each other’s routes, and PC1 and PC2 will be able to communicate over the GRE tunnel.</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>R1<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#router ospf 1</span>
R1<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#network 192.168.1.1 0.0.0.0 area 0</span>
R1<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#network 10.0.1.1 0.0.0.0 area 0</span>
R1<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#passive-interface g0/0</span>

R2<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#router ospf 1</span>
R2<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#network 192.168.1.2 0.0.0.0 area 0</span>
<span class="token number">16</span>:14:56: %OSPF-5-ADJCHG: Process <span class="token number">1</span>, Nbr <span class="token number">192.168</span>.1.1 on Tunnel0 from LOADING to FULL, Load
R2<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#network 10.0.2.1 0.0.0.0 area 0</span>
R2<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#pa</span>
R2<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#passive-interface g0/0</span>

R2<span class="token comment">#show ip route</span>
Codes: L - local, C - connected, S - static, R - RIP, M - mobile, B - BGP
       D - EIGRP, EX - EIGRP external, O - OSPF, IA - OSPF inter area
       N1 - OSPF NSSA external <span class="token builtin class-name">type</span> <span class="token number">1</span>, N2 - OSPF NSSA external <span class="token builtin class-name">type</span> <span class="token number">2</span>
       E1 - OSPF external <span class="token builtin class-name">type</span> <span class="token number">1</span>, E2 - OSPF external <span class="token builtin class-name">type</span> <span class="token number">2</span>, E - EGP
       i - IS-IS, L1 - IS-IS level-1, L2 - IS-IS level-2, ia - IS-IS inter area
       * - candidate default, U - per-user static route, o - ODR
       P - periodic downloaded static route

Gateway of last resort is <span class="token number">200.0</span>.0.1 to network <span class="token number">0.0</span>.0.0

     <span class="token number">10.0</span>.0.0/8 is variably subnetted, <span class="token number">3</span> subnets, <span class="token number">2</span> masks
O       <span class="token number">10.0</span>.1.0/24 <span class="token punctuation">[</span><span class="token number">110</span>/1001<span class="token punctuation">]</span> via <span class="token number">192.168</span>.1.1, 00:01:29, Tunnel0
C       <span class="token number">10.0</span>.2.0/24 is directly connected, GigabitEthernet0/0
L       <span class="token number">10.0</span>.2.1/32 is directly connected, GigabitEthernet0/0
     <span class="token number">192.168</span>.1.0/24 is variably subnetted, <span class="token number">2</span> subnets, <span class="token number">2</span> masks
C       <span class="token number">192.168</span>.1.0/30 is directly connected, Tunnel0
L       <span class="token number">192.168</span>.1.2/32 is directly connected, Tunnel0
     <span class="token number">200.0</span>.0.0/24 is variably subnetted, <span class="token number">2</span> subnets, <span class="token number">2</span> masks
C       <span class="token number">200.0</span>.0.0/30 is directly connected, GigabitEthernet0/0/0
L       <span class="token number">200.0</span>.0.2/32 is directly connected, GigabitEthernet0/0/0
S*   <span class="token number">0.0</span>.0.0/0 <span class="token punctuation">[</span><span class="token number">1</span>/0<span class="token punctuation">]</span> via <span class="token number">200.0</span>.0.1
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><p><img src="https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202305150450969.png" alt="image-20230515045021832"></p> <hr> <h1 id="old-version"><a href="#old-version" class="header-anchor">#</a> (Old Version)</h1> <p>视频链接: https://www.bilibili.com/video/BV1qb411k783?p=2&amp;share_source=copy_web</p> <h2 id="wan-基础"><a href="#wan-基础" class="header-anchor">#</a> WAN 基础</h2> <h3 id="wan-terms"><a href="#wan-terms" class="header-anchor">#</a> WAN terms</h3> <blockquote><img src="https://cdn.jsdelivr.net/gh/Wolfxin/MyPicGo/img/202207121134418.png" alt="image-20220712113428307" style="zoom:77%;"> <ul><li><strong>用户室内设备(Customer Premises Equipment, CPE)</strong>: 这种设备通常归用户所有(但并非总是如此)，位于用户室内。</li> <li><strong>分界点(Demarcation point)</strong> 分界点明确地指出了服务提供商职责的终点和用户职责的起点。它通常是电信重内的一台设备，归电信公司所有并由其安装。从该设备到CPE 的电缆连接通常由用户负责管理，一般是到CSU/DSU 或ISDN接口的连接。</li> <li>本地环路: 本地环路将分界点连接到最近的交换局(中心局)。</li> <li><strong>中心局(CO)</strong>: 将客户的网络连接到提供商的交换网络。需要知道的是，中心局有时也被称为出现点( Point of Presence , POP)。</li> <li><strong>长途通信网(toll network)</strong> 这是WAN提供商网络中的中继线，包含大量归ISP所有的交换机和设备。</li></ul></blockquote> <h3 id="wan-connection-bandwidth"><a href="#wan-connection-bandwidth" class="header-anchor">#</a> WAN Connection Bandwidth</h3> <blockquote><ul><li><strong>Digital Signal 0 (DS0)</strong>: This is the basic digital signaling rate of <strong>64Kbps</strong>, equivalent to one channel. Europe uses the E0 and Japan uses the J0 to reference the same channel speed. Typically used in a T-carrier transmission, this is the generic term used by several multiplexed digital carrier systems. This is the smallest capacity digital circuit. 1 DS0 = 1 voice/data line.</li> <li><strong>T1</strong> Also referred to as a <strong>DS1</strong>, this contains 24 DS0 circuits bundled together with a total bandwidth of <strong>1.544 Mbps</strong>.</li> <li><strong>E1</strong> European equivalent of the T1. Contains 30 DS0 circuits bundled together with a bandwidth of <em>2.048Mbps</em>.</li> <li><strong>T3</strong> Referred to as a DS3, this has 28 DS1s bundled together, or 672 DS0s, with a bandwidth of <em>44.736 Mbps</em>.</li> <li><strong>OC-3</strong> Optical Carrier (OC) 3, uses fiber, is made up of three DS3s bundled together, and contains 2,016 DS0s with a total bandwidth of <em>155.52 Mbps</em>.</li> <li><strong>OC-12</strong> Optical Carrier 12 is make up of four OC-3s bundled together and contains 8,064 DS0s with a total bandwidth of <em>622.08 Mbps</em>.</li> <li><strong>OC-48</strong> Optical Carrier 48 is made up of four OC12s bundled together and contains 32,256 DS0s with a total bandwidth of <em>2488.32 Mbps</em>.</li></ul></blockquote> <h3 id="wan-connection-types"><a href="#wan-connection-types" class="header-anchor">#</a> WAN Connection Types</h3> <blockquote><img src="https://cdn.jsdelivr.net/gh/Wolfxin/MyPicGo/img/202207121143908.png" alt="image-20220712114313750" style="zoom:67%;"> <img src="https://cdn.jsdelivr.net/gh/Wolfxin/MyPicGo/img/image-20220627203026563.png" alt="image-20220627203026563" style="zoom:50%;"> <ul><li><p>==Leased lines (dedicated)==: usually referred to as a <strong>point-to-point</strong> or <strong>dedicated connection</strong>. 专用线是预先建立好的WAN通信路径，它始于CPE ，穿越DCE交换机，终止于远程场点的CPE; CPE让DTE网络能够随时通信，无需在传输数据前经历麻烦的建立过程。如果资金充足，这是不错的选择，因为它使用同步串行线路，速度可高达45Mbps的。在专用线上，经常使用<strong>HDLC和PPP</strong>封装，后面将详细介绍这些封装。</p> <img src="https://cdn.jsdelivr.net/gh/Wolfxin/MyPicGo/img/image-20220627202437654.png" alt="image-20220627202437654" style="zoom:60%;"></li> <li><p>==Circuit switching==: When you hear the term circuit switching, think phone call. The big advantage is cost— <em>most POTS and ISDN dial-up connections are flat rate.</em> No data can transfer before an end-to-end connection is established. Circuit switching uses <strong>dial-up modems</strong> or <strong>ISDN</strong> and is used for low-bandwidth data transfers.</p> <p>Okay—I know what you’re thinking: “Modems? Did he say modems? Aren’t those only in museums by now?” After all, with all the wireless technologies available, who would use a modem these days? Well, some people do have ISDN and it is still viable (and I do suppose someone does use a modem now and then), but circuit switching can be used in some of the newer WAN technologies as well.</p> <img src="https://cdn.jsdelivr.net/gh/Wolfxin/MyPicGo/img/image-20220627202758448.png" alt="image-20220627202758448" style="zoom:50%;"></li> <li><p>==Packet switching==: This is a WAN switching method that allows you to share bandwidth with other companies to save money. Packet switching can be thought of as a network that’s designed to look like a leased line yet charges you more like circuit switching. But less cost isn’t always better—there’s definitely a downside: If you need to transfer data constantly, just forget about this option. Instead, get yourself a leased line. Packet switching will only really work for you if your data transfers are the bursty type — not continuous. <strong>Frame Relay and X.25</strong> are packet switching technologies with speeds that can range from <strong>56Kbps up to T3(45Mbps)</strong>.</p> <img src="https://cdn.jsdelivr.net/gh/Wolfxin/MyPicGo/img/image-20220627202720631.png" alt="image-20220627202720631" style="zoom:50%;"> <blockquote><p><strong>MultiProtocol Label Switching (MPLS)</strong> uses a combination of both <strong>circuit switching</strong> and <strong>packet switching</strong>, but it’s not within the scope of this book’s topics. Even so, after you pass your CCNA exam, it would be well worth your time to look into MPLS, so I’ll talk about MPLS briefly in a minute.</p></blockquote></li></ul></blockquote> <h3 id="wan-support"><a href="#wan-support" class="header-anchor">#</a> WAN Support</h3> <blockquote><p>Basically, Cisco just <strong>supports HDLC, PPP, and Frame Relay on its serial interfaces</strong>, and you can see this with the <code>encapsulation ?</code> command from any serial interface (your output may vary depending on the IOS version you are running):</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>Corp<span class="token comment">#config t</span>
Corp<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#int s0/0/0</span>
Corp<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#encapsulation ?</span>
   atm-dxi ATM-DXI encapsulation
   frame-relay Frame Relay networks
   hdlc Serial HDLC synchronous
   lapb LAPB <span class="token punctuation">(</span>X.25 Level <span class="token number">2</span><span class="token punctuation">)</span>
   ppp Point-to-Point protocol
   smds Switched Megabit Data Service <span class="token punctuation">(</span>SMDS<span class="token punctuation">)</span>
   x25 X.25
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><blockquote><p>Understand that if I had other types of interfaces on my router, I would have other encapsulation options, and remember you <strong>can’t configure an Ethernet encapsulation on a serial interface</strong>. 串行连接用得越来越少了，因为相对于到ISP的快速以太
网连接，其可扩展性不佳，且成本效率不高。</p></blockquote></blockquote> <h2 id="prominently-known-wan-protocols"><a href="#prominently-known-wan-protocols" class="header-anchor">#</a> prominently known WAN protocols</h2> <blockquote><p>Next, I’m going to define the most prominently known WAN protocols used today: Frame Relay, ISDN, LAPB, LAPD, HDLC, PPP, PPPoE, Cable, DSL, MPLS, and ATM.</p></blockquote> <h3 id="frame-relay"><a href="#frame-relay" class="header-anchor">#</a> Frame Relay</h3> <blockquote><ul><li>A <strong>packet-switched technology</strong> that <em>made its debut in the early 1990s</em>,</li> <li>Frame Relay is a <em>high-performance Data Link and Physical layer specification</em>. It’s pretty much a successor to X.25, except that much of the technology in X.25 used to compensate for physical errors (noisy lines) has been eliminated.</li> <li>An upside to Frame Relay is that it can be <strong>more cost effective</strong> than <em>point-to-point links</em>, plus it typically runs at speeds of 64Kbps up to 45Mbps (T3).</li> <li>Another Frame Relay benefit is that it provides <strong>features for dynamic bandwidth allocation</strong> and <strong>congestion control</strong>.</li></ul></blockquote> <h4 id="简介"><a href="#简介" class="header-anchor">#</a> 简介</h4> <blockquote><ul><li>默认情况下，帧中继是一种非广播多路访问(NBMA)网络，这意味着它不会通过网络发送任何广播，如RIP更新。</li> <li>帧中继是从X.25演变而来的，它几乎继承了X.25中与当今可靠和相对&quot;干净&quot;的通信网络相关的所有功能，但删除了不再需要的纠错功能。与前面讨论HDLC和PPP协议时介绍的简单专用线网络相比，它要复杂得多。专用线网络易于理解，但帧中继却没有那么容易。帧中继复杂多变得多，这就是在网络示意图中经常用&quot;云&quot;表示它的原因所在。稍后还会介绍这个，现在先从概念上简要地介绍帧中继，并指出它与简单的专用线技术有何不同。</li></ul></blockquote> <blockquote><p>首先需要指出的是，帧中继是一种分组交换技术。根据已学到的知识，这意味着:</p> <ul><li>不能使用命令encapsulation hdlc 或encapsulation ppp 来配置它;</li> <li>帧中继的工作原理不同于点到点线路(虽然可使其看起来像点到点线路);</li> <li>帧中继通常比专用线更便宜，但需要为此付出一些代价。</li></ul> <img src="https://cdn.jsdelivr.net/gh/Wolfxin/MyPicGo/img/202207121618345.png" alt="image-20220712161833193" style="zoom:80%;"> <blockquote><p>例如，如果要从公司总部连接7个新增的远程场点，但路由器只有一个空闲的串行端口，则可使用帧中继来救场!当然，应该指出的是，这也会导致单点故障，不太好。但帧中继是用来节省费用的，而不是用来提高网络弹性的。</p></blockquote></blockquote> <h5 id="committed-information-rate-cir"><a href="#committed-information-rate-cir" class="header-anchor">#</a> Committed Information Rate (CIR)</h5> <blockquote><ul><li><p>帧中继将一个分组交换网络同时提供给众多客户使用; 帧中继为每位用户供应专用宽带的一部分，还在电信网络有空闲资源时允许用户超过分配给他的保证带宽。因此，一般说来，帧中继提供商允许客户购买的带宽低于其实际使用的带宽。</p></li> <li><p>帧中继有两种带宽方面的规格:</p> <ul><li><strong>Access rate</strong>   The maximum speed at which the Frame Relay interface can transmit.</li> <li><strong>CIR</strong> The maximum bandwidth of data guaranteed to be delivered. In reality, it’s the average amount that the service provider will allow you to transmit.</li></ul> <blockquote><p>在两个值相等时，帧中继连接几乎与专用线相同。但可将它们设置为不同的值，下面是一个例子:
假设你购买的接入速率和CIR 分别是T1 ( 1.544 Mbit/s )和256 Kbit/s。这将保证数据流传输速度不低于256 Kbit/s。超过的部分称为&quot;突发量&quot;，它是超过保证速率256 Kbit/s 的部分，最高可达T1(如果
合同是这样规定的); If your combined committed burst (the basis for your CIR) and excess burst sizes, known as the <strong>MBR</strong> or maximum burst rate when combined, exceed the <strong>access rate</strong>, you can pretty much say goodbye to your additional traffic. It will most likely be dropped, although this really depends on the subscription level of a particular service provider.</p></blockquote></li></ul></blockquote> <h5 id="frame-relay-encapsulation-types"><a href="#frame-relay-encapsulation-types" class="header-anchor">#</a> Frame Relay Encapsulation Types</h5> <blockquote><p>前面说过， HDLC和PPP不能用于帧中继。配置帧中继时，需要指定一种帧中继封装，如下面的输出所示。不同于HDLC和PPP，帧中继有两种封装类型: <strong>Cisco</strong> 和<strong>IETF</strong>(因特网工程任务小组):</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>RouterA<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#int s0</span>
RouterA<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#encapsulation frame-relay ?</span>
   ietf Use RFC1490 encapsulation
   <span class="token operator">&lt;</span>cr<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><blockquote><p>除非于工指定ietf，否则默认封装为Cisco，这也是连接思科设备时使用的封装类型。如果需要使用帧中继连接思科设备和非思科设备，应选择使用封装类型IETF。</p></blockquote></blockquote> <h5 id="virtual-circuits"><a href="#virtual-circuits" class="header-anchor">#</a> Virtual Circuits</h5> <blockquote><p>帧中继使用虚电路，而不像专用线那样使用实际电路。这些虚电路将与提供商&quot;云&quot;相连的数以千计的设备连接在一起。在任何两台DTE 设备之间，帧中继都会提供一条虚电路，让它们之间看起来像是有一条实际电路，但实际上，它们的帧被发送到一个共享的大型基础设施。在云内部发生的情况非常复杂，但这种复杂性不会呈现在你面前，因为使用虚电路。</p> <p>there are two types of virtual circuits:</p> <ul><li>Permanent virtual circuits (PVCs): 这里的&quot;永久&quot;意味着电信公司在其设备中创建映射，只要支付费用，它们就一直存在。</li> <li>switched virtual circuits</li></ul></blockquote> <h5 id="data-link-connection-identifiers-dlcis"><a href="#data-link-connection-identifiers-dlcis" class="header-anchor">#</a> Data Link Connection Identifiers (DLCIs)</h5> <blockquote><p>DLCI 标识本地路由器和帧中继交换机之间的逻辑电路;</p> <p><strong>Frame Relay PVCs</strong> are identified to DTE end devices by <strong>Data Link Connection Identifiers (DLCIs)</strong>. A Frame Relay service provider typically assigns DLCI values, which are used on Frame Relay interfaces to distinguish between different virtual circuits. Because many virtual circuits can be terminated on one multipoint Frame Relay interface, many DLCIs are often affiliated with it.</p></blockquote> <blockquote><p>Let me explain—suppose you have a <em>central HQ with three branch offices</em>. If you were to <em>connect each branch office to HQ using a T1</em>, you would need <strong>three serial interfaces on your router at HQ</strong>, one for each T1. Simple, right?</p> <ul><li>Well, suppose you use Frame Relay PVCs instead. You could <em>have a T1 at each branch connected to a service provider and only a single T1 at HQ</em>.</li> <li>There would be three PVCs on the single T1 at HQ, one going to each branch. And even though there’s only a single interface and a single CSU/DSU, the three PVCs function as three separate circuits.</li> <li>Remember what I said about saving money? How much for two additional T1 interfaces and a pair of CSU/DSUs?  Answer: A lot!</li></ul></blockquote> <blockquote><h6 id="iarp-用于将dlci映射到ip地址"><a href="#iarp-用于将dlci映射到ip地址" class="header-anchor">#</a> IARP: 用于将DLCI映射到IP地址</h6> <p>Okay, before we go on, I want to define <strong>Inverse ARP (IARP)</strong> and discuss how it’s used with DLCIs in a Frame Relay network.</p> <ul><li><p>Yes, it is somewhat similar to ARP in the fact that **it maps a DLCI to an IP address **— kind of like ARP does with MAC addresses to IP addresses. And even though you can’t configure IARP, you can disable it. It runs on a Frame Relay router and maps the DLCI to an IP address for Frame Relay so it knows how to get to the IP address at the other end of the PVC.</p></li> <li><p>You can see IP-to-DLCI mappings with the <code>show frame-relay map</code> command.</p></li> <li><p>But if you have a non-Cisco router living in your network and it doesn’t support IARP, then you’re stuck with having to <strong>statically</strong> provide IP-to-DLCI mappings with the <code>frame-relay map</code> command—something I’ll demonstrate in a bit.</p></li></ul></blockquote> <blockquote><p>​	DLCI 只在本地有意义; 要让DLCI有全局意义，整个网络都必须使用本地管理接口(LMI) 扩展。这就是通常只有私有网络使用全局DLCI的原因所在。用于标识PVC的DLCI号通常是由提供商分配的，其最小值为16.</p> <img src="https://cdn.jsdelivr.net/gh/Wolfxin/MyPicGo/img/202207121709060.png" alt="image-20220712170859898" style="zoom:80%;"> <p>然而， DLCI并非必须要有全局意义才能在通过网络传输帧的过程中发挥作用。下面来解释这一点:</p> <ul><li>RouterA 要将帧发送给RouterB 时， RouterA 查看IARP映射或手工配置的映射，以获悉要前往的IP地址对应的DLCI。</li> <li>获悉DLCI后，它将FR报头的DLCI字段设置为该值，并将帧发送出去。</li> <li>提供商的入口交换机收到这个帧后，查看DLCI-物理接口关联表，以获悉一个新的&quot;只有本地意义&quot;(从当前交换机到下一跳交换机)的DLCI，以便将其用于报头:它还获悉了出站物理端口。</li> <li>这个过程不断重复，直到到达RouterB。因此，基本上可以说， RouterA 使用的DLCI标识了前往RouterB的整条虚电路一一虽然每对设备之间的DLCI可能完全不同。这里的要点是， RouterA 并不知道这类差别，因此DLCI 只有本地意义。需要指出的是， DLCI 实际上被电信公司用于&quot;寻找&quot;PVC的另一端。</li></ul></blockquote> <h5 id="local-management-interface-lmi"><a href="#local-management-interface-lmi" class="header-anchor">#</a> Local Management Interface (LMI)</h5> <blockquote><p><strong>Local Management Interface (LMI)</strong> is a signaling standard used between <strong>your router</strong> and <strong>the first Frame Relay switch</strong> it’s connected to. It <em>allows for passing information about the operation and status of the virtual circuit between the provider’s network and the DTE (your router)</em>. It communicates information about the following</p> <ul><li><strong>Keepalives</strong> These verify that data is flowing.</li> <li><strong>Multicasting</strong> This is an optional extension of the LMI specification that allows, for example, the efficient distribution of <em>routing information</em> and <em>ARP requests</em> over a Frame Relay network. Multicasting uses the reserved DLCIs from 1019 through 1022.</li> <li><strong>Global addressing</strong> This provides global significance to DLCIs, allowing the Frame Relay cloud to work exactly like a LAN. This has never been run in a production network to this day.</li> <li><strong>Status of virtual circuits</strong> This provides DLCI status. The status inquiries and messages are used as keepalives when there is no regular LMI traffic to send.</li></ul></blockquote> <blockquote><p>LMI 消息格式有3 种: Cisco 、ANSI 和Q.933A. 从IOS 11.2 版起， LMI类型是自动检测的。这让接口能够确定交换机支持的LMI类型。</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>RouterA<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#frame-relay lmi-type ?</span>
   CISCO
   ansi
   q933a
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></blockquote> <blockquote><p>路由器通过使用帧中继封装的接口，从服务提供商的帧中继交换机那里收到LMI信息后，将虚电路的状态(PVC STATUS)更新为下述3 种状态之一:</p> <ul><li><strong>Active state</strong> <em>Everything is up</em>, and routers can exchange information.</li> <li><strong>Inactive state</strong> The router’s interface is up and working with a connection to the switching office, but <em>the remote router isn’t up</em>.</li> <li><strong>Deleted state</strong> <em>No LMI information is being received</em> on the interface from the switch, which could be due to a mapping problem or a line failure.</li></ul></blockquote> <h5 id="frame-relay-congestion-control"><a href="#frame-relay-congestion-control" class="header-anchor">#</a> Frame Relay Congestion Control</h5> <blockquote><p>how the Frame Relay switch notifies the DTE of congestion problems, Here are the three congestion bits and their meanings:</p> <ul><li>==Discard Eligibility (DE)==: 传输分组超过PVC的CIR时，如果提供商的网络正处于拥塞状态，超出CIR 的分组都可丢弃。因此，对于超额分组，将在帧中继报头中使用可丢弃(DE)位进行标识。如果提供商的网络发生拥塞，帧中继交换机将丢弃设置DE位(0)的分组。</li> <li>==Forward Explicit Congestion Notification (FECN)==: When the Frame Relay network recognizes <strong>congestion in the cloud</strong>, the switch will <strong>set the FECN bit to 1 in a Frame Relay packet header</strong>. <em>This will indicate to the destination DTE that the path the frame just traversed is congested.</em></li> <li>==Backward Explicit Congestion Notification (BECN)==: When the switch detects <strong>congestion in the Frame Relay network</strong>, <em>it’ll set the BECN bit in a Frame Relay frame that’s destined for the source router</em>. <strong>This notifies the source router that congestion is ahead</strong>. But Cisco routers won’t take action on this congestion information unless you tell them to.</li></ul></blockquote> <blockquote><p>假设所有用户都抱怨到公司总部的帧中继连接的速度超级慢。你极其怀疑该链路的负载过重，因此使用命令<code>show frame-relay pvc</code>显示帧中继拥塞控制信息:</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>RouterA<span class="token comment">#sh frame-relay pvc</span>
   PVC Statistics <span class="token keyword">for</span> interface Serial0/0 <span class="token punctuation">(</span>Frame Relay DTE<span class="token punctuation">)</span>
       Active Inactive Deleted Static
       Local <span class="token number">1</span> <span class="token number">0</span> <span class="token number">0</span> <span class="token number">0</span>
       Switched <span class="token number">0</span> <span class="token number">0</span> <span class="token number">0</span> <span class="token number">0</span>
       Unused <span class="token number">0</span> <span class="token number">0</span> <span class="token number">0</span> <span class="token number">0</span>
   DLCI <span class="token operator">=</span> <span class="token number">100</span>, DLCI USAGE <span class="token operator">=</span> LOCAL, PVC STATUS <span class="token operator">=</span> ACTIVE, INTERFACE <span class="token operator">=</span> Serial0/0
       input pkts <span class="token number">1300</span> output pkts <span class="token number">1270</span> <span class="token keyword">in</span> bytes <span class="token number">21212000</span>
       out bytes <span class="token number">21802000</span> dropped pkts <span class="token number">4</span> <span class="token keyword">in</span> pkts dropped <span class="token number">147</span>
       out pkts dropped <span class="token number">0</span>   out bytes dropped <span class="token number">0</span>     <span class="token keyword">in</span> FECN pkts <span class="token number">147</span>
       <span class="token keyword">in</span> BECN pkts <span class="token number">192</span>    out FECN pkts <span class="token number">147</span>
       out BECN pkts <span class="token number">259</span> <span class="token keyword">in</span> DE pkts <span class="token number">0</span> out DE pkts <span class="token number">214</span>
       out bcast pkts <span class="token number">0</span> out bcast bytes <span class="token number">0</span>
       pvc create <span class="token function">time</span> 00:00:06, last <span class="token function">time</span> pvc status changed 00:00:06
   Pod1R1<span class="token comment">#</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><blockquote><p>What you want to look for in this output is the <strong>in BECN pkts 192</strong> output because this is what’s telling the local router that traffic sent to the corporate site is experiencing congestion. BECN means that the path that a frame took to “return” to you is congested.</p></blockquote></blockquote> <h4 id="帧中继的实现"><a href="#帧中继的实现" class="header-anchor">#</a> 帧中继的实现</h4> <h5 id="单接口"><a href="#单接口" class="header-anchor">#</a> 单接口</h5> <blockquote><p>首先介绍一种最简单的配置情形两台路由器通过一条PVC相连。</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>RouterA<span class="token comment">#config t</span>
Enter configuration commands, one per line. End with CNTL/Z.
RouterA<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#int s0/0</span>
RouterA<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#encapsulation frame-relay</span>

RouterA<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 172.16.20.1 255.255.255.0</span>

RouterA<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#frame-relay lmi-type ansi</span>

RouterA<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#frame-relay interface-dlci 101</span>
RouterA<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#^Z</span>
RouterA<span class="token comment">#</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><ul><li>第一步是将封装指定为帧中继。由于没有指定封装类型(Cisco 或IETF)，因此将使用默认封装类型Cisco。如果另一台路由器不是思科路由器，则必须将封装类型指定为IETF。</li> <li>接下来，给接口分配了一个IP地址，并根据电信提供商的要求将LMI类型指定为ANSI(默认为Cisco)。</li> <li>最后，添加了DLCI101 (同样，这也是由ISP 提供的)，它表示我们要使用的PVC。这里假定该物理接口上只有一条PVC。</li></ul> <p>就这么简单!如果两端都配置正确，虚电路就建立起来了。</p></blockquote> <h5 id="子接口"><a href="#子接口" class="header-anchor">#</a> 子接口</h5> <blockquote><ul><li><p>可在同一个串行接口配置多条虚电路，并将每条虚电路都视为独立的, 为此，可创建子接口。可将子接口视为IOS 软件定义的逻辑接口。多个子接口将共享一个硬件接口，但它们就像是独立的物理接口一样，这被称为<strong>多路复用</strong>。</p></li> <li><p>要让帧中继网络中的路由器免受水平分割问题的困扰(即不允许某些路由选择更新通过)，<strong>只需为每条PVC配置一个子接口，并给子接口配置一个唯一的DLCI和IP地址</strong>:</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>RouterA<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#int s0</span>
RouterA<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#encapsulation frame-relay</span>
RouterA<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#int s0.?</span>
	<span class="token operator">&lt;</span><span class="token number">0</span>-429496729<span class="token operator"><span class="token file-descriptor important">5</span>&gt;</span> Serial interface number
RouterA<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#int s0.16 ?</span>
    multipoint Treat as a multipoint <span class="token function">link</span>
    point-to-point Treat as a point-to-point <span class="token function">link</span>
RouterA<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#int s0.16 point-to-point</span>
RouterA<span class="token punctuation">(</span>config-subif<span class="token punctuation">)</span><span class="token comment">#</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><blockquote><ul><li>如果要配置子接口，千万不要给物理接口配置IP地址。</li> <li>子接口分以下两种:
<ul><li><strong>点到点子接口</strong>  使用单条虚电路将两台路由器连接起来时使用这种子接口。每个点到点子接口都位于不同的子网中。<em>点到点子接口还解决了水平分割问题。</em></li> <li><strong>多点子接口</strong>  当虚电路组成星形，且连接到帧中继网络云的所有路由器串行接口都位于一个子网内时，在中央路由器上使用这种模式，而分支路由器使用物理接口(总是点到点的)或点到点子接口模式。</li></ul></li></ul></blockquote> <p>下面介绍使用多个子接口的生产路由器的一种配置，如下面的输出所示。注意到子接口号与DLCI号相同，这并非必须的，但对管理接口大有帮助:</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>interface Serial0
no <span class="token function">ip</span> address <span class="token punctuation">(</span>notice there is no IP address on the physical interface<span class="token operator">!</span><span class="token punctuation">)</span>
no <span class="token function">ip</span> directed-broadcast
encapsulation frame-relay
<span class="token operator">!</span>
interface Serial0.102 point-to-point
<span class="token function">ip</span> address <span class="token number">10.1</span>.12.1 <span class="token number">255.255</span>.255.0
no <span class="token function">ip</span> directed-broadcast
frame-relay interface-dlci <span class="token number">102</span>
<span class="token operator">!</span>
interface Serial0.103 point-to-point
<span class="token function">ip</span> address <span class="token number">10.1</span>.13.1 <span class="token number">255.255</span>.255.0
no <span class="token function">ip</span> directed-broadcast
frame-relay interface-dlci <span class="token number">103</span>
<span class="token operator">!</span>
interface Serial0.104 point-to-point
<span class="token function">ip</span> address <span class="token number">10.1</span>.14.1 <span class="token number">255.255</span>.255.0
no <span class="token function">ip</span> directed-broadcast
frame-relay interface-dlci <span class="token number">104</span>
<span class="token operator">!</span>
interface Serial0.105 point-to-point
<span class="token function">ip</span> address <span class="token number">10.1</span>.15.1 <span class="token number">255.255</span>.255.0
no <span class="token function">ip</span> directed-broadcast
frame-relay interface-dlci <span class="token number">105</span>
<span class="token operator">!</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><blockquote><p>注意到这里没有指定L阳类型。这意味着该路由器要么使用默认类型Cisco，要么自动检测LMI类型(如果它运行的是思科IOS 11.2 或更高的版本)。还需指出的是，每个子接口都对应一个DLCI，且位于不同的子网中。</p></blockquote></li></ul></blockquote> <h4 id="帧中继的验证"><a href="#帧中继的验证" class="header-anchor">#</a> 帧中继的验证</h4> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>Router<span class="token comment">#show frame-relay lmi  # 显示本地路由器和帧中继交换机之间交换的LMI 数据流统计信息</span>
Router<span class="token comment">#show frame-relay pvc  # 列出所有配置的PVC 和DLCI 号，它指出了每条PVC的状态和数据流统计信息，还指出了路由器在每条PVC 上收发的BECN 、FECN 和DE 分组的数量。</span>
Router<span class="token comment">#show frame-relay map  # 显示网络层IP地址到DLCI的映射</span>

show interface  <span class="token comment"># 它显示封装以及有关第2层和第3层的信息，还显示线路、协议、DLCI 和LMI信息</span>

Router<span class="token comment">#debug frame-re1ay lmi  # 实现实时输出, 可判断路由器和交换机是否在交换正确的L勤恒信息，从而验证帧中继连接和排除其故障。</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="isdn"><a href="#isdn" class="header-anchor">#</a> ISDN</h3> <blockquote><p><strong>Integrated Services Digital Network(ISDN)</strong> is a set of digital services that <em>transmit voice and data over existing phone lines</em>.</p> <ul><li>ISDN offers a <strong>cost-effective</strong> solution for remote users who need a higher-speed connection than <strong>analog POTS dial-up links</strong> can give them,</li> <li>and it’s also a good choice to use as a <em>backup link for other types of links</em>, such as Frame Relay or T1 connections.</li></ul></blockquote> <h3 id="lapb"><a href="#lapb" class="header-anchor">#</a> LAPB</h3> <blockquote><ul><li><strong>LAPB Link Access Procedure, Balanced (LAPB)</strong> was created to be a <strong>connection-oriented</strong> protocol at the Data Link layer for <strong>use with X.25</strong>, but it can also be used as a simple data link transport.</li> <li>A not-so-good characteristic of LAPB is that it tends to create a tremendous amount of <strong>overhead</strong> due to its strict time-out and windowing techniques.</li></ul></blockquote> <h3 id="lapd"><a href="#lapd" class="header-anchor">#</a> LAPD</h3> <blockquote><p>Link Access Procedure, D-Channel (LAPD) is <strong>used with ISDN</strong> at the Data Link layer (layer 2) as a protocol for the <strong>D (signaling) channel</strong>.</p> <ul><li>LAPD was derived from the Link Access Procedure, Balanced (LAPB) protocol and is designed primarily to satisfy the signaling requirements of ISDN basic access.</li></ul></blockquote> <h3 id="hdlc"><a href="#hdlc" class="header-anchor">#</a> HDLC</h3> <blockquote><p><strong>High-Level Data-Link Control (HDLC, 高级数据链路控制协议)</strong> was derived from Synchronous Data Link Control (SDLC), which was created by IBM as a Data Link connection protocol.</p> <ul><li><p>HDLC works at the Data Link layer and creates <em>very little overhead compared to LAPB</em>.</p></li> <li><p>Generic HDLC wasn’t intended to encapsulate multiple Network layer protocols across the same link — the HDLC header doesn’t contain any identification about the type of protocol being carried inside the HDLC encapsulation. Because of this, <em>each vendor that uses HDLC has its own way of identifying the Network layer protocol, meaning each vendor’s HDLC is proprietary with regard to its specific equipment.</em></p></li> <li><p>是一种面向比特的数据链路层协议。它指定了一种通过串行数据链路传输数据的封装方法，该封装具备帧的特征，并使用校验和。</p> <blockquote><ul><li>在面向字节的协议中，控制信息是根据字节生成的;</li> <li>而面向比特的协议使用比特来表示控制信息。</li></ul> <p>一些常见的面向比特的协议包括SDLC和HDLC，而TCP和IP是面向字节的协议。</p></blockquote></li> <li><p>HDLC是一种用于专用线和ISDN拨号连接的点到点协议，没有提供身份验证功能。</p></li> <li><p>思科路由器对同步串行链路默认使用HDLC封装。而思科的HDLC实现是专用的(cHDLC)，不能与其他厂商的HDLC实现通信。<strong>请不要因此指责思科, 每家厂商的HDLC实现都是专用的。</strong></p> <img src="https://cdn.jsdelivr.net/gh/Wolfxin/MyPicGo/img/202207121439258.png" alt="image-20220712143930078" style="zoom:80%;"></li></ul></blockquote> <blockquote><p>假设你只有一台思科路由器，且需要将其连接到一台非思科路由器，该怎么办呢?不能使用默认的HDLC串行封装，因为不可行。相反，需要使用诸如PPP 等封装，以ISO标准方式标识上层协议。有关PPP标准及其起源的更详细信息，请参阅RFC 1661 。</p> <p>下面更详细地讨论PPP以及如何使用PPP封装将路由器连接起来.</p></blockquote> <h3 id="ppp"><a href="#ppp" class="header-anchor">#</a> PPP</h3> <blockquote><p><strong>Point-to-Point Protocol (PPP)</strong> is a industry-standard protocol.</p> <ul><li><p>Because all multi-protocol versions of HDLC are proprietary,  PPP can be used to create <strong>point-to-point links between different vendors’ equipment</strong>.</p></li> <li><p>It uses a <em>Network Control Protocol field</em> in the <strong>Data Link header</strong> to identify <em>the Network layer protocol being carried</em> and <strong>allows authentication</strong> and <strong>multilink connections</strong> to be run over asynchronous and synchronous links.</p></li> <li><p>它是一种数据链路层协议，可用于异步串行(拨号dial-up)介质和同步串行(ISDN) 介质。</p></li> <li><p>它使用链路控制协议(LCP)来建立和维护数据链路连接。借助网络控制协议(NCP)，可在同一条点到点连接上使用多种网络层协议(被路由的协议)。</p></li> <li><p>思科串行链路默认使用串行封装HDLC，且效果很好。为何要使用PPP呢? PPP用于通过数据链路层点到点链路传输第3层分组，且不是专用的。因此，除非网络中的所有路由器都是思科路由器，否则就需在串行接口上使用PPP.</p></li> <li><p>PPP可封装多种第3层协议分组，并提供身份验证、动态编址、回拨等功能，是替代HDLC的最佳封装解决方案。</p> <img src="https://cdn.jsdelivr.net/gh/Wolfxin/MyPicGo/img/image-20220627203043971.png" alt="image-20220627203043971" style="zoom:43%;"></li></ul></blockquote> <blockquote><img src="https://cdn.jsdelivr.net/gh/Wolfxin/MyPicGo/img/202207121518142.png" alt="image-20220712151832940" style="zoom:67%;"> <p>PPP 包含4个主要组成部分:</p> <ul><li>EIA/TIA-232-C、V.24 、V.35 和ISDN 串行通信的物理层国际标准。</li> <li>HDLC 一种封装数据报以便通过串行链路进行传输的方法。</li> <li>LCP 一种建立、配置、维护和拆除点到点连接的方法。</li> <li>NCP 一种通过PPP链路传输不同网络层协议分组的方法。用于标识和封装网络层协议，允许通过同一条PPP 链路传输多种网络层协议分组。为支持多种网络层协议，开发了针对不同网络层协议的NCP, 包括IPCP(因特网协议控制协议)和IPXCP(网间分组交换控制协议)。</li></ul></blockquote> <h4 id="链路控制协议-lcp-配置选项"><a href="#链路控制协议-lcp-配置选项" class="header-anchor">#</a> 链路控制协议(LCP) 配置选项</h4> <blockquote><p>链路控制协议(LCP) 提供了以下众多PPP封装选项:</p> <ul><li><p><strong>Authentication</strong> This option tells the calling side of the link to send information that can identify the user. The two methods are PAP and CHAP.</p></li> <li><p><strong>Compression</strong> This is used to increase the throughput of PPP connections by compressing the data or payload prior to transmission. PPP decompresses the data frame on the receiving end.</p></li> <li><p><strong>Error detection</strong> PPP uses <strong>Quality</strong> and <strong>Magic Number</strong> options to ensure a <strong>reliable, loop-free</strong> data link.</p></li> <li><p><strong>Multilink</strong> Starting with IOS version 11.1, multilink is supported on PPP links with Cisco routers. This option makes several separate physical paths appear to be one logical path at layer 3. For example, two T1s running multilink PPP would show up as a single 3Mbps path to a layer 3 routing protocol.</p></li> <li><p><strong>PPP callback</strong> PPP can be configured to call back after successful authentication. PPP callback can be a good thing for you because you can keep track of usage based upon access charges for accounting records and a bunch of other reasons. With callback enabled, a calling router (client) will contact a remote router (server) and authenticate as I described earlier. (Know that both routers have to be configured for the callback feature for this to work.) Once authentication is completed, the remote router will terminate the connection and then re-initiate a connection to the calling router from the remote router.</p> <blockquote><p>If you have Microsoft devices in your PPP callback, be aware that Microsoft uses a proprietary callback known as <strong>Microsoft Callback Control Protocol (CBCP)</strong>, which is supported in IOS release 11.3(2)T and later.</p></blockquote></li></ul></blockquote> <h4 id="ppp-session-establishment"><a href="#ppp-session-establishment" class="header-anchor">#</a> PPP Session Establishment</h4> <blockquote><img src="https://cdn.jsdelivr.net/gh/Wolfxin/MyPicGo/img/202207121528228.png" alt="image-20220712152820027" style="zoom:67%;"> <p>When PPP connections are started, the links go through three phases of session establishment:</p> <ol><li>Link-establishment phase: 每台PPP 设备都发送LCP 分组，以配置和测试链路。这些分组包含一个名为配置选项( Configuration Option )的字段，让设备能够协商数据长度、压缩方法和身份验证方法。如果没有配置选项，则使用默认配置。</li> <li>Authentication phase: 必要时，可使用CHAP或PAP来验证身份。身份验证是在读取网络层协议信息前进行的，在此期间还可能确定链路质量。</li> <li>Network layer protocol phase: PPP使用网络控制协议(NCP)，以封装多种网络层协议分组并通过同一条PPP数据链路发送它们。每种网络层协议(如IP、IPX、AppleTalk，它们是被路由的协议) 都建立一个到NCP的服务。</li></ol></blockquote> <h4 id="ppp-authentication-methods"><a href="#ppp-authentication-methods" class="header-anchor">#</a> PPP Authentication Methods</h4> <blockquote><img src="https://cdn.jsdelivr.net/gh/Wolfxin/MyPicGo/img/image-20220627203456207.png" alt="image-20220627203456207" style="zoom:45%;"></blockquote> <hr> <p>There are two methods of authentication that can be used with PPP links:</p> <hr> <h5 id="password-authentication-protocol-pap"><a href="#password-authentication-protocol-pap" class="header-anchor">#</a> Password Authentication Protocol (PAP):</h5> <p>在这两种方法中，PAP的安全性要差些。PAP以明文方式发送密码，且只在建立链路时进行身份验证。建立PPP链路时，远程节点向始发路由器发送用户名和密码，直到身份验证得到确认。这不是特别安全!</p> <blockquote><img src="https://cdn.jsdelivr.net/gh/Wolfxin/MyPicGo/img/image-20220627203513359.png" alt="image-20220627203513359" style="zoom:45%;"></blockquote> <h6 id="pap认证方式"><a href="#pap认证方式" class="header-anchor">#</a> pap认证方式</h6> <p>专线使用了 Serial 接口, 没有 MAC 地址, 直接连接目的端</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>R1<span class="token comment">#show interfaces serial 1/0</span>
Serial1/0 is up, line protocol is up 
  Hardware is M4T
  Internet address will be negotiated using DHCP
  MTU <span class="token number">1500</span> bytes, BW <span class="token number">1544</span> Kbit/sec, DLY <span class="token number">20000</span> usec, 
     reliability <span class="token number">255</span>/255, txload <span class="token number">1</span>/255, rxload <span class="token number">1</span>/255
  Encapsulation HDLC, crc <span class="token number">16</span>, loopback not <span class="token builtin class-name">set</span>        <span class="token comment">#  思科设备上的 HDLC 协议进行了专有化改造</span>
  Keepalive <span class="token builtin class-name">set</span> <span class="token punctuation">(</span><span class="token number">10</span> sec<span class="token punctuation">)</span>
  Restart-Delay is <span class="token number">0</span> secs

R1<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#int s1/0</span>
R1<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#encapsulation ?</span>
  atm-dxi         ATM-DXI encapsulation
  bstun           Block Serial tunneling <span class="token punctuation">(</span>BSTUN<span class="token punctuation">)</span>
  frame-relay     Frame Relay networks
  hdlc            Serial HDLC synchronous
  lapb            LAPB <span class="token punctuation">(</span>X.25 Level <span class="token number">2</span><span class="token punctuation">)</span>
  ppp             Point-to-Point protocol
  sdlc            SDLC
  sdlc-primary    SDLC <span class="token punctuation">(</span>primary<span class="token punctuation">)</span>
  sdlc-secondary  SDLC <span class="token punctuation">(</span>secondary<span class="token punctuation">)</span>
  smds            Switched Megabit Data Service <span class="token punctuation">(</span>SMDS<span class="token punctuation">)</span>
  stun            Serial tunneling <span class="token punctuation">(</span>STUN<span class="token punctuation">)</span>
  x25             X.25

R1<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#encapsulation ppp</span>
R1<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 12.1.1.1 255.255.255.0</span>
R1<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#no shutdown </span>

R1<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#do ping 12.1.1.2</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><h6 id="单向设置authentication"><a href="#单向设置authentication" class="header-anchor">#</a> 单向设置Authentication:</h6> <p>R1端:</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>R1<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#username CCNA password ?</span>
  <span class="token number">0</span>     Specifies an UNENCRYPTED password will follow
  <span class="token number">7</span>     Specifies a HIDDEN password will follow
  LINE  The UNENCRYPTED <span class="token punctuation">(</span>cleartext<span class="token punctuation">)</span> user password
R1<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#username CCNA password SPOTO</span>
R1<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#int s1/0   </span>
R1<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ppp authentication ?</span>
  chap        Challenge Handshake Authentication Protocol <span class="token punctuation">(</span>CHAP<span class="token punctuation">)</span>
  eap         Extensible Authentication Protocol <span class="token punctuation">(</span>EAP<span class="token punctuation">)</span>
  ms-chap     Microsoft Challenge Handshake Authentication Protocol <span class="token punctuation">(</span>MS-CHAP<span class="token punctuation">)</span>
  ms-chap-v2  Microsoft CHAP Version <span class="token number">2</span> <span class="token punctuation">(</span>MS-CHAP-V2<span class="token punctuation">)</span>
  pap         Password Authentication Protocol <span class="token punctuation">(</span>PAP<span class="token punctuation">)</span>

R1<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ppp authentication pap </span>
R1<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#</span>
*Jun <span class="token number">28</span> <span class="token number">17</span>:27:29.989: %LINEPROTO-5-UPDOWN: Line protocol on Interface Serial1/0, changed state to down
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>
R2 端:

```shell
R2(config)#int s1/0
R2(config-if)#ppp pap sent-username CCNA password SPOTO

R2#sh running-config interface s1/0
Building configuration...

Current configuration : 174 bytes
!
interface Serial1/0
 ip address 12.1.1.2 255.255.255.0
 encapsulation ppp
 ppp authentication pap
 ppp pap sent-username CCNA password 0 SPOTO
 serial restart-delay 0
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h6 id="双向设置authentication"><a href="#双向设置authentication" class="header-anchor">#</a> 双向设置Authentication:</h6> <p>R2 端:</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>R2<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#username CCNP password SPO</span>
R2<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#int s1/0 </span>
R2<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ppp authentication ?</span>
  chap        Challenge Handshake Authentication Protocol <span class="token punctuation">(</span>CHAP<span class="token punctuation">)</span>
  eap         Extensible Authentication Protocol <span class="token punctuation">(</span>EAP<span class="token punctuation">)</span>
  ms-chap     Microsoft Challenge Handshake Authentication Protocol <span class="token punctuation">(</span>MS-CHAP<span class="token punctuation">)</span>
  ms-chap-v2  Microsoft CHAP Version <span class="token number">2</span> <span class="token punctuation">(</span>MS-CHAP-V2<span class="token punctuation">)</span>
  pap         Password Authentication Protocol <span class="token punctuation">(</span>PAP<span class="token punctuation">)</span>

R2<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ppp authentication pap</span>
R2<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#</span>
*Jun <span class="token number">28</span> <span class="token number">17</span>:34:31.690: %LINEPROTO-5-UPDOWN: Line protocol on Interface Serial1/0, changed state to down
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>R1 端:</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>R2<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#int s1/0</span>
R2<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ppp pap sent-username CCNP password SPO</span>
R1<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#</span>
*Jun <span class="token number">28</span> <span class="token number">17</span>:37:17.582: %LINEPROTO-5-UPDOWN: Line protocol on Interface Serial1/0, changed state to up
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h5 id="challenge-handshake-authentication-protocol-chap"><a href="#challenge-handshake-authentication-protocol-chap" class="header-anchor">#</a> Challenge Handshake Authentication Protocol(CHAP):</h5> <p>CHAP 在建立链路时进行身份验证，并定期检查链路，确保路由器始终与同一台主机通信。</p> <blockquote><p>After PPP finishes its initial link-establishment phase, the local router sends a challenge request to the remote device. The remote device sends a value calculated using <strong>a one-way hash function called MD5</strong>. The local router checks this hash value to make sure it matches. If the values don’t match, the link is immediately terminated.</p> <img src="https://cdn.jsdelivr.net/gh/Wolfxin/MyPicGo/img/image-20220627203541057.png" alt="image-20220627203541057" style="zoom:45%;"> <h5 id="chap认证方式"><a href="#chap认证方式" class="header-anchor">#</a> chap认证方式</h5> <h6 id="单向配置"><a href="#单向配置" class="header-anchor">#</a> 单向配置</h6> <p>R1 端:</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>R1<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#username CCNA password SPOTO</span>
R1<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#int s1/0</span>
        R1<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#encapsulation ppp</span>

R1<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ppp authentication chap</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>R2 端:</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>R2<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ppp chap hostname CCNA</span>
R2<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ppp chap password SPOTO</span>

        R2<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#</span>
*Jun <span class="token number">28</span> <span class="token number">17</span>:50:19.378: %LINEPROTO-5-UPDOWN: Line protocol on Interface Serial1/0, changed state to up

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h6 id="双向配置"><a href="#双向配置" class="header-anchor">#</a> 双向配置</h6> <p>R2 端:</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>R2<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#username CCNP password SPO</span>
R2<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#int s1/0</span>
R2<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#encapsulation ppp </span>
R2<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ppp authentication chap</span>

        R2<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#do sh run int s1/0</span>
    Building configuration<span class="token punctuation">..</span>.

    Current configuration <span class="token builtin class-name">:</span> <span class="token number">181</span> bytes
            <span class="token operator">!</span>
    interface Serial1/0
     <span class="token function">ip</span> address <span class="token number">12.1</span>.1.2 <span class="token number">255.255</span>.255.0
             encapsulation ppp
     ppp authentication chap
             ppp chap <span class="token function">hostname</span> CCNA
     ppp chap password <span class="token number">0</span> SPOTO
             serial restart-delay <span class="token number">0</span>
    end
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>R1 端:</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>R1<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#int s1/0</span>
R1<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ppp chap hostname CCNP</span>
R1<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ppp chap password SPO</span>

R1<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#do sh run int s1/0</span>
    Building configuration<span class="token punctuation">..</span>.

            Current configuration <span class="token builtin class-name">:</span> <span class="token number">154</span> bytes
    <span class="token operator">!</span>
    interface Serial1/0
     <span class="token function">ip</span> address <span class="token number">12.1</span>.1.1 <span class="token number">255.255</span>.255.0
  encapsulation ppp
  ppp chap <span class="token function">hostname</span> CCNP
     ppp chap password <span class="token number">0</span> SPO
             serial restart-delay <span class="token number">0</span>
    end
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div></blockquote> <h4 id="configuring-ppp-on-cisco-routers"><a href="#configuring-ppp-on-cisco-routers" class="header-anchor">#</a> Configuring PPP on Cisco Routers</h4> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>Router<span class="token comment">#config t</span>
Enter configuration commands, one per line. End with CNTL/Z.
Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#int s0/0</span>
Router<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#encapsulation ppp</span>
Router<span class="token comment">#</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="configuring-ppp-authentication"><a href="#configuring-ppp-authentication" class="header-anchor">#</a> Configuring PPP Authentication</h4> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>Router<span class="token comment">#config t</span>
Enter configuration commands, one per line. End with CNTL/Z.
Router<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#hostname RouterA</span>
RouterA<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#username RouterB password cisco # 指定远程路由器连接到本地路由器时使用的用户名和密码</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><blockquote><ul><li>使用命令username时，别忘了用户名是要连接到本地路由器的远程路由器的主机名，它是区分大小写的。</li> <li>另外，两台路由器的密码必须相同。这种密码是以明文方式存储的，可使用命令show run查看;</li> <li>也可对密码进行加密，为此可使用命令``service password-encryption`。</li> <li>对于要连接的每个远程系统，都必须为其配置用户名和密码; 而在远程路由器上，也必须以类似的方式配置用户名和密码。</li></ul></blockquote> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>RouterA<span class="token comment">#config t</span>
Enter configuration commands, one per line. End with CNTL/Z.
RouterA<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#int s0</span>
RouterA<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ppp authentication chap pap</span>
RouterA<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#^Z</span>
RouterA<span class="token comment">#</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><blockquote><p>如果同时指定了两种方法，则在链路协商期间，只使用第一种方法 一一 第二种方法为备用方法，仅在第一种方法失效时才会使用。</p></blockquote> <h4 id="验证ppp封装"><a href="#验证ppp封装" class="header-anchor">#</a> 验证PPP封装</h4> <p><img src="https://cdn.jsdelivr.net/gh/Wolfxin/MyPicGo/img/202207121557436.png" alt="image-20220712155742232"></p> <blockquote><p>You can start verifying the configuration with the show interface command:</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>Pod1R1<span class="token comment">#sh int s0/0</span>
   Serial0/0 is up, line protocol is up  <span class="token comment"># 可知接口serial0/0 处于up/up 状态</span>
   Hardware is PowerQUICC Serial
   Internet address is <span class="token number">10.0</span>.1.1/24
   MTU <span class="token number">1500</span> bytes, BW <span class="token number">1544</span> Kbit, DLY <span class="token number">20000</span> usec,
   reliability <span class="token number">239</span>/255, txload <span class="token number">1</span>/255, rxload <span class="token number">1</span>/255
   Encapsulation PPP   <span class="token comment"># 指出封装为PPP</span>
   loopback not <span class="token builtin class-name">set</span>
   Keepalive <span class="token builtin class-name">set</span> <span class="token punctuation">(</span><span class="token number">10</span> sec<span class="token punctuation">)</span>
   LCP Open    <span class="token comment"># 指出LCP处于打开(open) 状态，这表明会话已建立且一切正常</span>
   Open: IPCP, CDPCP   <span class="token comment"># 指出 NCP在侦听协议IP和CDP。</span>
   <span class="token punctuation">[</span>output cut<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div></blockquote> <h5 id="存在异常的情况示例2"><a href="#存在异常的情况示例2" class="header-anchor">#</a> 存在异常的情况示例2:</h5> <p><img src="https://cdn.jsdelivr.net/gh/Wolfxin/MyPicGo/img/202207121600598.png" alt="image-20220712160058457"></p> <blockquote><p>username 和 password都是区别大小写的, 此处密码不一致. 来查看一下接口信息:</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>Pod1R1<span class="token comment">#5h int 50/0</span>
   SerialO/O is Up , line protocol is down
   Hardware is PowerQUICC Serial
   Inter啕net address is <span class="token number">10.0</span>.1.1/24
   MTU <span class="token number">1500</span> bytes , BW <span class="token number">1544</span> Kbit , DLY <span class="token number">20000</span> usec ,
   reliability <span class="token number">243</span>/255 , txload <span class="token number">1</span>/255 , rxload <span class="token number">1</span>/255
   Encapsulation PPP , loopback not <span class="token builtin class-name">set</span>
   Keepalive <span class="token builtin class-name">set</span> <span class="token punctuation">(</span><span class="token number">10</span> sec<span class="token punctuation">)</span>
   LCP Closed     <span class="token comment"># LCP 处于关闭状态，因为没有通过身份验证</span>
   Closed: IPCP, CDPCP
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div></blockquote> <h5 id="调试ppp-authentication"><a href="#调试ppp-authentication" class="header-anchor">#</a> 调试PPP Authentication:</h5> <blockquote><ul><li><p>要实时显示网络中两台路由器之间的CHAP身份验证过程，可使用命令<code>debug ppp authentication</code>;</p></li> <li><p>使用身份验证方法CHAP时， PPP进行3次握手;如果用户名和密码配置得不正确，将无法通过身份验证，导致链路处于down状态。</p></li></ul></blockquote> <h5 id="存在异常的情况示例2-wan-封装不一致"><a href="#存在异常的情况示例2-wan-封装不一致" class="header-anchor">#</a> 存在异常的情况示例2: WAN 封装不一致</h5> <p><img src="https://cdn.jsdelivr.net/gh/Wolfxin/MyPicGo/img/202207121606057.png" alt="image-20220712160648916"></p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>Pod1R1<span class="token comment">#sh int s0/0</span>
    Serial0/0 is up, line protocol is down
    Hardware is PowerQUICC Serial
    Internet address is <span class="token number">10.0</span>.1.1/24
    MTU <span class="token number">1500</span> bytes, BW <span class="token number">1544</span> Kbit, DLY <span class="token number">20000</span> usec,
    reliability <span class="token number">254</span>/255, txload <span class="token number">1</span>/255, rxload <span class="token number">1</span>/255
    Encapsulation PPP, loopback not <span class="token builtin class-name">set</span>
    Keepalive <span class="token builtin class-name">set</span> <span class="token punctuation">(</span><span class="token number">10</span> sec<span class="token punctuation">)</span>
    LCP REQsent
    Closed: IPCP, CDPCP
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><blockquote><p>LCP 发送请求，但没有收到任何响应，因为路由器Pod1 R2使用的封装是HDLC; 请牢记，不能在链路一端使用PPP，而在另一端使用HDLC 一一 它们合不来!</p></blockquote> <h5 id="存在异常的情况示例3-ip-地址不匹配"><a href="#存在异常的情况示例3-ip-地址不匹配" class="header-anchor">#</a> 存在异常的情况示例3: IP 地址不匹配</h5> <blockquote><p><img src="https://cdn.jsdelivr.net/gh/Wolfxin/MyPicGo/img/202207121609283.png" alt="image-20220712160954149"></p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>Pod1R1<span class="token comment">#sh int s0/0</span>
Serial0/0 is up, line protocol is up
Hardware is PowerQUICC Serial
Internet address is <span class="token number">10.0</span>.1.1/24
MTU <span class="token number">1500</span> bytes, BW <span class="token number">1544</span> Kbit, DLY <span class="token number">20000</span> usec,
reliability <span class="token number">255</span>/255, txload <span class="token number">1</span>/255, rxload <span class="token number">1</span>/255
Encapsulation PPP, loopback not <span class="token builtin class-name">set</span>
Keepalive <span class="token builtin class-name">set</span> <span class="token punctuation">(</span><span class="token number">10</span> sec<span class="token punctuation">)</span>
LCP Open
Open: IPCP, CDPCP
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>两台路由器连接到的子网不同， Pod1 R1 的地址为10.0.1.1/24 ，而Pod R2的地址为10.2.1.2/24.</p> <ul><li>鉴于第1层(物理层)和第2层(数据链路层)都处于up状态，要解决问题，必须查看并验证直接相连的邻居的IP 地址。</li> <li>要发现并修复这种问题，可在每台路由器上执行命令<code>show running-config</code> 或<code>show interfaces</code>，也可执行第7章介绍的命令<code>show cdp neighbors detail</code>.</li></ul></blockquote> <h3 id="pppoe"><a href="#pppoe" class="header-anchor">#</a> PPPoE</h3> <blockquote><p><strong>Point-to-Point Protocol over Ethernet</strong> encapsulates PPP frames in Ethernet frames and is usually used in conjunction with xDSL services.</p> <ul><li>It gives you a lot of the familiar PPP features like authentication, encryption, and compression, but there’s a downside—it has a lower maximum transmission unit (MTU) than standard Ethernet does, and if your firewall isn’t solidly(扎实地) configured, this little attribute can really give you some grief(悲痛)!</li> <li>Still somewhat popular in the United States, PPPoE’s main feature is that it adds a direct connection to Ethernet interfaces while providing DSL support as well. It’s often used by many hosts on a shared Ethernet interface for opening PPP sessions to various destinations via at least one bridging modem.</li> <li>这是一种隧道协议，可封装运行在ppp之上的IP和其他协议，具有ppp链路的特性，因此可用于连接其他以太网设备，并发起建立点到点连接，以传输IP分组。</li></ul></blockquote> <blockquote><img src="https://cdn.jsdelivr.net/gh/Wolfxin/MyPicGo/img/202207121347176.png" alt="image-20220712134728033" style="zoom:70%;"> <ul><li>图16-6 说明了PPPoE典型用途:用于ADSL。正如你看到的，图中建立了一个从PC到路由器的ppp会话，而PC 的IP地址是由路由器通过IPCP分配的。</li> <li>PPPoE is used to equip custom PPP-based software with the ability to deal with a connection that’s not using a serial line and to be at home in a packet-oriented network environment like Ethernet.</li> <li>It also allows for a custom connection with login and password for Internet connection accounting.</li> <li>Another factor is that the opposite side of the link’s IP address is only given to it and is available only for the specific period that the PPPoE connection is open, so reusing IP addresses dynamically is permitted.</li> <li>PPPoE has a <em>discovery stage</em> and a <em>PPP session stage</em> (see RFC 2516) that works like this: First, a host begins a PPPoE session, during which it has to execute a discovery process so it can determine the best server to meet the needs of the client machine’s request.  After that, it has to discover the Ethernet MAC address of the peer device and create a PPPoE session ID. So even though PPP <strong>delimits</strong> a peer-to-peer relationship, the discovery part is <strong>innately</strong>(先天性地) a client - server relationship.</li> <li>以下配置了解即可:</li></ul> <img src="https://cdn.jsdelivr.net/gh/Wolfxin/MyPicGo/img/image-20220628202544095.png" alt="image-20220628202544095" style="zoom:50%;"> <img src="https://cdn.jsdelivr.net/gh/Wolfxin/MyPicGo/img/image-20220628203053147.png" alt="image-20220628203053147" style="zoom:50%;"></blockquote> <h3 id="cable"><a href="#cable" class="header-anchor">#</a> Cable</h3> <blockquote><p>In a modern hybrid fiber-coaxial HFC network, typically 500 to 2,000 active data subscribers are connected to a certain cable network segment, all sharing the upstream and downstream bandwidth. <strong>HFC</strong> is a telecommunications industry term for a network that <strong>incorporates both optical fiber and coaxial cable</strong> to create a broadband network.</p> <ul><li>The actual bandwidth for Internet service over a cable TV (CATV) line can be up to about 27Mbps on the download path to the subscriber, with about 2.5Mbps of bandwidth on the upload path. Typically users get an access speed from 256Kbps to 6Mbps.</li></ul></blockquote> <img src="https://cdn.jsdelivr.net/gh/Wolfxin/MyPicGo/img/202207121325100.png" alt="image-20220712132505945" style="zoom:80%;"> <h3 id="dsl"><a href="#dsl" class="header-anchor">#</a> DSL</h3> <blockquote><p><strong>Digital subscriber line</strong>: 是传统电话公司使用的一种技术，通过普通的<strong>铜质双绞电话线</strong>提供高级服务(高速数据，有时还有视频)。</p> <ul><li><p>其数据传输容量通常低于HFC网络，而数据传输速度还受电话线的长度和质量的影响。</p></li> <li><p>DSL不是完全的端到端解决方案，而与拨号、有线电视和无线一样，是一种物理层传输技术。</p></li> <li><p>DSL连接用于本地电话网络的最后一公里，即本地环路。这种连接是在一对DSL调制解调器之间建立的，这两个DSL调制解调器分别位于铜质电话线的两端，而铜质电话线位于**用户室内设备(CPE)<strong>和数</strong>字用户线接人多路复用器(DSLAM)**之间。DSLAM 是一种位于提供商中心局(CO)的设备，负责聚集来自多个DSL用户的连接。</p></li> <li><p>要使用DSL，需要有<code>电话线</code>、<code>DSL调制解调器(通常由购买的服务提供)</code>、<code>以太网网卡(或有以太网连接的路由器)</code>以及当地的服务提供商。</p></li> <li><p>根据上行速度和下行速度是否相同， DSL分为两类:</p> <ul><li><strong>Symmetrical DSL</strong>: 上行速度和下行速度相同，即对称;</li> <li><strong>Asymmetrical DSL</strong>: 下行速度比上行速度总是更高。</li></ul></li> <li><p>术语xDSL是众多DSL形式的统称，这包括非对称DSL(ADSL)、高速DSL(HDSL)、速率自适应DSL(RADSL)、对称DSL(SDSL)、ISDN DSL(IDSL) 和超高速DSL(VDSL)。</p></li> <li><p>DSL flavors that don’t use the voice frequencies band, like ADSL and VDSL, allow DSL lines to carry both data and voice signalssimultaneously. Others, like SDSL and IDSL, that occupy the complete frequency range, can carry only data. And by the way, <strong>the data service that the DSL connection gives you is always on</strong>.</p></li> <li><p>The speed that DSL service can offer depends on how far you are from the central office (CO)—the closer the better. In fact, you can blaze at rates up to around 6.1Mbps if you’re physically close enough!</p> <img src="https://cdn.jsdelivr.net/gh/Wolfxin/MyPicGo/img/202207121335321.png" alt="image-20220712133540147" style="zoom:80%;"></li></ul></blockquote> <h4 id="asdl"><a href="#asdl" class="header-anchor">#</a> ASDL</h4> <blockquote><ul><li>ADSL 可同时传输语音和数据，但其下行带宽比上行带宽高: ADSL 的下行速度为256 Kbi的-8 Mbi饨，但上行速度最多只有1.5 Mbit/s 左右。</li> <li><strong>Plain old telephone service (POTS)</strong> provides a channel for analog voice transmission and can transmit without a problem with ADSL over the same twisted-pair telephone line. Actually, depending on the type of ADSL, not just two, but three information channels commonly utilize the same wiring at the same time. This is why people can use a phone line and an ADSL connection at the same time and not affect either service.</li> <li><strong>ATM</strong> is the Data Link layer protocol typically used over the DSL layer 1 connection <em>from the CPE</em> and is terminated at what’s known as the <em>DSLAM</em> — <em>an ATM switch that contains DSL interface cards, or ATU-Cs</em>. After ADSL connections meet their end at the DSLAM, it switches the data over an ATM network to something called an <strong>aggregation router</strong> — a layer 3 device where the subscriber’s IP connection then expires.</li></ul></blockquote> <blockquote><p>要通过ATM和DSL连接传输IP分组. 必须对其进行封装。根据用户的接口类型和服务提供商的交换机，共有3种封装方法:</p> <ul><li>PPPoE</li> <li>RFC1483 Routing: RFC1483 describes two different methods for carrying connectionless network traffic over an ATM network: <strong>routed protocols</strong> and <strong>bridged protocols</strong>.</li> <li>PPPoA: <strong>Point-to-Point Protocol (PPP) over ATM</strong> is used to encapsulate PPP frames in ATM AAL5 (ATM Adaptation Layer 5). It is typically used with cable modems, DSL, and ADSL services and offers the usual PPP features of authentication, encryption, and compression, and it actually has less overhead in comparison to PPPoE.</li></ul></blockquote> <h4 id="cisco-long-range-ethernet-lre"><a href="#cisco-long-range-ethernet-lre" class="header-anchor">#</a> Cisco Long Range Ethernet (LRE)</h4> <blockquote><p>The <strong>Cisco Long Range Ethernet</strong> solution employs something called <strong>VDSL (very-high-data-rate digital subscriber line)</strong> technology to significantly expand Ethernet service capacity. And LRE can achieve these impressive results: speeds from 5 to 15Mbps (full duplex) at distances up to 5,000 feet traveling over existing twisted-pair wiring!
So basically, Cisco LRE technology can give us broadband service on <em>POTS, digital telephone, and ISDN traffic lines, and it also can operate in modes that are compatible with ADSL technologies.</em> This flexibility is important because it makes it possible for service providers to make LRE available in structures and/or buildings that have broadband services already in place but need it enhanced—very cool indeed.</p></blockquote> <h3 id="mpls"><a href="#mpls" class="header-anchor">#</a> MPLS</h3> <blockquote><p><strong>MultiProtocol Label Switching (MPLS)</strong> is a data-carrying mechanism that <em>emulates some properties of a circuit-switched network over a packet-switched network</em>.</p> <ul><li>MPLS is a switching mechanism that imposes labels (numbers) to packets and then uses those labels to forward packets. The labels are assigned on the edge of the MPLS network, and forwarding inside the MPLS network is done solely based on labels.</li> <li>Labels usually correspond to a path to layer 3 destination addresses (equal to IP destination-based routing).</li> <li>MPLS was designed to support forwarding of protocols other than TCP/IP. Because of this, label switching within the network is performed the same regardless of the layer 3 protocol.</li> <li>In larger networks, the result of MPLS labeling is that only the edge routers perform a routing lookup. All the core routers forward packets based on the labels, which makes forwarding the packets through the service provider network faster. (Most companies are replacing their Frame Relay networks with MPLS service today.)</li></ul></blockquote> <h3 id="atm"><a href="#atm" class="header-anchor">#</a> ATM</h3> <blockquote><p><strong>Asynchronous Transfer Mode (ATM)</strong> was created for time-sensitive traffic, providing simultaneous transmission of voice, video, and data.</p> <ul><li>ATM uses cells that are a fixed 53 bytes long instead of packets. It also can use isochronous(异步的) clocking (external clocking) to help the data move faster. Typically(通常情况下), if you are running Frame Relay today, you will be running Frame Relay over ATM.</li></ul></blockquote> <h3 id="dwdm"><a href="#dwdm" class="header-anchor">#</a> DWDM</h3> <blockquote><p><strong>Dense Wavelength Division Multiplexing</strong> is optical technology used to increase bandwidth using fiber backbones.</p> <ul><li>DWDM works by combining and transmitting multiple signals simultaneously at different wavelengths on the same fiber link, creating a type of multilink with the signals running down the fiber. In theory, a 1.5Gbs link could have the capacity of 10Mbps.</li> <li>An advantage of DWDM is that it is both protocol and bit-rate independent and can run with IP over ATM, SONET, and even Ethernet.</li></ul></blockquote> <h2 id="cabling-the-serial-wide-area-network"><a href="#cabling-the-serial-wide-area-network" class="header-anchor">#</a> Cabling the Serial Wide Area Network</h2> <blockquote><p><strong>Cisco serial connections</strong> support almost any type of WAN service. Your typical WAN connection is a <strong>dedicated leased line</strong> using <strong>HDLC, PPP, and Frame Relay</strong> with speeds that can kick it up to 45Mbps (T3).</p></blockquote> <h3 id="serial-transmission"><a href="#serial-transmission" class="header-anchor">#</a> Serial Transmission</h3> <blockquote><ul><li><p>HDLC 、PPP 和Frame Relay可使用相同的物理层规范，我将介绍各种类型的连接，然后全面介绍CCNA考试涉及的WAN协议。</p></li> <li><p>WAN serial connectors use serial transmission, something that takes place 1 bit at a time over a single channel.</p></li> <li><p>Older Cisco routers have used a proprietary 60-pin serial connector that you have to get from Cisco or a provider of Cisco equipment. Cisco also has a <strong>new, smaller proprietary serial connection</strong> that’s about one-tenth the size of the 60-pin basic serial cable called the <strong>smart-serial</strong>. You have to make sure you have the right type of interface in your router before using this cable connector.</p></li> <li><p>The type of connector you have on the other end of the cable depends on your service provider and their particular end-device requirements.</p> <p>There are several different types of ends you’ll run into:</p> <ul><li>EIA/TIA-232</li> <li>EIA/TIA-449</li> <li>V.35 (used to connect to a CSU/DSU)</li> <li>EIA-530</li></ul> <blockquote><p>Make sure you’re clear on these things:</p> <ul><li><strong>Serial links</strong> are described in <strong>frequency</strong> or cycles per second (hertz).</li> <li>The amount of data that can be carried within these frequencies is called <strong>bandwidth</strong>. Bandwidth is the amount of data in bits per second that the serial channel can carry.</li></ul></blockquote></li></ul></blockquote> <h3 id="data-terminal-equipment-data-communications-equipment"><a href="#data-terminal-equipment-data-communications-equipment" class="header-anchor">#</a> ==Data Terminal Equipment== &amp; ==Data Communications Equipment==</h3> <blockquote><img src="https://cdn.jsdelivr.net/gh/Wolfxin/MyPicGo/img/202207121430941.png" alt="image-20220712143036705" style="zoom:80%;"> <ul><li><p>WAN旨在通过DCE网络将两个DTE网络连接起来。DCE网络由如下部分组成:两端的CSU/DSU以及它们之间的提供商电缆和交换机，其中的DCE设备(CSU/DSU)向连接到DTE的接口(路由器的串行连接)提供时钟。</p> <blockquote><p>如果组建的是非生产网络，使用WAN交叉电缆，且没有CSU/DSU，在这种情况下，必须在电缆的DCE端使用命的``clock rate`以提供时钟，这在第6章介绍过。</p></blockquote></li> <li><p>默认情况下，路由器接口通常是==data terminal equipment(DTE)==，可连接到==data communication equipment(DCE)==，如<strong>channel service unit/data service unit(CSU/DSU)</strong>。而CSU/DSU连接到分界点demarcation location 一一 服务提供商职责终止处。在大多数情况下，分界点demarc 是一个位于电信室的插座，装有RJ-45(8针模块)母接头。</p></li> <li><p>诸如EIA/TIA-232, V.35, X.21 和HSSI(高速串行接口)等术语描述的是DTE(路由器)和DCE设备(CSU/DSU) 之间的物理层。</p></li></ul></blockquote> <h1 id="wan广域网技术"><a href="#wan广域网技术" class="header-anchor">#</a> WAN广域网技术</h1> <img src="https://cdn.jsdelivr.net/gh/Wolfxin/MyPicGo/img/image-20220627201627190.png" alt="image-20220627201627190" style="zoom:87%;"> <h2 id="广域网的链路类型"><a href="#广域网的链路类型" class="header-anchor">#</a> 广域网的链路类型:</h2> <h3 id="专线-运营商提供的服务-如-t1-t3等"><a href="#专线-运营商提供的服务-如-t1-t3等" class="header-anchor">#</a> 专线: 运营商提供的服务, 如 T1, T3等</h3> <ul><li>专有的逻辑连接, 一直在线, 安全、高传输质量</li> <li>支持多种物理介质与物理接口标准</li> <li>稳定可靠， 配置维护简单</li> <li>适合长时间的业务流量需求； 价格相对较高</li></ul> <h3 id="vpn-mpls-vpn-mstp-vpn"><a href="#vpn-mpls-vpn-mstp-vpn" class="header-anchor">#</a> VPN: MPLS VPN, MSTP VPN,</h3> <img src="https://cdn.jsdelivr.net/gh/Wolfxin/MyPicGo/img/image-20220627202841709.png" alt="image-20220627202841709" style="zoom:67%;"> <h2 id="vpn-virtual-private-networks"><a href="#vpn-virtual-private-networks" class="header-anchor">#</a> VPN(Virtual Private Networks)</h2> <blockquote><p>==虚拟专网(VPN) 让你能够利用因特网组建专用网络，通过隧道安全地传输非TCP/IP协议的分组。==</p> <ul><li>VPN 让远程用户和远程网络能够使用公共介质(如因特网)连接到公司网络，而无需使用昂贵的永久性连接。</li> <li>Types of VPNs are named based upon the role they play in a business. There are three different categories of VPNs:
<ul><li><strong>Remote access VPNs</strong>: 远程接入VPN让远程用户(如远程办公人员)能够随时随地地安全访问公司网络。</li> <li><strong>Site-to-site VPNs</strong>: Site-to-site VPNs, or <strong>intranet VPN</strong>s, allow a company to connect its remote sites to the corporate backbone securely over a public medium like the Internet instead of requiring more expensive WAN connections like Frame Relay.</li> <li><strong>Extranet VPNs</strong> Extranet VPNs allow an organization’s suppliers, partners, and customers to be connected to the corporate network in a limited way for business-to-business (B2B) communications.</li></ul></li></ul></blockquote> <blockquote><p>鉴于VPN安全且价格低廉，你可能很想知道如何组建VPN。组建VPN的方法有多种:</p> <ul><li><p>第一种是使用==IPSec==. 它在IP网络的端点之间提供身份验证和加密服务;</p></li> <li><p>第二种是使用隧道胁议，在端点之间建立隧道。隧道将一种协议或数据封装在另一种协议中!</p> <p>Four of the most common tunneling protocols in use:</p> <ul><li><strong>Layer 2 Forwarding (L2F)</strong>: 是一种思科专用的隧道协议，它是思科为支持虚拟专用拨号网络(VPDN) 而开发的第一种隧道协议。VPDN 允许设备通过拨号连接安全地访问公司网络。L2F 已被L2TP 取代，而L2TP向后与L2F兼容。</li> <li><strong>Point-to-Point Tunneling Protocol (PPTP)</strong>: was created by Microsoft to allow the secure transfer of data from remote networks to the corporate network.</li> <li><strong>Layer 2 Tunneling Protocol (L2TP)</strong>: was created by Cisco and Microsoft to replace L2F and PPTP. L2TP merged the capabilities of both L2F and PPTP into one tunneling protocol.</li> <li><strong>Generic Routing Encapsulation (GRE)</strong>: 也是一种思科专用的隧道协议。它建立虚拟点到点链路，允许在IP隧道中封装各种协议分组。</li></ul></li></ul></blockquote> <h3 id="ipsec"><a href="#ipsec" class="header-anchor">#</a> IPsec</h3> <blockquote><ul><li>IPSec是一个行业标准框架，包含用于通过IP网络安全地传输数据的协议和算法，它运行在OSI模型的第3层(网络层)。</li> <li>IPSec不能用于加密非IP数据流。这意味着如果需要对非IP数据流进行加密，必须创建一个GRE隧道，并使用IPSec对该隧道进行加密!</li></ul></blockquote> <h4 id="ipsec-transforms"><a href="#ipsec-transforms" class="header-anchor">#</a> IPSec Transforms</h4> <blockquote><p>take a second to define the security protocols and briefly introduce the supporting encryption and hashing algorithms that IPSec relies upon.</p></blockquote> <h5 id="安全协议"><a href="#安全协议" class="header-anchor">#</a> 安全协议</h5> <blockquote><p>IPSec 使用的两种主要的安全协议:</p> <ul><li><p>验证头(Authentication Header, AH):</p> <p>The AH protocol provides authentication for <strong>the data</strong> and <strong>the IP header</strong> of a packet using <strong>a one-way hash for packet authentication</strong>. It works like this: The sender generates a one-way hash; then the receiver generates the same one-way hash. If the packet has changed in any way, it won’t be authenticated and will be dropped. <strong>So basically, IPSec relies upon AH to guarantee authenticity</strong>. AH checks the entire packet, but it doesn’t offer any encryption services.
This is unlike ESP, which only provides an integrity check on the data of a packet.</p></li> <li><p>封装安全有效负载(Encapsulating Security Payload, ESP):</p> <p>ESP will provide confidentiality, data origin authentication, connectionless integrity, anti-replay service, and limited traffic-flow confidentiality by defeating traffic flow analysis — which is almost as good! Anyway, there are four components of ESP:</p> <ul><li>Confidentiality: 保密性是通过使用DES或3DES等对称加密算法提供的。保密性的设置可独立于其
他服务，但VPN两端的保密性设置必须相同。</li> <li>Data origin authentication and connectionless integrity: 数据来源验证和无连接完整性是与保密性协同工作的服务。</li> <li>Anti-replay service: 当启用了数据来源验证时，才能使用反重播服务。反重播服务依赖于接收方，
即仅当接收方检查序列号时，这种服务才能发挥作用。重播攻击指的是黑客制作通过了验证的分组副本，然后将其传输给目的地。当这个经过验证的四分组的副本到达目的地后，可中断服务以及导致其他糟糕的后果. The Sequence Number field is designed to foil this type of attack.</li> <li>Traffic flow: 为提供数据传输流程保密性，必须选择隧道模式。在大量数据流聚集的安全网关实现这种功能的效果最佳，这样可对试图攻击网络的人隐藏数据传输流程。</li></ul></li></ul></blockquote> <h5 id="encryption"><a href="#encryption" class="header-anchor">#</a> Encryption:</h5> <blockquote><p>VPN 使用公共网络基础设施组建私有网络，然而，为提供保密性和安全，需要将IPSec用于VPN。</p> <p>IPSec使用各种类型的协议进行加密。当今使用的加密算法类型如下:</p> <ul><li><p><strong>Symmetric encryption</strong> This encryption requires a shared secret to encrypt and decrypt. 对称加密算法包括数据加密标准(DES)、三重DES (3DES) 和高级加密标准(AES)。</p></li> <li><p><strong>Asymmetric Encryption</strong>: 这种加密算法使用不同的密钥进行加密和解密，这两种密钥分别称为私钥和
公钥。</p> <blockquote><ul><li>Private keys encrypt a hash from the message to create a digital signature that is then verified via decryption using the public key;</li> <li>Public keys encrypt a symmetric key for secure distribution to the receiving host, who then decrypts that symmetric key using their exclusively held private key.</li> <li>It is not possible to encrypt and decrypt using the same key. This is a variant of public key encryption that uses a combination of both a public and private key. An example of an asymmetric encryption is <strong>Rivest, Shamir, and Adleman (RSA)</strong>.</li></ul></blockquote></li></ul></blockquote> <blockquote><p>要在两个场点之间建立VPN, 思科提供了GUI接口以完成这个过程，这对于给VPN配置IPSec很有帮助，但超出了本书的范围。对管理力量有限的公司来说，思科的Easy VPN 让VPN配置起来容易得多。为帮助管理和部署
VPN ，思科提供了3 个组件:</p> <ul><li>Cisco Easy VPN Server 安装了Firewall IOS 或PIXIASA Firewall 的思科路由器，在场点到场点VPN 或远程接入VPN中充当VPN集中器;</li> <li>Cisco Easy VPN Remote 安装了Firewall IOS 或PIXIASA Firewall 的思科路由器，充当VPN客户端，为远程网络中的主机提供服务;</li> <li>Cisco Easy VPN Client 安装在PC 上，用于访问Cisco VPN Server。</li></ul></blockquote> <h3 id="gre-vpn"><a href="#gre-vpn" class="header-anchor">#</a> GRE VPN</h3> <blockquote><ul><li><p><strong>Generic Routing Encapsulation</strong> (<strong>GRE</strong>) is a <a href="https://en.wikipedia.org/wiki/Tunneling_protocol" target="_blank" rel="noopener noreferrer">tunneling protocol<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> developed by <a href="https://en.wikipedia.org/wiki/Cisco_Systems" target="_blank" rel="noopener noreferrer">Cisco Systems<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> that can <a href="https://en.wikipedia.org/wiki/Encapsulation_(networking)" target="_blank" rel="noopener noreferrer">encapsulate<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> a wide variety of <a href="https://en.wikipedia.org/wiki/Network_layer" target="_blank" rel="noopener noreferrer">network layer<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <a href="https://en.wikipedia.org/wiki/Protocol_(computing)" target="_blank" rel="noopener noreferrer">protocols<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> inside virtual <a href="https://en.wikipedia.org/wiki/Point-to-point_(telecommunications)" target="_blank" rel="noopener noreferrer">point-to-point links<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> or point-to-multipoint links over an <a href="https://en.wikipedia.org/wiki/Internet_Protocol" target="_blank" rel="noopener noreferrer">Internet Protocol<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> network.</p></li> <li><p>Generic Routing Encapsulation(IP), 路由器在内网报文的头部 添加公网地址(明文传输)</p></li></ul> <p><img src="https://cdn.jsdelivr.net/gh/Wolfxin/MyPicGo/img/202207162151730.png" alt="image-20220716215125519"></p> <ul><li>https://ipwithease.com/gre-vs-ipsec/</li></ul></blockquote> <p><img src="https://cdn.jsdelivr.net/gh/Wolfxin/MyPicGo/img/image-20220628210104396.png" alt="image-20220628210104396"></p> <p>R1:</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token comment"># 开启 VPN 的 tunnel</span>
R1<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#interface tunnel 0</span>
R1<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#tunnel source 101.202.1.1</span>
R1<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#tunnel destination 202.101.1.1</span>
<span class="token comment"># 为 tunnel添加 IP地址(私有地址)</span>
R1<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip add 192.168.3.1 255.255.255.0</span>

<span class="token comment"># 开启 OSPF 路由协议</span>
R1<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exi </span>
R1<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#router ospf 1</span>
R1<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#router-id 1.1.1.1</span>
R1<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#network 192.168.0.0 0.0.255.255 area 0</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>配置加密传输</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>R1<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#crypto isakmp policy 10</span>
R1<span class="token punctuation">(</span>config-isakmp<span class="token punctuation">)</span><span class="token comment">#encryption ?</span>
  3des  Three key triple DES
  aes   AES - Advanced Encryption Standard.
  des   DES - Data Encryption Standard <span class="token punctuation">(</span><span class="token number">56</span> bit keys<span class="token punctuation">)</span>.
R1<span class="token punctuation">(</span>config-isakmp<span class="token punctuation">)</span><span class="token comment">#encryption aes</span>

R1<span class="token punctuation">(</span>config-isakmp<span class="token punctuation">)</span><span class="token comment">#hash ?</span>
  md5     Message Digest <span class="token number">5</span>
  sha     Secure Hash Standard
  sha256  Secure Hash Standard <span class="token number">2</span> <span class="token punctuation">(</span><span class="token number">256</span> bit<span class="token punctuation">)</span>
  sha384  Secure Hash Standard <span class="token number">2</span> <span class="token punctuation">(</span><span class="token number">384</span> bit<span class="token punctuation">)</span>
  sha512  Secure Hash Standard <span class="token number">2</span> <span class="token punctuation">(</span><span class="token number">512</span> bit<span class="token punctuation">)</span>
R1<span class="token punctuation">(</span>config-isakmp<span class="token punctuation">)</span><span class="token comment">#hash md5 </span>

R1<span class="token punctuation">(</span>config-isakmp<span class="token punctuation">)</span><span class="token comment">#authentication pre-share </span>
R1<span class="token punctuation">(</span>config-isakmp<span class="token punctuation">)</span><span class="token comment">#lifetime 86400</span>
R1<span class="token punctuation">(</span>config-isakmp<span class="token punctuation">)</span><span class="token comment">#group 2</span>
R1<span class="token punctuation">(</span>config-isakmp<span class="token punctuation">)</span><span class="token comment">#exi</span>
R1<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#crypto isakmp key CCIE address 202.101.1.1</span>
R1<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#crypto ipsec transform-set MYSET esp-aes </span>
R1<span class="token punctuation">(</span>cfg-crypto-trans<span class="token punctuation">)</span><span class="token comment">#mode transport</span>
R1<span class="token punctuation">(</span>cfg-crypto-trans<span class="token punctuation">)</span><span class="token comment">#exi</span>

R1<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#crypto ipsec profile MYPRO</span>
R1<span class="token punctuation">(</span>ipsec-profile<span class="token punctuation">)</span><span class="token comment">#set transform-set MYSET</span>

R1<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#do sh run | section cry</span>
    no <span class="token function">service</span> password-encryption
    crypto isakmp policy <span class="token number">10</span>
     encr aes
     <span class="token builtin class-name">hash</span> md5
     authentication pre-share
     group <span class="token number">2</span>
    crypto isakmp key CCIE address <span class="token number">202.101</span>.1.1    
    crypto ipsec transform-set MYSET esp-aes 
     mode transport
    crypto ipsec profile MYPRO
     <span class="token builtin class-name">set</span> transform-set MYSET 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br></div></div><div class="language-sh line-numbers-mode"><pre class="language-sh"><code>R1<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#interface tunnel 0</span>
R1<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#tunnel protection ipsec profile MYPRO</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>R2 端:</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>R2<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#int tunnel 0</span>
R2<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#tunnel source 202.101.1.1</span>
R2<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#tunnel destination 101.202.1.1</span>

R2<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip add 192.168.3.2 255.255.255.0</span>
R2<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#exi</span>

R2<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#router ospf 1</span>
R2<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#router-id 2.2.2.2</span>
R2<span class="token punctuation">(</span>config-router<span class="token punctuation">)</span><span class="token comment">#network 192.168.0.0 0.0.255.255 area 0</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>配置加密传输</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>R2<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#</span>

<span class="token comment"># 粘贴以下:</span>
crypto isakmp policy <span class="token number">10</span>
encr aes
<span class="token builtin class-name">hash</span> md5
authentication pre-share
group <span class="token number">2</span>
crypto isakmp key CCIE address <span class="token number">101.202</span>.1.1    
crypto ipsec transform-set MYSET esp-aes 
mode transport
crypto ipsec profile MYPRO
<span class="token builtin class-name">set</span> transform-set MYSET 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="mpls-vpn"><a href="#mpls-vpn" class="header-anchor">#</a> MPLS VPN</h3> <blockquote><p>MPLS（多协议标签交换）是一种网络协议，用于加速和管理数据包在网络中的转发，同时提高网络的可靠性、灵活性和安全性。</p> <p>MPLS协议将网络数据包包装在一个包含标签的封装头中，这个标签可以告诉路由器如何处理这个数据包，从而使数据包的转发过程更快速和有效。MPLS不依赖于任何特定的数据链路层技术，可以在不同的网络环境下运行，如局域网（LAN）、广域网（WAN）或互联网。</p> <p>MPLS的主要功能包括：</p> <ol><li>基于标签的数据包转发：通过给数据包打上标签，将其与特定的流量工程、服务质量和安全性策略相关联，实现更快速和更可靠的数据包转发。</li> <li>服务质量（QoS）保证：通过使用MPLS，网络管理员可以对不同类型的数据流量进行分类和优先级管理，从而保证关键数据流量的优先传输和服务质量。</li> <li>灵活的虚拟专用网络（VPN）支持：MPLS可以实现虚拟专用网络（VPN）功能，允许不同的组织或用户在共享基础设施上建立私有网络。</li></ol> <p>MPLS已被广泛应用于各种网络环境，包括企业内部网络、服务提供商的网络和互联网中。</p></blockquote> <h4 id="基本配置"><a href="#基本配置" class="header-anchor">#</a> 基本配置</h4> <p>Configuring MPLS on two Cisco routers involves a series of steps. Here is an overview of the steps involved:</p> <ol><li>Configure basic IP connectivity between the two routers.</li> <li>Enable MPLS on each router.</li> <li>Configure a loopback interface on each router to use as the router ID for MPLS.</li> <li>Configure the label distribution protocol (LDP) to advertise labels between the routers.</li> <li>Configure the MPLS forwarding table.</li> <li>Test MPLS connectivity between the routers.</li></ol> <p>Here are the detailed steps to configure MPLS on two Cisco routers:</p> <ol><li>Configure basic IP connectivity between the two routers:</li></ol> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>Router1<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#interface fastEthernet 0/0 </span>
Router1<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 10.1.1.1 255.255.255.0 </span>
Router1<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#no shutdown</span>

Router2<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#interface fastEthernet 0/0 </span>
Router2<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 10.1.1.2 255.255.255.0 </span>
Router2<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#no shutdown</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ol start="2"><li>Enable MPLS on each router:</li></ol> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>Router1<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#mpls ip</span>

Router2<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#mpls ip</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ol start="3"><li>Configure a loopback interface on each router to use as the router ID for MPLS:</li></ol> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>Router1<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#interface loopback 0 </span>
Router1<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 1.1.1.1 255.255.255.255</span>

Router2<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#interface loopback 0 </span>
Router2<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#ip address 2.2.2.2 255.255.255.255</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ol start="4"><li>Configure the label distribution protocol (LDP) to advertise labels between the routers:</li></ol> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>Router1<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#mpls label protocol ldp </span>
Router1<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#interface fastEthernet 0/0 </span>
Router1<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#mpls ip</span>

Router2<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#mpls label protocol ldp </span>
Router2<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#interface fastEthernet 0/0 </span>
Router2<span class="token punctuation">(</span>config-if<span class="token punctuation">)</span><span class="token comment">#mpls ip</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ol start="5"><li>Configure the MPLS forwarding table:</li></ol> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>Router1<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#ip route 10.2.2.0 255.255.255.0 10.1.1.2 </span>
Router1<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#mpls label protocol ldp </span>
Router1<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#mpls ldp router-id loopback0</span>

Router2<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#ip route 10.1.1.0 255.255.255.0 10.2.2.1 </span>
Router2<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#mpls label protocol ldp </span>
Router2<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">#mpls ldp router-id loopback0</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ol start="6"><li>Test MPLS connectivity between the routers:</li></ol> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>Router1<span class="token comment">#ping 10.2.2.2 source loopback0 </span>
Router1<span class="token comment">#show mpls forwarding-table</span>

Router2<span class="token comment">#ping 10.1.1.1 source loopback0 </span>
Router2<span class="token comment">#show mpls forwarding-table</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>These steps provide a basic configuration for MPLS on two Cisco routers. However, there are many additional configuration options and features that can be enabled to customize MPLS for specific network requirements.</p></div></div> <!----> <div class="page-edit"><div class="edit-link"><a href="https://github.com/Jonas-Wolfxin/Jonas-Wolfxin.github.io/edit/main/docs/40.网络运维/05.CCNA/10.CCNA知识笔记/43.WAN广域网.md" target="_blank" rel="noopener noreferrer">编辑此页</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----> <div class="last-updated"><span class="prefix">last Updated:</span> <span class="time">2023/06/08, 22:42:49</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/729891/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">LAN Architectures</div></a> <a href="/pages/441d7d/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">WLAN</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/pages/729891/" class="prev">LAN Architectures</a></span> <span class="next"><a href="/pages/441d7d/">WLAN</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/pages/32db2d/"><div>
            Layer 3 Forwarding
            <!----></div></a> <span class="date">06-07</span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/6b8f16/"><div>
            Layer 2 Forwarding
            <!----></div></a> <span class="date">06-06</span></dt></dl><dl><dd>03</dd> <dt><a href="/pages/fe5ceb/"><div>
            Virtual Routing and Forwarding
            <!----></div></a> <span class="date">05-16</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="https://github.com/Jonas-Wolfxin" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://gitee.com/Jonas-Wolfxin" title="Gitee" target="_blank" class="iconfont icon-gitee"></a><a href="https://cdn.jsdelivr.net/gh/Wolfxin/MyPicGo/img/202206100005451.jpg" title="Wechat: @Jonas_Wolfxin" target="_blank" class="iconfont icon-weixin"></a><a href="http://wpa.qq.com/msgrd?v=3&amp;uin=1914303043&amp;site=qq&amp;menu=yes" title="QQ: 1914303043" target="_blank" class="iconfont icon-QQ"></a><a href="mailto:wolfxin@outlook.com" title="联系我" target="_blank" class="iconfont icon-youjian"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2021-2023
    <span>Jonas Wolfxin's Blog</span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <div class="body-bg" style="background:url() center center / cover no-repeat;opacity:0.5;"></div> <!----> <!----></div><div class="global-ui"><div></div><div></div><div></div><div></div><!----><!----><APlayer audio="" fixed="true" mini="true" theme="#b7daff" loop="loop" order="list" preload="auto" volume="0.7" mutex="true" lrc-type="0" list-max-height="250" storage-name="vuepress-plugin-meting" id="aplayer-fixed"></APlayer><div></div></div></div>
    <script src="/assets/js/app.d858ddbb.js" defer></script><script src="/assets/js/2.309e711a.js" defer></script><script src="/assets/js/148.927832d5.js" defer></script><script src="/assets/js/16.acd3428d.js" defer></script><script src="/assets/js/8.5b4b6c67.js" defer></script><script src="/assets/js/10.58f97cc7.js" defer></script><script src="/assets/js/17.0b7a5267.js" defer></script>
  </body>
</html>
