(window.webpackJsonp=window.webpackJsonp||[]).push([[135],{731:function(t,e,n){"use strict";n.r(e);var a=n(14),s=Object(a.a)({},(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h2",{attrs:{id:"etherchannel"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#etherchannel"}},[t._v("#")]),t._v(" EtherChannel")]),t._v(" "),n("ul",[n("li",[t._v("[ ] configure and verify Layer 2 and Layer 3 EtherChannel using LACP(Link Aggregation Control Protocol);")])]),t._v(" "),n("h3",{attrs:{id:"intro"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#intro"}},[t._v("#")]),t._v(" Intro")]),t._v(" "),n("blockquote",[n("ul",[n("li",[t._v("EtherChannel allows you to group multiple physical interfaces into a group which operates as a single logical interface, so they behave as if they are a single interface.\n"),n("ul",[n("li",[t._v("A Layer 2 Etherchannel is a group of switch ports which operate as a single interface;")]),t._v(" "),n("li",[t._v("a Layer 3 Etherchannel is a group of routed port which operate as a single interface, which you assign an IP address to, because it’s Layer 3.")])])])])]),t._v(" "),n("h5",{attrs:{id:"the-problem-without-etherchannel"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#the-problem-without-etherchannel"}},[t._v("#")]),t._v(" The problem without Etherchannel")]),t._v(" "),n("img",{staticStyle:{zoom:"38%"},attrs:{src:"https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202303292353185.png",alt:"image-20230329235325076"}}),t._v(" "),n("blockquote",[n("ul",[n("li",[t._v("ASW1: "),n("em",[t._v("Access layer Switch")]),t._v(", a switch that "),n("em",[t._v("end hosts")]),t._v(" connect to;")]),t._v(" "),n("li",[t._v("DSW1: "),n("em",[t._v("Distribution layer switch")]),t._v(", a switch that "),n("em",[t._v("access layer switches")]),t._v(" connect to;")]),t._v(" "),n("li",[t._v("When the bandwidth of the interfaces connected to end hosts is greater than the bandwidth of the connection to the distribution switch(es), this is called "),n("strong",[t._v("Over-Subscription")]),t._v(".  Some oversubscription is acceptable, but too much will cause congestion.")])]),t._v(" "),n("h5",{attrs:{id:"problems"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#problems"}},[t._v("#")]),t._v(" Problems:")]),t._v(" "),n("ul",[n("li",[n("p",[t._v("Because of STP,")]),t._v(" "),n("ul",[n("li",[n("p",[t._v("If you connect two switches together with multiple links, all except one will be disabled by spanning tree. Other links will be unused unless the active link fails.")])]),t._v(" "),n("li",[n("p",[t._v("if all of ASW1’s interfaces were forwarding, Layer 2 loops would form between ASW1 and DSW1, leading to Broadcast Storms.")])])])])]),t._v(" "),n("h5",{attrs:{id:"solution"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#solution"}},[t._v("#")]),t._v(" Solution:")]),t._v(" "),n("p",[t._v("However, by forming these four physical interfaces into one logical interface, "),n("strong",[t._v("EtherChannel")]),t._v(" can solve this problem, giving us "),n("em",[t._v("both redundancy and increased bandwidth")]),t._v(".")])]),t._v(" "),n("h3",{attrs:{id:"etherchannel-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#etherchannel-2"}},[t._v("#")]),t._v(" Etherchannel")]),t._v(" "),n("img",{staticStyle:{zoom:"38%"},attrs:{src:"https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202303300003921.png",alt:"image-20230330000351819"}}),t._v(" "),n("blockquote",[n("ul",[n("li",[n("p",[t._v("An EtherChannel is represented in network diagrams by "),n("strong",[t._v("drawing a circle")]),t._v(" around the interfaces")]),t._v(" "),n("p",[t._v("that are grouped together; Some other names for an EtherChannel are:")]),t._v(" "),n("ul",[n("li",[t._v("Port Channel")]),t._v(" "),n("li",[t._v("LAG (Link Aggregation Group)")])])]),t._v(" "),n("li",[n("p",[t._v("EtherChannel "),n("strong",[t._v("groups multiple interfaces together to act as a single (virtual) interface")]),t._v(".")]),t._v(" "),n("ul",[n("li",[n("em",[t._v("STP will treat this group as a single interface.")])]),t._v(" "),n("li",[t._v("The bandwidth of the "),n("em",[t._v("four separate")]),t._v(" interfaces is combined to form "),n("em",[t._v("one 4-times")]),t._v(" bandwidth interface,")])]),t._v(" "),n("img",{staticStyle:{zoom:"33%"},attrs:{src:"https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202303300009516.png",alt:"image-20230330000938418"}})]),t._v(" "),n("li",[n("p",[t._v("Traffic using the EtherChannel will be "),n("strong",[t._v("load balanced")]),t._v(" among the physical interfaces in the group. An algorithm is used to determine which traffic will use which physical interface.")]),t._v(" "),n("img",{staticStyle:{zoom:"31%"},attrs:{src:"https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202303300015653.png",alt:"image-20230330001518549"}}),t._v(" "),n("ul",[n("li",[t._v("EtherChannel load balances based on ‘"),n("strong",[t._v("flows")]),t._v("’. A flow is a communication between two nodes in the network.")]),t._v(" "),n("li",[n("strong",[t._v("Frames in the same flow will be forwarded using the same physical interface.")]),t._v(" "),n("ul",[n("li",[t._v("If frames in the same flow were forwarded using different physical interfaces, some frames\nmay arrive at the destination out of order, which could cause problems.")]),t._v(" "),n("li",[t._v("Some applications can deal with frames arriving out of order, but some applications can’t.")])])]),t._v(" "),n("li",[t._v("The algorithm that is done to determine which physical interface to use takes into account a few inputs:\n"),n("ul",[n("li",[t._v("MAC address:\n"),n("ul",[n("li",[n("em",[t._v("Source MAC address")]),t._v(",")]),t._v(" "),n("li",[n("em",[t._v("Destination MAC address")]),t._v(",")]),t._v(" "),n("li",[n("em",[t._v("Src & Dest MAC addresses")])])])]),t._v(" "),n("li",[t._v("IP address:\n"),n("ul",[n("li",[n("em",[t._v("Source IP")]),t._v(",")]),t._v(" "),n("li",[n("em",[t._v("Dest IP")]),t._v(",")]),t._v(" "),n("li",[n("em",[t._v("Src & Dest IP addresses")]),t._v(";")])])]),t._v(" "),n("li",[t._v("Some switches also support load-balancing based on the "),n("em",[t._v("Layer 4 TCP or UDP port numbers")]),t._v(";")])])])])])]),t._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# check the load-balancing method ")]),t._v("\nASW1"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#show etherchannel load-balance ")]),t._v("\nEtherChannel Load-Balancing Operational State "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("src-mac"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(":\nNon-IP: Source MAC address         \n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# if an IP packet isn’t encapsulated in the Ethernet frame, there is no IP address that can be used to determine the load-balancing, so the MAC addresses are used instead.   ")]),t._v("\n  IPv4: Source MAC address\n  IPv6: Source MAC address\n\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# change the load-balancing method ")]),t._v("\nASW1"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#conf t")]),t._v("\nASW1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("config"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#port-channel load-balance ?")]),t._v("\n  dst-ip       Dst IP Addr\n  dst-mac      Dst Mac Addr\n  src-dst-ip   Src XOR Dst IP Addr\n  src-dst-mac  Src XOR Dst Mac Addr\n  src-ip       Src IP Addr\n  src-mac      Src Mac Addr\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br")])])]),t._v(" "),n("h3",{attrs:{id:"etherchannel-protocols"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#etherchannel-protocols"}},[t._v("#")]),t._v(" Etherchannel Protocols")]),t._v(" "),n("h4",{attrs:{id:"intro-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#intro-2"}},[t._v("#")]),t._v(" Intro")]),t._v(" "),n("blockquote",[n("p",[t._v("There are three methods of EtherChannel configuration on Cisco switches:")]),t._v(" "),n("h5",{attrs:{id:"pagp-端口聚合协议"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#pagp-端口聚合协议"}},[t._v("#")]),t._v(" PAgP "),n("code",[t._v("端口聚合协议")])]),t._v(" "),n("ul",[n("li",[n("p",[t._v("(Port Aggregation Protocol)")])]),t._v(" "),n("li",[n("p",[t._v("Cisco proprietary protocol")])]),t._v(" "),n("li",[n("p",[t._v("Dynamically negotiates the creation/maintenance of the EtherChannel. (like DTP does for trunks)")])])]),t._v(" "),n("h5",{attrs:{id:"lacp-链路聚合控制协议-recommended"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#lacp-链路聚合控制协议-recommended"}},[t._v("#")]),t._v(" LACP: "),n("code",[t._v("链路聚合控制协议")]),t._v(" ==Recommended!==")]),t._v(" "),n("ul",[n("li",[n("p",[t._v("(Link Aggregation Control Protocol)")])]),t._v(" "),n("li",[n("p",[t._v("Industry standard protocol ("),n("strong",[t._v("IEEE 802.3AD")]),t._v(")")])]),t._v(" "),n("li",[n("p",[t._v("Dynamically negotiates the creation/maintenance of the EtherChannel. (like DTP does for trunks)")])])]),t._v(" "),n("blockquote",[n("p",[n("strong",[t._v("Up to 8 interfaces")]),t._v(" can be formed into a single EtherChannel ("),n("strong",[t._v("LACP allows up to 16")]),t._v(", "),n("em",[t._v("but only 8 will be active")]),t._v(", the other 8 will be in standby mode, waiting for an active interface to fail)")])]),t._v(" "),n("h5",{attrs:{id:"static-etherchannel"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#static-etherchannel"}},[t._v("#")]),t._v(" Static EtherChannel")]),t._v(" "),n("ul",[n("li",[t._v("A protocol isn’t used to determine if an EtherChannel should be formed.")]),t._v(" "),n("li",[t._v("Interfaces are statically configured to form an EtherChannel.")])])]),t._v(" "),n("h4",{attrs:{id:"modes"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#modes"}},[t._v("#")]),t._v(" Modes")]),t._v(" "),n("blockquote",[n("h5",{attrs:{id:"static-etherchannel-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#static-etherchannel-2"}},[t._v("#")]),t._v(" Static Etherchannel:")]),t._v(" "),n("ul",[n("li",[n("code",[t._v("on")]),t._v(" Mode that forces the LAN port to form Etherchannel "),n("strong",[t._v("without using negotiation protocol")]),t._v(".")]),t._v(" "),n("li",[t._v("In the "),n("code",[t._v("on")]),t._v(" mode, a usable EtherChannel exists "),n("strong",[t._v("only when")]),t._v(" "),n("em",[t._v("a LAN port group in the "),n("code",[t._v("on")]),t._v(" mode")]),t._v(" is connected to "),n("em",[t._v("another LAN port group in the "),n("code",[t._v("on")]),t._v(" mode")]),t._v(". Because ports configured in the on mode do not negotiate, there is no negotiation traffic between the ports. You cannot configure the on mode with an EtherChannel protocol. "),n("strong",[t._v("If one end uses the on mode, the other end must also.")])])]),t._v(" "),n("h5",{attrs:{id:"pagp-协议"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#pagp-协议"}},[t._v("#")]),t._v(" PAgP 协议")]),t._v(" "),n("ul",[n("li",[t._v("==auto==: PAgP mode that places a LAN port into a "),n("em",[t._v("passively")]),t._v(" negotiating state, in which the port responds to PAgP packets it receives but does not initiate PAgP negotiation. "),n("strong",[t._v("(Default)")])]),t._v(" "),n("li",[t._v("==desirable==: PAgP mode that places a LAN port into an "),n("em",[t._v("actively")]),t._v(" negotiating state, in which the port initiates negotiations with other LAN ports by sending PAgP packets.")])]),t._v(" "),n("h5",{attrs:{id:"lacp-协议"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#lacp-协议"}},[t._v("#")]),t._v(" LACP 协议")]),t._v(" "),n("ul",[n("li",[n("p",[t._v("==passive==: LACP mode that places a port into a "),n("em",[t._v("passively")]),t._v(" negotiating state, in which the port responds to LACP packets it receives but does not initiate LACP negotiation. "),n("strong",[t._v("(Default)")])])]),t._v(" "),n("li",[n("p",[t._v("==active==: LACP mode that places a port into an "),n("em",[t._v("actively")]),t._v(" negotiating state, in which the port initiates negotiations with other ports by sending LACP packets.")])])]),t._v(" "),n("p",[t._v("Reference: "),n("a",{attrs:{href:"https://www.cisco.com/c/en/us/td/docs/switches/lan/catalyst4500/12-2/3-1-1SG/configuration/guide/config/channel.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://www.cisco.com/c/en/us/td/docs/switches/lan/catalyst4500/12-2/3-1-1SG/configuration/guide/config/channel.html"),n("OutboundLink")],1)])]),t._v(" "),n("blockquote",[n("h4",{attrs:{id:"summary-of-valid-modes"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#summary-of-valid-modes"}},[t._v("#")]),t._v(" Summary of valid modes")]),t._v(" "),n("ul",[n("li",[t._v("Static: "),n("code",[t._v("on")]),t._v(" <-> "),n("code",[t._v("on")])]),t._v(" "),n("li",[t._v("PAgP\n"),n("ul",[n("li",[n("code",[t._v("auto")]),t._v(" <-> "),n("code",[t._v("desirable")])]),t._v(" "),n("li",[n("code",[t._v("desirable")]),t._v(" <-> "),n("code",[t._v("desirable")])])])]),t._v(" "),n("li",[t._v("LACP:\n"),n("ul",[n("li",[n("code",[t._v("passive")]),t._v(" <-> "),n("code",[t._v("active")])]),t._v(" "),n("li",[n("code",[t._v("active")]),t._v(" <-> "),n("code",[t._v("active")])])])])])]),t._v(" "),n("h3",{attrs:{id:"configuration"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#configuration"}},[t._v("#")]),t._v(" Configuration")]),t._v(" "),n("h4",{attrs:{id:"initiate-an-etherchannel"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#initiate-an-etherchannel"}},[t._v("#")]),t._v(" Initiate an Etherchannel")]),t._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[t._v("ASW1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("config"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#interface range g0/1-2")]),t._v("\nASW1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("config-if-range"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#channel-?")]),t._v("\nchannel-group  channel-protocol  \n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# channel-group")]),t._v("\nASW1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("config-if-range"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#channel-group ?")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("-"),n("span",{pre:!0,attrs:{class:"token operator"}},[n("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("6")]),t._v(">")]),t._v("  Channel group number\nASW1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("config-if-range"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#channel-group 1 mode ?")]),t._v("\n  active     Enable LACP unconditionally\n  auto       Enable PAgP only "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" a PAgP device is detected\n  desirable  Enable PAgP unconditionally\n  on         Enable Etherchannel only\n  passive    Enable LACP only "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" a LACP device is detected\n\nASW1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("config-if-range"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#channel-group 1 mode active")]),t._v("\n  \n  \n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# channnel-protocol , this command is Useless, because last command can auto set the Ethnerchannel Type")]),t._v("\nASW1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("config-if-range"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#channel-protocol ?")]),t._v("\n  lacp  Prepare interface "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" LACP protocol\n  pagp  Prepare interface "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" PAgP protocol\n  \n  \n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 省略 DSW1 的命令")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br"),n("span",{staticClass:"line-number"},[t._v("19")]),n("br"),n("span",{staticClass:"line-number"},[t._v("20")]),n("br"),n("span",{staticClass:"line-number"},[t._v("21")]),n("br"),n("span",{staticClass:"line-number"},[t._v("22")]),n("br"),n("span",{staticClass:"line-number"},[t._v("23")]),n("br"),n("span",{staticClass:"line-number"},[t._v("24")]),n("br")])]),n("blockquote",[n("ul",[n("li",[t._v("Remember that the "),n("code",[t._v("channel-group")]),t._v(" command is used to configure the etherchannel, but the name of the virtual interface that is created is "),n("strong",[t._v("port-channel")]),t._v(".")]),t._v(" "),n("li",[t._v("The "),n("em",[t._v("channel-group number")]),t._v(" has to match for member interfaces on the same switch. However, it doesn’t have to match the channel-group number on the other switch. (channel-group 1 on ASW1 can form an EtherChannel with channel-group 2 on DSW1)")])])]),t._v(" "),n("h4",{attrs:{id:"configure-the-port-channel-interface"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#configure-the-port-channel-interface"}},[t._v("#")]),t._v(" configure the port-channel interface")]),t._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[t._v("ASW1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("config"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#interface port-channel ?")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("-"),n("span",{pre:!0,attrs:{class:"token operator"}},[n("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("6")]),t._v(">")]),t._v("  Port-channel interface number\nASW1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("config"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#interface port-channel 1")]),t._v("\nASW1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("config-if"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#?")]),t._v("\n  arp             Set arp "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("type")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("arpa, probe, snap"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" or "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("timeout")]),t._v("\n  bandwidth       Set bandwidth informational parameter\n  cdp             Global CDP configuration subcommands\n  delay           Specify interface throughput delay\n  description     Interface specific description\n  duplex          Configure duplex operation.\n  "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("exit")]),t._v("            Exit from interface configuration mode\n  hold-queue      Set hold queue depth\n  no              Negate a "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("command")]),t._v(" or "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("set")]),t._v(" its defaults\n  service-policy  Configure QoS Service Policy\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("shutdown")]),t._v("        Shutdown the selected interface\n  spanning-tree   Spanning Tree Subsystem\n  speed           Configure speed operation.\n  storm-control   storm configuration\n  switchport      Set switching mode characteristics\n  tx-ring-limit   Configure PA level transmit ring limit\nASW1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("config-if"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#switchport ?")]),t._v("\n  access         Set access mode characteristics of the interface\n  mode           Set trunking mode of the interface\n  nonegotiate    Device will not engage "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" negotiation protocol on this\n                 interface\n  port-security  Security related "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("command")]),t._v("\n  priority       Set appliance "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("802")]),t._v(".1p priority\n  protected      Configure an interface to be a protected port\n  trunk          Set trunking characteristics of the interface\n  voice          Voice appliance attributes\n  \nASW1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("config-if"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#switchport trunk encapsulation dot1q  # the command maybe not exist if support dot1q")]),t._v("\n\nASW1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("config-if"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#switchport mode trunk ")]),t._v("\n\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 省略 DSW1 的命令")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br"),n("span",{staticClass:"line-number"},[t._v("19")]),n("br"),n("span",{staticClass:"line-number"},[t._v("20")]),n("br"),n("span",{staticClass:"line-number"},[t._v("21")]),n("br"),n("span",{staticClass:"line-number"},[t._v("22")]),n("br"),n("span",{staticClass:"line-number"},[t._v("23")]),n("br"),n("span",{staticClass:"line-number"},[t._v("24")]),n("br"),n("span",{staticClass:"line-number"},[t._v("25")]),n("br"),n("span",{staticClass:"line-number"},[t._v("26")]),n("br"),n("span",{staticClass:"line-number"},[t._v("27")]),n("br"),n("span",{staticClass:"line-number"},[t._v("28")]),n("br"),n("span",{staticClass:"line-number"},[t._v("29")]),n("br"),n("span",{staticClass:"line-number"},[t._v("30")]),n("br"),n("span",{staticClass:"line-number"},[t._v("31")]),n("br"),n("span",{staticClass:"line-number"},[t._v("32")]),n("br"),n("span",{staticClass:"line-number"},[t._v("33")]),n("br"),n("span",{staticClass:"line-number"},[t._v("34")]),n("br"),n("span",{staticClass:"line-number"},[t._v("35")]),n("br"),n("span",{staticClass:"line-number"},[t._v("36")]),n("br"),n("span",{staticClass:"line-number"},[t._v("37")]),n("br")])]),n("blockquote",[n("p",[n("strong",[t._v("Important")]),t._v(":")]),t._v(" "),n("ul",[n("li",[n("p",[t._v("Member interfaces(the physical interfaces) in the EtherChannel, must have matching configurations:")]),t._v(" "),n("ul",[n("li",[n("p",[t._v("Same duplex (full/half)")])]),t._v(" "),n("li",[n("p",[t._v("Same speed")])]),t._v(" "),n("li",[n("p",[t._v("Same switchport mode (access/trunk)")])]),t._v(" "),n("li",[n("p",[t._v("Same allowed VLANs/native VLAN (for trunk interfaces)")])])])]),t._v(" "),n("li",[n("p",[t._v("If an interface’s configurations do not match the others, it will be excluded from the EtherChannel.")])])])]),t._v(" "),n("h4",{attrs:{id:"check-the-status-of-an-etherchannel"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#check-the-status-of-an-etherchannel"}},[t._v("#")]),t._v(" Check the status of an EtherChannel")]),t._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[t._v("ASW1"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#show etherchannel ?")]),t._v("\n  load-balance  Load-balance/frame-distribution scheme among ports "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v("\n                port-channel\n  port-channel  Port-channel information\n  summary       One-line summary per channel-group\n  "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("cr"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  \nASW1"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#show etherchannel summary")]),t._v("\nASW1"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#show etherchannel port-channel")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br")])]),n("img",{staticStyle:{zoom:"40%"},attrs:{src:"https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202303300246804.png",alt:"image-20230330024612582"}}),t._v(" "),n("img",{staticStyle:{zoom:"40%"},attrs:{src:"https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202303300246610.png",alt:"image-20230330024638386"}}),t._v(" "),n("img",{staticStyle:{zoom:"42%"},attrs:{src:"https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202303300246236.png",alt:"image-20230330024655022"}}),t._v(" "),n("img",{staticStyle:{zoom:"45%"},attrs:{src:"https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202303300249069.png",alt:"image-20230330024934887"}}),t._v(" "),n("img",{staticStyle:{zoom:"33%"},attrs:{src:"https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202303300250633.png",alt:"image-20230330025018431"}}),t._v(" "),n("h3",{attrs:{id:"layer-3-etherchannel"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#layer-3-etherchannel"}},[t._v("#")]),t._v(" Layer-3 Etherchannel")]),t._v(" "),n("blockquote",[n("p",[t._v("Modern network design often leans toward using Layer 3 connections between switches, because that way spanning-tree won’t be an issue anywhere in the network.")]),t._v(" "),n("img",{staticStyle:{zoom:"33%"},attrs:{src:"https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202303300253867.png",alt:"image-20230330025353727"}}),t._v(" "),n("img",{staticStyle:{zoom:"33%"},attrs:{src:"https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202303300254358.png",alt:"image-20230330025416216"}})]),t._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[t._v("DSW1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("config"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#interface range g1/0/3 - 4")]),t._v("\nDSW1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("config-if-range"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#no switchport ")]),t._v("\nDSW1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("config-if-range"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#channel-group 1 mode active ")]),t._v("\nCreating a port-channel interface Port-channel "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br")])]),n("blockquote",[n("p",[n("strong",[t._v("Note:")]),t._v(" use the "),n("code",[t._v("no switchport")]),t._v(" command to make them Layer 3 routed interfaces, which can don't worry about STP.")])]),t._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[t._v("DSW1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("config"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#interface port-channel 1")]),t._v("\nDSW1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("config-if"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#ip address 10.0.0.1 255.255.255.252   # already in up state, no need to execute `no shutdown` ")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br")])]),n("img",{staticStyle:{zoom:"39%"},attrs:{src:"https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202303300305690.png",alt:"image-20230330030530484"}}),t._v(" "),n("img",{staticStyle:{zoom:"40%"},attrs:{src:"https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202303291027093.png",alt:"image-20220622025022846"}}),t._v(" "),n("h3",{attrs:{id:"commands-summary"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#commands-summary"}},[t._v("#")]),t._v(" Commands summary")]),t._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[t._v("Sw"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("config"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# port-channel load-balance mode ")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#configures the EtherChannel load-balancing method on the switch ")]),t._v("\n\nSW"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# show etherchannel load-balance ")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#displays information about the load-balancing settings ")]),t._v("\n\nSw"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("config-if"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# channel-group number mode { desirable | auto | active | passive } ")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#configures an interface to be part of an EtherChannel ")]),t._v("\n\nSW"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# show etherchannel summary ")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#displays a summary of EtherChannels on the switch ")]),t._v("\n\nSwW"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# show etherchannel port-channel ")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#displays information about the virtual port-channel interfaces on the switch")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br")])]),n("h3",{attrs:{id:"quiz"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#quiz"}},[t._v("#")]),t._v(" Quiz:")]),t._v(" "),n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202303300312279.png",alt:"image-20230330031230980"}})]),t._v(" "),n("h1",{attrs:{id:"vss-堆叠"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#vss-堆叠"}},[t._v("#")]),t._v(" VSS & 堆叠")]),t._v(" "),n("p",[t._v("VSS: 虚拟交换系统, 捆绑交换机")]),t._v(" "),n("p",[t._v("堆叠线:")]),t._v(" "),n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/Jonas-Wolfxin/MyPicgo/img/202303291027527.png",alt:"image-20220622183035295"}})])])}),[],!1,null,null,null);e.default=s.exports}}]);