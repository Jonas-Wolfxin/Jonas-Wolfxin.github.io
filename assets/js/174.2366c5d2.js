(window.webpackJsonp=window.webpackJsonp||[]).push([[174],{773:function(s,a,t){"use strict";t.r(a);var n=t(14),e=Object(n.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"ansible常用模块"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ansible常用模块"}},[s._v("#")]),s._v(" ansible常用模块")]),s._v(" "),t("blockquote",[t("p",[s._v("模块文档："),t("a",{attrs:{href:"https://docs.ansible.com/ansible/latest/modules/modules_by_category.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://docs.ansible.com/ansible/latest/modules/modules_by_category.html"),t("OutboundLink")],1)])]),s._v(" "),t("h3",{attrs:{id:"command-module"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#command-module"}},[s._v("#")]),s._v(" Command module")]),s._v(" "),t("blockquote",[t("p",[s._v("在远程主机执行命令，为ansible的默认模块，可忽略"),t("code",[s._v("-m command")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("ansible srvs -m "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("command")]),s._v(" -a "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'service vsftpd start'")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@Ansible ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ansible-doc command -s")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 两个条件判断")]),s._v("\n creates:  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# A filename or (since 2.0) glob pattern. If it already exists, this step *won't* be run.")]),s._v("\n    removes:  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# A filename or (since 2.0) glob pattern. If it already exists, this step *will* be run.")]),s._v("\n    chdir:                 "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Change into this directory before running the command.")]),s._v("\n  \nansible "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'192.168.30.102'")]),s._v(" -a "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'removes=/etc/aliases cat /etc/aliases'")]),s._v("\nansible "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'192.168.30.102'")]),s._v(" -a "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'df -h'")]),s._v("\nansible "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'192.168.30.102'")]),s._v(" -a "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'chdir=/boot ls'")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])]),t("ul",[t("li",[t("p",[s._v("command模块不支持 "),t("code",[s._v("$VARNAME")]),s._v(", "),t("code",[s._v("<")]),s._v(", "),t("code",[s._v(">")]),s._v(", "),t("code",[s._v(">>")]),s._v(" "),t("code",[s._v("|")]),s._v(" 等, 需要用shell模块实现")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 在远程主机上添加用户并设置密码")]),s._v("\nansible "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'*.102'")]),s._v(" -a "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'useradd robbie'")]),s._v("\nansible "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'*.102'")]),s._v(" -a "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'echo robbie123 | passwd --stdin robbie'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 会发现密码并未设置, 而只是echo 出来了")]),s._v("\nansible "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'*.102'")]),s._v(" -a "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'cat /etc/shadow | grep robbie'")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 会发现 | 之后的grep并未执行")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])])])])]),s._v(" "),t("h3",{attrs:{id:"shell-module"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#shell-module"}},[s._v("#")]),s._v(" Shell module")]),s._v(" "),t("blockquote",[t("p",[s._v("Shell 模块可以提供 command 模块所有的功能, 且更加强大. 此模块可替代 command 模块.")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 修改配置文件, 使shell作为默认模块")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/ansible/ansible.cfg\n    module_name "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" shell\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("blockquote",[t("p",[s._v("虽然 "),t("code",[s._v("ansible")]),s._v(" 中的 "),t("code",[s._v("shell")]),s._v(" 模块和 "),t("code",[s._v("command")]),s._v(" 模块都可以用于在远程主机上执行命令，但它们之间有一些区别：")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("command")]),s._v(" 模块在远程主机上直接执行给定的命令，而 "),t("code",[s._v("shell")]),s._v(" 模块则将命令传递给shell（通常是Bash），然后在该shell中执行命令。因此，使用 "),t("code",[s._v("shell")]),s._v(" 模块可以使用shell特性，例如通配符，管道和重定向等。")]),s._v(" "),t("li",[s._v("由于 "),t("code",[s._v("command")]),s._v(" 模块不需要shell解释器，因此它通常比 "),t("code",[s._v("shell")]),s._v(" 模块更快。此外，使用 "),t("code",[s._v("command")]),s._v(" 模块可以减少潜在的安全风险，因为它不会使用远程主机上的shell。")]),s._v(" "),t("li",[s._v("但是，使用 "),t("code",[s._v("command")]),s._v(" 模块时，命令字符串中的变量将不会被解析，因为它不会使用shell解释器。而 "),t("code",[s._v("shell")]),s._v(" 模块会解释命令字符串中的变量。")])]),s._v(" "),t("p",[s._v("所以，如果你需要使用shell特性或者需要在命令字符串中使用变量，则应该使用 "),t("code",[s._v("shell")]),s._v(" 模块。如果你不需要这些功能或想要最小化安全风险，则可以使用 "),t("code",[s._v("command")]),s._v(" 模块。")])]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置远程主机上指定用户的密码")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@Ansible ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ansible '*.102' -m shell -a 'echo robbie123 | passwd --stdin robbie'")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@Ansible ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ssh robbie@192.168.30.102")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("ansible all -m shell  -a "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'getenforce'")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看SELINUX状态")]),s._v("\nansible "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'*.102'")]),s._v(" -m shell  -a "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("\"sed -i 's/SELINUX=.*/SELINUX=disabled' /etc/selinux/config\"")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 执行失败")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("调用bash执行命令 类似 "),t("code",[s._v("cat /tmp/stanley.md | awk -F'|' '{print $1,$2}' &> /tmp/example.txt")]),s._v("这些复杂命令，即使使用shell也可能会失败.\n**解决办法：**写成脚本后拷贝到受控机后再执行，再把需要的结果返回主控机")])]),s._v(" "),t("h3",{attrs:{id:"script-module"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#script-module"}},[s._v("#")]),s._v(" Script module")]),s._v(" "),t("blockquote",[t("p",[s._v("在远程主机上运行ansible主控机上的脚本: "),t("code",[s._v('ansible -m script -a "/PATH/TO/SCRIPT_FILE" 受控机')])]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@Ansible ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ansible-doc script -s")]),s._v("\n- name: Runs a "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("local")]),s._v(" script on a remote "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("node")]),s._v(" after transferring it\n  script:\n      chdir:                 "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Change into this directory on the remote node before running")]),s._v("\n                               the script.\n      cmd:                   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Path to the local script to run followed by optional")]),s._v("\n                               arguments.\n      creates:               "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# A filename on the remote node, when it already exists, this")]),s._v("\n                               step will *not* be run.\n      decrypt:               "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# This option controls the autodecryption of source files using")]),s._v("\n                               vault.\n      executable:            "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Name or path of a executable to invoke the script with.")]),s._v("\n      free_form:             "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Path to the local script file followed by optional arguments.")]),s._v("\n      removes:               "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# A filename on the remote node, when it does not exist, this")]),s._v("\n                               step will *not* be run.\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br")])]),t("h5",{attrs:{id:"示例"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#示例"}},[s._v("#")]),s._v(" 示例")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@Ansible ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# vim hostname.sh")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 添加内容:")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#!/bin/bash")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("hostname")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@Ansible ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# chmod +x hostname.sh")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@Ansible ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ansible '*.102' -m script -a './hostname.sh'")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".30.102 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" CHANGED "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"changed"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" true, \n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"rc"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(", \n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"stderr"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Shared connection to 192.168.30.102 closed.'),t("span",{pre:!0,attrs:{class:"token entity",title:"\\r"}},[s._v("\\r")]),t("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v('"')]),s._v(", \n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"stderr_lines"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Shared connection to 192.168.30.102 closed."')]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(", \n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"stdout"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"node2'),t("span",{pre:!0,attrs:{class:"token entity",title:"\\r"}},[s._v("\\r")]),t("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v('"')]),s._v(", \n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"stdout_lines"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"node2"')]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# hostname为 node2, 成功执行")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br")])])]),s._v(" "),t("h3",{attrs:{id:"copy-module"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#copy-module"}},[s._v("#")]),s._v(" Copy module")]),s._v(" "),t("p",[s._v("从主控端复制文件到远程主机")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@Ansible ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ansible-doc copy -s")]),s._v("\n src "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" 源文件  指定拷贝文件的本地路径  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("如果有/ 则拷贝目录内容,比拷贝目录本身"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    dest: 指定目标路径\n    mode: 设置权限码\n    backup: 如果目标存在，默认覆盖"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" 备份源文件 "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("backup")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("yes\n    content: 代替src,  指定文件内容, 直接在受控机上生成文件\n\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@Ansible ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ansible all -m copy -a 'src=/etc/resolv.conf dest=/etc/resolv.conf backup=yes'")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@Ansible ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ansible all -m copy -a 'content=\"test content\\nhello world!\" dest=/root/test.txt'")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])]),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@Ansible ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ansible all -a 'getenforce'")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@Ansible ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cp /etc/sysconfig/selinux /root/  # /etc/sysconfig/selinux是软链接, 原文件是 /etc/selinux/config")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@Ansible ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# vim ./selinux")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("SELINUX")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("disabled   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 关闭selinux")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@Ansible ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ansible all -m copy -a 'src=/root/selinux dest=/etc/selinux/config mode=644 backup=yes'")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@Ansible ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ansible  all -a 'rm -f /etc/selinux/config.*' # 删除备份文件")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@Ansible ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ansible all -a 'reboot'  # 重启, 使selinux配置文件生效")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("h3",{attrs:{id:"fetch-module"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#fetch-module"}},[s._v("#")]),s._v(" Fetch module")]),s._v(" "),t("blockquote",[t("ul",[t("li",[t("p",[s._v("从受控机获取文件至主控端，与copy相反，目前仅支持单个文件, 不支持目录; 但是可以先打包, 再获取压缩包")])]),s._v(" "),t("li",[t("p",[s._v("会生成每个被管理主机不同编号的目录,不会发生文件名冲突")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@Ansible ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ansible-doc fetch -s")]),s._v("\n dest:  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# (required) A directory to save the file into.")]),s._v("\n src:   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# (required)The file on the remote system to fetch. This `must'be a file, not a directory.")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 示例")]),s._v("\nansible all -m shell -a "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'tar -zcvf test.tar.gz /tmp/test.txt'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 后续介绍专门的模块")]),s._v("\nansible all -m fetch -a "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'src=/root/test.tar.gz dest=/root/data/'")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" data/192.168.30.101/root/\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" -zxvf test.tar.gz -C ./    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 解压到当前目录pwd")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" tmp/test.txt\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])])])])]),s._v(" "),t("h3",{attrs:{id:"file-module"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#file-module"}},[s._v("#")]),s._v(" File module")]),s._v(" "),t("blockquote",[t("p",[s._v("设置文件属性")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@Ansible ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ansible-doc -s file")]),s._v("\n path:     "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# (required) Path to the file being managed.")]),s._v("\n    recurse:  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Recursively set the specified file attributes on directory contents. This applies only")]),s._v("\n                               when "),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v("state' is "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" to "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("directory"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'.\n    src:  # Path of the file to link to. This applies only to `state=link'")]),s._v(" and `state"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("hard'.\n    state: 状态\n     "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("state")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("touch  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 在已存在的目录下创建文件")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("state")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("absent "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# directories will be recursively deleted, and files or symlinks will be unlinked.")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("state")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("link "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建软链接        ")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("state")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("hard "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建硬链接")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])]),t("blockquote",[t("p",[s._v("在Linux系统中，链接分为硬链接（hard link）和软链接（symbolic link，也叫软连接）两种。")]),s._v(" "),t("ul",[t("li",[s._v("硬链接是多个文件名指向同一个文件，而软链接是一个文件名指向另一个文件名。硬链接可以看做是文件的别名，而软链接则是一个指向目标文件的快捷方式。")]),s._v(" "),t("li",[s._v("硬链接可以在同一文件系统内创建，不能跨越文件系统。软链接可以跨越文件系统，因为它指向的是另一个文件的路径。")])])]),s._v(" "),t("h5",{attrs:{id:"示例-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#示例-2"}},[s._v("#")]),s._v(" 示例")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("ansible netnodes -m "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" -a "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'path=/root/test.txt state=touch'")]),s._v("       "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 在已存在的目录下创建文件")]),s._v("\nansible netnodes -m "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" -a "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"path=/data/testdir state=directory"')]),s._v("   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 递归创建目录")]),s._v("\nansible netnodes -m "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" -a "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"path=/data/ state=absent"')]),s._v("   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 递归删除目录    ")]),s._v("\n    \nansible netnodes -m "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" -a "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"path=/root/test.sh owner=robbie mode=755"')]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置权限755")]),s._v("\nansible netnodes -m "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" -a "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'src=/root/test.txt dest=/data/testfile-link state=link'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建软链接")]),s._v("\nansible netnodes -m "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" -a "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'path=/data/testfile-link state=absent'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除软链接")]),s._v("\nansible netnodes -a "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'ls /data/'")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])])]),s._v(" "),t("h3",{attrs:{id:"hostname"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#hostname"}},[s._v("#")]),s._v(" Hostname")]),s._v(" "),t("ul",[t("li",[s._v("使用inventory group进行批量修改的话,所有的受控机都会改为相同的主机名, 这样不好;")]),s._v(" "),t("li",[s._v("这里只推荐对单个受控机使用;")])]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@Ansible ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ansible-doc -s hostname")]),s._v("\n- name: Manage "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("hostname")]),s._v("\n  hostname:\n      name:                  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# (required) Name of the host")]),s._v("\n      use:                   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Which strategy to use to update the hostname. If not set we try to autodetect, but")]),s._v("\n                               this can be problematic, specially with containers as\n                               they can present misleading information.\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@Ansible ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ansible '192.168.30.101' -m hostname -a 'name=node1.magedu.com'")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".30.101 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" CHANGED "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ansible_facts"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ansible_domain"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"magedu.com"')]),s._v(", \n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ansible_fqdn"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"node1.magedu.com"')]),s._v(", \n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ansible_hostname"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"node1"')]),s._v(", \n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ansible_nodename"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"node1.magedu.com"')]),s._v(", \n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"discovered_interpreter_python"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/usr/bin/python"')]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(", \n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"changed"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" true, \n    "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"name"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"node1.magedu.com"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cat /etc/hostname ")]),s._v("\nnode1.magedu.com   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 配置文件也已修改")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cat /etc/hosts")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 但是本机hosts文件并未修改")]),s._v("\n::1         localhost localhost.localdomain localhost6 localhost6.localdomain6\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br")])]),t("h3",{attrs:{id:"cron-计划任务"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#cron-计划任务"}},[s._v("#")]),s._v(" Cron：计划任务")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@Ansible ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ansible-doc -s cron")]),s._v("\n  job: "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# The command to execute or, if env is set, the value of environment variable.")]),s._v("\n  支持时间：minute,hour,day,month,weekday 跟 "),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("crontab")]),s._v(" -e"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v(" 类似\n  \n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建定时任务")]),s._v("\nansible all -m "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cron")]),s._v(" -a "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'minute=* weekday=1 job=\"/usr/bin/wall FBI Warning\" name=WarningCron'")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 取消定时任务(注释掉)")]),s._v("\nansible all  -m "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cron")]),s._v(" -a "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'minute=* weekday=1 job=\"/usr/bin/wall FBI Warning\" name=WarningCron disabled=yes'")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除定时任务")]),s._v("\nansible all  -m "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cron")]),s._v(" -a "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'minute=* weekday=1 job=\"/usr/bin/wall FBI Warning\" name=WarningCron state=absent'")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br")])]),t("blockquote",[t("p",[s._v("The "),t("code",[s._v("wall Your_Message")]),s._v(" command in CentOS is used to send a message to all users who are currently logged in to the system. The message can be used for a variety of purposes such as to notify users about system maintenance, important announcements, or to send a broadcast message.")])]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@Ansible ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# vim /etc/crontab")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("SHELL")])]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/bin/bash\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("PATH")])]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/sbin:/bin:/usr/sbin:/usr/bin\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("MAILTO")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("root\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# For details see man 4 crontabs")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Example of job definition:")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# .---------------- minute (0 - 59)")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# |  .------------- hour (0 - 23)")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# |  |  .---------- day of month (1 - 31)")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# |  |  |  .------- month (1 - 12) OR jan,feb,mar,apr ...")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# |  |  |  |  .---- day of week (0 - 6) (Sunday=0 or 7) OR sun,mon,tue,wed,thu,fri,sat")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# |  |  |  |  |")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# *  *  *  *  * user-name  command to be executed")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@Ansible ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# crontab -e # 创建定时任务")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@Ansible ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# crontab -l # 查看定时任务列表")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br")])]),t("h3",{attrs:{id:"archive-module"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#archive-module"}},[s._v("#")]),s._v(" Archive module")]),s._v(" "),t("blockquote",[t("p",[s._v("打包压缩")]),s._v(" "),t("blockquote",[t("p",[s._v("ansible all -m archive -a 'path=/etc/sysconfig dest=/data/sysconfig.tar.bz2 format=bz2 owner=wang mode=0777'\n将远程主机目录打包\npath:   指定路径\ndest:   指定目标文件\nformat: 指定打包格式\nowner:  指定所属者\nmode:   设置权限")])])]),s._v(" "),t("h3",{attrs:{id:"unarchive-module"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#unarchive-module"}},[s._v("#")]),s._v(" Unarchive module")]),s._v(" "),t("blockquote",[t("p",[s._v("解包解压缩，有两种用法：\n1、将ansible主机上的压缩包传到远程主机后解压缩至特定目录，设置copy=yes.\n2、将远程主机上的某个压缩包解压缩到指定路径下，设置copy=no")]),s._v(" "),t("p",[s._v("常见参数：")]),s._v(" "),t("ul",[t("li",[s._v("copy：默认为yes，当copy=yes，拷贝的文件是从ansible主机复制到远程主机上，如果设置为copy=no，会在远程主机上寻找src源文件")]),s._v(" "),t("li",[s._v("src： 源路径，可以是ansible主机上的路径，也可以是远程主机上的路径， 如果是远程主机上的路径，则需要设置copy=no")]),s._v(" "),t("li",[s._v("dest：远程主机上的目标路径")]),s._v(" "),t("li",[s._v("mode：设置解压缩后的文件权限")])])]),s._v(" "),t("p",[s._v("示例：")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("ansible websrvs -m unarchive -a "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'src=foo.tgz dest=/var/lib/foo'")]),s._v("  \n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 默认copy为yes ,将本机目录文件解压到目标主机对应目录下")]),s._v("\nansible websrvs -m unarchive -a "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'src=/tmp/foo.zip dest=/data copy=no mode=0777'")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 解压被管理主机的foo.zip到data目录下, 并设置权限777")]),s._v("\nansible websrvs -m unarchive -a "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'src=https://example.com/example.zip dest=/data copy=no'")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("h3",{attrs:{id:"yum-module"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#yum-module"}},[s._v("#")]),s._v(" Yum module")]),s._v(" "),t("blockquote",[t("p",[s._v("管理包")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@Ansible ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ansible-doc -s yum")]),s._v("\n state: "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Whether to install (`present' or `installed', `latest'), or remove (`absent' or `removed') a package. ")]),s._v("\n list: "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Package name to run the equivalent of yum list --show-duplicates <package> against. In addition to listing packages, use can also list the following: `installed', `updates', `available' and `repos'. This parameter is mutually exclusive with `name'.")]),s._v("\n update_cache:   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Force yum to check if cache is out of date and redownload if needed. Has an effect only if state is `present' or `latest'.")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置受控机的DNS服务器地址")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@Ansible ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# echo nameserver 8.8.8.8 > /etc/resolv.conf")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@Ansible ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ansible all -m copy -a 'src=/etc/resolv.conf dest=/etc/resolv.conf backup=yes'")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@Ansible ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ansible all -a 'systemctl restart network'")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("ansible netnodes -m yum -a "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'name=vsftpd,httpd,vim state=present'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装")]),s._v("\nansible netnodes -m yum -a "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'name=vsftpd state=absent'")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#删除")]),s._v("\n\nansible netnodes -a "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'rpm -q vsftpd'")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看是否安装 vsftpd")]),s._v("\n\nansible all -m yum -a "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'list=httpd yumstate=installed'")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看已安装的指定程序")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装epel源")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@Ansible ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ansible all -a 'wget https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm'")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装本地已下载好的rpm安装包")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@Ansible ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ansible all -m yum -a 'name=/root/epel-release-latest-7.noarch.rpm'")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])])]),s._v(" "),t("h3",{attrs:{id:"service-module"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#service-module"}},[s._v("#")]),s._v(" Service module")]),s._v(" "),t("p",[s._v("服务管理")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@Ansible ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ansible-doc -s service")]),s._v("\nansible all -m "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" -a "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'name=httpd state=stopped'")]),s._v("  停止服务\nansible all -m "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" -a "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'name=httpd state=started enabled=yes'")]),s._v(" 启动服务,并设为开机自启\nansible all -m "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" -a "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'name=httpd state=reloaded'")]),s._v("  重新加载\nansible all -m "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" -a "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'name=httpd state=restarted'")]),s._v(" 重启服务\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("h3",{attrs:{id:"user-module"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#user-module"}},[s._v("#")]),s._v(" User module")]),s._v(" "),t("p",[s._v("用户管理")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@Ansible ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ansible-doc -s user")]),s._v("\n    home   指定家目录路径\n    system 指定系统账号\n    group  指定组\n    remove 清除账户\n    shell  指定shell类型\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@Ansible ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ansible netnodes -m user -a 'name=nginx shell=/sbin/nologin system=yes home=/var/nginx groups=root,bin uid=1543 comment=\"Nginx Server account\"'")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@Ansible ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ansible netnodes -a 'getent passwd nginx'")]),s._v("\n\nansible netso -m user -a "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'name=user1 comment=\"test user\" uid=2048 home=/app/user1 group=root'")]),s._v("\nansible netso -m user -a "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'name=sysuser1 system=yes home=/app/sysuser1'")]),s._v("\nansible netso -m user -a "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'name=user1 state=absent remove=yes'")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 清空用户所有数据(包括其家目录)")]),s._v("\nansible netso -m user -a "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'name=app uid=88 system=yes home=/app groups=root shell=/sbin/nologin password=\"$1$zfVojmPy$ZILcvxnXljvTI2PhP2Iqv1\"'")]),s._v("  创建用户\nansible netso -m user -a "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'name=app state=absent'")]),s._v("  不会删除家目录\n\n安装mkpasswd \nyum insatll "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("expect")]),s._v(" \nmkpasswd 生成口令\nopenssl "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("passwd")]),s._v(" -1  生成加密口令\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br")])]),t("h3",{attrs:{id:"group-module-管理组"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#group-module-管理组"}},[s._v("#")]),s._v(" Group module：管理组")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("ansible netnodes -m group -a "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"name=testgroup system=yes"')]),s._v("   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建组")]),s._v("\nansible netnodes -m group -a "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"name=testgroup state=absent"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除组")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])])])}),[],!1,null,null,null);a.default=e.exports}}]);